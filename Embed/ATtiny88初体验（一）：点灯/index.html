
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9A%E4%BD%8D%E6%93%8D%E4%BD%9C%E5%92%8CMCU%E6%8E%A7%E5%88%B6%E6%8C%87%E4%BB%A4/">
      
      
        <link rel="next" href="../ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E5%91%BC%E5%90%B8%E7%81%AF/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>ATtiny88初体验（一）：点灯 - Chin's Blog</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#attiny88" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="Chin&#39;s Blog" class="md-header__button md-logo" aria-label="Chin's Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Chin's Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ATtiny88初体验（一）：点灯
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Chin&#39;s Blog" class="md-nav__button md-logo" aria-label="Chin's Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Chin's Blog
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        主页
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" tabindex="0" aria-expanded="false">
          Web
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Web" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Web
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Web/%E4%BD%BF%E7%94%A8MkDocs%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" class="md-nav__link">
        使用MkDocs搭建个人博客
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Web/%E5%8D%9A%E5%AE%A2%E5%9B%AD%E8%AE%BE%E7%BD%AESilence%E4%B8%BB%E9%A2%98/" class="md-nav__link">
        博客园设置Silence主题
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" tabindex="0" aria-expanded="true">
          Embed
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Embed" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Embed
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E6%90%AD%E5%BB%BA%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83/" class="md-nav__link">
        AVR汇编（一）：搭建交叉编译环境
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9AAVR%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/" class="md-nav__link">
        AVR汇编（二）：AVR架构介绍
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/" class="md-nav__link">
        AVR汇编（三）：寻址方式
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4/" class="md-nav__link">
        AVR汇编（四）：数据传送指令
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/" class="md-nav__link">
        AVR汇编（五）：算术和逻辑指令
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9A%E5%88%86%E6%94%AF%E6%8C%87%E4%BB%A4/" class="md-nav__link">
        AVR汇编（六）：分支指令
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9A%E4%BD%8D%E6%93%8D%E4%BD%9C%E5%92%8CMCU%E6%8E%A7%E5%88%B6%E6%8C%87%E4%BB%A4/" class="md-nav__link">
        AVR汇编（七）：位操作和MCU控制指令
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          ATtiny88初体验（一）：点灯
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        ATtiny88初体验（一）：点灯
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mh-et-live-tiny88" class="md-nav__link">
    MH-ET LIVE Tiny88介绍
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    熔丝位
  </a>
  
    <nav class="md-nav" aria-label="熔丝位">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    熔丝扩展位
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    熔丝高位
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    熔丝低位
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    修改熔丝位
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    点灯
  </a>
  
    <nav class="md-nav" aria-label="点灯">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    寄存器介绍
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    代码
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    下载
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    参考资料
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E5%91%BC%E5%90%B8%E7%81%AF/" class="md-nav__link">
        ATtiny88初体验（二）：呼吸灯
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E4%B8%B2%E5%8F%A3/" class="md-nav__link">
        ATtiny88初体验（三）：串口
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E7%9C%8B%E9%97%A8%E7%8B%97/" class="md-nav__link">
        ATtiny88初体验（四）：看门狗
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9AADC/" class="md-nav__link">
        ATtiny88初体验（五）：ADC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9ASPI/" class="md-nav__link">
        ATtiny88初体验（六）：SPI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9ATWI/" class="md-nav__link">
        ATtiny88初体验（七）：TWI
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mh-et-live-tiny88" class="md-nav__link">
    MH-ET LIVE Tiny88介绍
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    熔丝位
  </a>
  
    <nav class="md-nav" aria-label="熔丝位">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    熔丝扩展位
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    熔丝高位
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    熔丝低位
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    修改熔丝位
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    点灯
  </a>
  
    <nav class="md-nav" aria-label="点灯">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    寄存器介绍
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    代码
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    下载
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    参考资料
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="attiny88">ATtiny88初体验（一）：点灯<a class="headerlink" href="#attiny88" title="Permanent link">&para;</a></h1>
<p>最近逛淘宝时，发现一块ATtiny88核心板（MH-ET LIVE Tiny88）用完红包后只剩4块钱了，果断下单，准备好好把玩一番。</p>
<h2 id="mh-et-live-tiny88">MH-ET LIVE Tiny88介绍<a class="headerlink" href="#mh-et-live-tiny88" title="Permanent link">&para;</a></h2>
<p>这块核心板使用的MCU型号是ATtiny88，主要参数如下：</p>
<table>
<thead>
<tr>
<th align="center">资源</th>
<th align="center">主要特征</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Flash</td>
<td align="center">8KB</td>
</tr>
<tr>
<td align="center">SRAM</td>
<td align="center">512B</td>
</tr>
<tr>
<td align="center">频率</td>
<td align="center">12MHz</td>
</tr>
<tr>
<td align="center">EEPROM</td>
<td align="center">64B</td>
</tr>
<tr>
<td align="center">定时器</td>
<td align="center">1个8bit，1个16bit</td>
</tr>
<tr>
<td align="center">PWM</td>
<td align="center">2通道</td>
</tr>
<tr>
<td align="center">ADC</td>
<td align="center">8通道10bit</td>
</tr>
<tr>
<td align="center">比较器</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">GPIO</td>
<td align="center">28</td>
</tr>
<tr>
<td align="center">SPI</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">TWI</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">看门狗</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">电压</td>
<td align="center">0~4MHz @ 1.8~5.5V <br/> 0~8MHz @ 2.7~5.5V <br/> 0~12MHz @ 4.5~5.5V</td>
</tr>
</tbody>
</table>
<p>MH-ET LIVE Tiny88的引脚图如下：</p>
<p><img alt="MHET_Tiny.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/MHET_Tiny.png" /></p>
<p>板子共引出了26个IO口，少了的2个IO口是PB6和PC6，其中PB6没有引出，可以通过熔丝位将RST引脚配置为PC6。另外，1号和2号引脚是连接到USB口的，供VUSB使用，最好不要另作他用。</p>
<p>值得注意的是，板子搭载的晶振频率为16MHz，已经超过了<a href="https://ww1.microchip.com/downloads/en/DeviceDoc/doc8008.pdf">ATtiny88手册</a>里标明的最大工作频率12MHz，超频了33%。</p>
<h2 id="_1">熔丝位<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>ATtiny88拥有3个字节的熔丝位，和一般的逻辑相反，熔丝位中的 <code>1</code> 表示未编程（禁止）， <code>0</code> 表示已编程（启用）。修改熔丝位时需要谨慎再谨慎，否则可能造成锁死单片机（俗称变砖）。</p>
<h3 id="_2">熔丝扩展位<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p><img alt="image.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/20230818202138.png" /></p>
<ul>
<li><code>SELFPRGEN</code> ：设为 <code>0</code> 表示启用自编程（ <code>SPM</code> 指令）</li>
</ul>
<h3 id="_3">熔丝高位<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p><img alt="image.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/20230818202408.png" /></p>
<ul>
<li><code>RSTDISBL</code> ：设为 <code>0</code> 时将复位引脚用作普通IO（PC6），<strong>修改需谨慎！</strong></li>
<li><code>DWEN</code> ：设为 <code>0</code> 时启用调试接口</li>
<li><code>SPIEN</code> ：设为 <code>0</code> 时可以通过SPI下载程序和数据，<strong>修改需谨慎！</strong></li>
<li><code>WDTON</code> ：设为 <code>0</code> 时将总是启用看门狗</li>
<li><code>EESAVE</code> ：设为 <code>0</code> 时擦除芯片时会保留EEPROM中的内容</li>
<li><code>BODLEVEL[2:0]</code> ：设置欠压检测等级
    <img alt="image.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/20230818203322.png" /></li>
</ul>
<h3 id="_4">熔丝低位<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p><img alt="image.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/20230818202428.png" /></p>
<ul>
<li><code>CKDIV8</code> ：设为 <code>0</code> 时系统时钟会进行8分频</li>
<li><code>CKOUT</code> ：设为 <code>0</code> 时启用时钟输出（通过CLKO引脚）</li>
<li><code>SUT[1:0]</code> ：设置启动时间
    <img alt="image.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/20230818203643.png" /></li>
<li><code>CKSEL[1:0]</code> ：设置时钟源
    <img alt="image.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/20230818203724.png" /></li>
</ul>
<h3 id="_5">修改熔丝位<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>在Windows环境下，可以借助<a href="https://github.com/gen-so/PROGISP-V1.72">PROGISP</a>软件查看和修改熔丝位。</p>
<p>通过USBasp将核心板与电脑连接，打开PROGISP软件，在“Select Chip”下选择“ATtiny88”，点击“RD”按钮，如果连接没有问题，会提示“读出ID成功”。</p>
<p><img alt="image.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/20230819144736.png" /></p>
<p>点击“自动”按钮旁边的“...”按钮。</p>
<p><img alt="image.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/20230819144941.png" /></p>
<p>在弹出的小窗口中点击下方“位配置方式”标签页中的“读出”按钮，提示“熔丝位读出成功”。</p>
<p><img alt="image.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/20230819145411.png" /></p>
<p>点击需要修改熔丝位即可切换该位的值，设置完毕后点击“位配置方式”中的“写入”按钮，提示“熔丝位写入成功”。</p>
<p><img alt="image.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/20230819145921.png" /></p>
<p>至此，便完成了熔丝位的修改。</p>
<h2 id="_6">点灯<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<p>“点灯”程序就是单片机开发中的“Hello World！”，借助它，可以大致体会单片机开发的完整流程。</p>
<h3 id="_7">寄存器介绍<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p><img alt="image.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/20230819150514.png" /></p>
<p>在ATtiny88中，每个IO口都可作为输入或者输出，并且都有一个独立可控的内部上拉电阻。</p>
<p>与IO相关的寄存器主要有 <code>MCUCR</code> 、 <code>PORTCR</code> 、 <code>PORTx</code> 、 <code>DDRx</code> 、 <code>PINx</code> 。</p>
<p><img alt="image.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/20230819151033.png" /></p>
<ul>
<li><code>PUD</code> ：写 <code>1</code> 禁止内部上拉电阻（全局）</li>
</ul>
<p><img alt="image.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/20230819151051.png" /></p>
<ul>
<li><code>BBMx</code> ：写 <code>1</code> 使能对应端口的Break-Before-Make模式</li>
<li><code>PUDx</code> ：写 <code>1</code> 禁止对应端口的内部上拉电阻</li>
</ul>
<p><img alt="image.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/20230819151114.png" /></p>
<p><code>PORTx</code> 寄存器存放输出数据， <code>PINx</code> 寄存器存放输入数据， <code>DDRx</code> 寄存器用于配置端口方向， <code>0</code> 表示输入， <code>1</code> 表示输出。</p>
<p>当IO配置为输入模式时，向 <code>PORTx</code> 寄存器中写 <code>1</code> 表示启用内部上拉电阻。</p>
<p>不管是输入还是输出模式，向 <code>PINx</code> 寄存器中写 <code>1</code> 都表示翻转 <code>PORTx</code> 寄存器中对应位的状态。</p>
<p>IO口的具体配置组合如下所示：</p>
<p><img alt="image.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/20230819093204.png" /></p>
<h3 id="_8">代码<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>代码文件的整体结构如下所示：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span>
<span class="normal"><a href="#__codelineno-0-4">4</a></span>
<span class="normal"><a href="#__codelineno-0-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>.
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>├── Makefile
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>├── inc
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>└── src
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>    └── main.c
</code></pre></div></td></tr></table></div>
<p>为了方便编译，在根目录下编写一个 <code>Makefile</code> 文件：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Makefile</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span>
<span class="normal"><a href="#__codelineno-1-18">18</a></span>
<span class="normal"><a href="#__codelineno-1-19">19</a></span>
<span class="normal"><a href="#__codelineno-1-20">20</a></span>
<span class="normal"><a href="#__codelineno-1-21">21</a></span>
<span class="normal"><a href="#__codelineno-1-22">22</a></span>
<span class="normal"><a href="#__codelineno-1-23">23</a></span>
<span class="normal"><a href="#__codelineno-1-24">24</a></span>
<span class="normal"><a href="#__codelineno-1-25">25</a></span>
<span class="normal"><a href="#__codelineno-1-26">26</a></span>
<span class="normal"><a href="#__codelineno-1-27">27</a></span>
<span class="normal"><a href="#__codelineno-1-28">28</a></span>
<span class="normal"><a href="#__codelineno-1-29">29</a></span>
<span class="normal"><a href="#__codelineno-1-30">30</a></span>
<span class="normal"><a href="#__codelineno-1-31">31</a></span>
<span class="normal"><a href="#__codelineno-1-32">32</a></span>
<span class="normal"><a href="#__codelineno-1-33">33</a></span>
<span class="normal"><a href="#__codelineno-1-34">34</a></span>
<span class="normal"><a href="#__codelineno-1-35">35</a></span>
<span class="normal"><a href="#__codelineno-1-36">36</a></span>
<span class="normal"><a href="#__codelineno-1-37">37</a></span>
<span class="normal"><a href="#__codelineno-1-38">38</a></span>
<span class="normal"><a href="#__codelineno-1-39">39</a></span>
<span class="normal"><a href="#__codelineno-1-40">40</a></span>
<span class="normal"><a href="#__codelineno-1-41">41</a></span>
<span class="normal"><a href="#__codelineno-1-42">42</a></span>
<span class="normal"><a href="#__codelineno-1-43">43</a></span>
<span class="normal"><a href="#__codelineno-1-44">44</a></span>
<span class="normal"><a href="#__codelineno-1-45">45</a></span>
<span class="normal"><a href="#__codelineno-1-46">46</a></span>
<span class="normal"><a href="#__codelineno-1-47">47</a></span>
<span class="normal"><a href="#__codelineno-1-48">48</a></span>
<span class="normal"><a href="#__codelineno-1-49">49</a></span>
<span class="normal"><a href="#__codelineno-1-50">50</a></span>
<span class="normal"><a href="#__codelineno-1-51">51</a></span>
<span class="normal"><a href="#__codelineno-1-52">52</a></span>
<span class="normal"><a href="#__codelineno-1-53">53</a></span>
<span class="normal"><a href="#__codelineno-1-54">54</a></span>
<span class="normal"><a href="#__codelineno-1-55">55</a></span>
<span class="normal"><a href="#__codelineno-1-56">56</a></span>
<span class="normal"><a href="#__codelineno-1-57">57</a></span>
<span class="normal"><a href="#__codelineno-1-58">58</a></span>
<span class="normal"><a href="#__codelineno-1-59">59</a></span>
<span class="normal"><a href="#__codelineno-1-60">60</a></span>
<span class="normal"><a href="#__codelineno-1-61">61</a></span>
<span class="normal"><a href="#__codelineno-1-62">62</a></span>
<span class="normal"><a href="#__codelineno-1-63">63</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="nv">CC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>avr-gcc
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="nv">CP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>avr-objcopy
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="nv">SZ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>avr-size
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="nv">DP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>avr-objdump
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="nv">AVRDUDE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>avrdude
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="nv">TARGET</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>led
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="nv">BUILD_DIR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>build
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="nv">C_SOURCES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>src/main.c
<a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="nv">C_INCLUDES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>-Iinc
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="nv">C_DEFS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>-DF_CPU<span class="o">=</span><span class="m">16000000</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="nv">LIBS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>-lc<span class="w"> </span>-lm
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="nv">LIBDIRS</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="nv">MCU</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>-mmcu<span class="o">=</span>attiny88
<a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="nv">OPT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>-Og
<a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="nv">CFLAGS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">$(</span>MCU<span class="k">)</span><span class="w"> </span><span class="k">$(</span>C_DEFS<span class="k">)</span><span class="w"> </span><span class="k">$(</span>C_INCLUDES<span class="k">)</span><span class="w"> </span><span class="k">$(</span>OPT<span class="k">)</span><span class="w"> </span>-g<span class="w"> </span>-std<span class="o">=</span>gnu99<span class="w"> </span>-Wall<span class="w"> </span>-fdata-sections<span class="w"> </span>-ffunction-sections
<a id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="nv">LDFLAGS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">$(</span>MCU<span class="k">)</span><span class="w"> </span><span class="k">$(</span>LIBS<span class="k">)</span><span class="w"> </span><span class="k">$(</span>LIBDIRS<span class="k">)</span><span class="w"> </span>-Wl,--gc-sections<span class="w"> </span>-Wl,-Map<span class="o">=</span><span class="k">$(</span>BUILD_DIR<span class="k">)</span>/<span class="k">$(</span>TARGET<span class="k">)</span>.map,--cref
<a id="__codelineno-1-19" name="__codelineno-1-19"></a>
<a id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="nv">PROGRAMMER_ID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>usbasp
<a id="__codelineno-1-21" name="__codelineno-1-21"></a><span class="nv">PARTNO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>t88
<a id="__codelineno-1-22" name="__codelineno-1-22"></a><span class="nv">PORT</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="nv">BAUDRATE</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-1-24" name="__codelineno-1-24"></a>
<a id="__codelineno-1-25" name="__codelineno-1-25"></a><span class="nv">OBJECTS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">$(</span>addprefix<span class="w"> </span><span class="k">$(</span>BUILD_DIR<span class="k">)</span>/,<span class="k">$(</span>C_SOURCES:.c<span class="o">=</span>.o<span class="k">))</span>
<a id="__codelineno-1-26" name="__codelineno-1-26"></a><span class="nv">CFLAGS</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>-MMD<span class="w"> </span>-MP<span class="w"> </span>-MF<span class="s2">&quot;</span><span class="k">$(</span>@:%.o<span class="o">=</span>%.d<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>-Wa,-adhmls<span class="o">=</span><span class="k">$(</span>@:%.o<span class="o">=</span>%.lst<span class="k">)</span>
<a id="__codelineno-1-27" name="__codelineno-1-27"></a><span class="nv">AVRDUDE_FLAGS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>-c<span class="w"> </span><span class="k">$(</span>PROGRAMMER_ID<span class="k">)</span><span class="w"> </span>-p<span class="w"> </span><span class="k">$(</span>PARTNO<span class="k">)</span>
<a id="__codelineno-1-28" name="__codelineno-1-28"></a><span class="cp">ifneq ($(PORT),)</span>
<a id="__codelineno-1-29" name="__codelineno-1-29"></a><span class="w">        </span><span class="nv">AVRDUDE_FLAGS</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>-P<span class="w"> </span><span class="k">$(</span>PORT<span class="k">)</span>
<a id="__codelineno-1-30" name="__codelineno-1-30"></a><span class="cp">endif</span>
<a id="__codelineno-1-31" name="__codelineno-1-31"></a><span class="cp">ifneq ($(BAUDRATE),)</span>
<a id="__codelineno-1-32" name="__codelineno-1-32"></a><span class="w">        </span><span class="nv">AVRDUDE_FLAGS</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>-b<span class="w"> </span><span class="k">$(</span>BAUDRATE<span class="k">)</span>
<a id="__codelineno-1-33" name="__codelineno-1-33"></a><span class="cp">endif</span>
<a id="__codelineno-1-34" name="__codelineno-1-34"></a>
<a id="__codelineno-1-35" name="__codelineno-1-35"></a><span class="nf">.PHONY</span><span class="o">:</span><span class="w"> </span><span class="n">all</span> <span class="n">clean</span> <span class="n">flash</span>
<a id="__codelineno-1-36" name="__codelineno-1-36"></a><span class="nf">all</span><span class="o">:</span><span class="w"> </span><span class="k">$(</span><span class="nv">BUILD_DIR</span><span class="k">)</span>/<span class="k">$(</span><span class="nv">TARGET</span><span class="k">)</span>.<span class="n">elf</span> <span class="k">$(</span><span class="nv">BUILD_DIR</span><span class="k">)</span>/<span class="k">$(</span><span class="nv">TARGET</span><span class="k">)</span>.<span class="n">txt</span> <span class="k">$(</span><span class="nv">BUILD_DIR</span><span class="k">)</span>/<span class="k">$(</span><span class="nv">TARGET</span><span class="k">)</span>.<span class="n">hex</span> <span class="k">$(</span><span class="nv">BUILD_DIR</span><span class="k">)</span>/<span class="k">$(</span><span class="nv">TARGET</span><span class="k">)</span>.<span class="n">bin</span>
<a id="__codelineno-1-37" name="__codelineno-1-37"></a>
<a id="__codelineno-1-38" name="__codelineno-1-38"></a><span class="nf">$(BUILD_DIR)/%.o</span><span class="o">:</span><span class="w"> </span>%.<span class="n">c</span> <span class="n">Makefile</span> <span class="p">|</span> <span class="k">$(</span><span class="nv">BUILD_DIR</span><span class="k">)</span>
<a id="__codelineno-1-39" name="__codelineno-1-39"></a><span class="w">        </span><span class="k">$(</span>CC<span class="k">)</span><span class="w"> </span>-c<span class="w"> </span><span class="k">$(</span>CFLAGS<span class="k">)</span><span class="w"> </span>-o<span class="w"> </span><span class="nv">$@</span><span class="w"> </span>$&lt;
<a id="__codelineno-1-40" name="__codelineno-1-40"></a>
<a id="__codelineno-1-41" name="__codelineno-1-41"></a><span class="nf">$(BUILD_DIR)/$(TARGET).elf</span><span class="o">:</span><span class="w"> </span><span class="k">$(</span><span class="nv">OBJECTS</span><span class="k">)</span>
<a id="__codelineno-1-42" name="__codelineno-1-42"></a><span class="w">        </span><span class="k">$(</span>CC<span class="k">)</span><span class="w"> </span><span class="k">$(</span>LDFLAGS<span class="k">)</span><span class="w"> </span><span class="k">$(</span>OBJECTS<span class="k">)</span><span class="w"> </span>-o<span class="w"> </span><span class="nv">$@</span>
<a id="__codelineno-1-43" name="__codelineno-1-43"></a><span class="w">        </span><span class="k">$(</span>SZ<span class="k">)</span><span class="w"> </span><span class="nv">$@</span>
<a id="__codelineno-1-44" name="__codelineno-1-44"></a>
<a id="__codelineno-1-45" name="__codelineno-1-45"></a><span class="nf">$(BUILD_DIR)/$(TARGET).txt</span><span class="o">:</span><span class="w"> </span><span class="k">$(</span><span class="nv">BUILD_DIR</span><span class="k">)</span>/<span class="k">$(</span><span class="nv">TARGET</span><span class="k">)</span>.<span class="n">elf</span>
<a id="__codelineno-1-46" name="__codelineno-1-46"></a><span class="w">        </span><span class="k">$(</span>DP<span class="k">)</span><span class="w"> </span>-h<span class="w"> </span>-S<span class="w"> </span>$&lt;<span class="w"> </span>&gt;<span class="w"> </span><span class="nv">$@</span>
<a id="__codelineno-1-47" name="__codelineno-1-47"></a>
<a id="__codelineno-1-48" name="__codelineno-1-48"></a><span class="nf">$(BUILD_DIR)/$(TARGET).hex</span><span class="o">:</span><span class="w"> </span><span class="k">$(</span><span class="nv">BUILD_DIR</span><span class="k">)</span>/<span class="k">$(</span><span class="nv">TARGET</span><span class="k">)</span>.<span class="n">elf</span>
<a id="__codelineno-1-49" name="__codelineno-1-49"></a><span class="w">        </span><span class="k">$(</span>CP<span class="k">)</span><span class="w"> </span>-O<span class="w"> </span>ihex<span class="w"> </span>$&lt;<span class="w"> </span><span class="nv">$@</span>
<a id="__codelineno-1-50" name="__codelineno-1-50"></a>
<a id="__codelineno-1-51" name="__codelineno-1-51"></a><span class="nf">$(BUILD_DIR)/$(TARGET).bin</span><span class="o">:</span><span class="w"> </span><span class="k">$(</span><span class="nv">BUILD_DIR</span><span class="k">)</span>/<span class="k">$(</span><span class="nv">TARGET</span><span class="k">)</span>.<span class="n">elf</span>
<a id="__codelineno-1-52" name="__codelineno-1-52"></a><span class="w">        </span><span class="k">$(</span>CP<span class="k">)</span><span class="w"> </span>-O<span class="w"> </span>binary<span class="w"> </span>-S<span class="w"> </span>$&lt;<span class="w"> </span><span class="nv">$@</span>
<a id="__codelineno-1-53" name="__codelineno-1-53"></a>
<a id="__codelineno-1-54" name="__codelineno-1-54"></a><span class="nf">$(BUILD_DIR)</span><span class="o">:</span>
<a id="__codelineno-1-55" name="__codelineno-1-55"></a><span class="w">        </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="k">$(</span>sort<span class="w"> </span><span class="k">$(</span>dir<span class="w"> </span><span class="k">$(</span>OBJECTS<span class="k">)))</span>
<a id="__codelineno-1-56" name="__codelineno-1-56"></a>
<a id="__codelineno-1-57" name="__codelineno-1-57"></a><span class="nf">clean</span><span class="o">:</span>
<a id="__codelineno-1-58" name="__codelineno-1-58"></a><span class="w">        </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="k">$(</span>BUILD_DIR<span class="k">)</span>
<a id="__codelineno-1-59" name="__codelineno-1-59"></a>
<a id="__codelineno-1-60" name="__codelineno-1-60"></a><span class="nf">flash</span><span class="o">:</span><span class="w"> </span><span class="k">$(</span><span class="nv">BUILD_DIR</span><span class="k">)</span>/<span class="k">$(</span><span class="nv">TARGET</span><span class="k">)</span>.<span class="n">hex</span>
<a id="__codelineno-1-61" name="__codelineno-1-61"></a><span class="w">        </span><span class="k">$(</span>AVRDUDE<span class="k">)</span><span class="w"> </span><span class="k">$(</span>AVRDUDE_FLAGS<span class="k">)</span><span class="w"> </span>-U<span class="w"> </span>flash:w:$&lt;:i
<a id="__codelineno-1-62" name="__codelineno-1-62"></a>
<a id="__codelineno-1-63" name="__codelineno-1-63"></a><span class="cp">-include $(OBJECTS:%.o=%.d)</span>
</code></pre></div></td></tr></table></div>
<p><code>Makefile</code> 文件中的 <code>TARGET</code> 变量指定目标名称， <code>BUILD_DIR</code> 变量指定编译目录， <code>C_SOURCES</code> 指定C源文件， <code>C_DEFS</code> 指定C宏定义， <code>C_INCLUDES</code> 指定头文件目录。</p>
<p>MH-ET LIVE Tiny88板载的LED连接到0号引脚，对应的是PD0，高电平点亮。在 <code>src</code> 目录下新建一个 <code>main.c</code> 源文件，输入如下代码，实现：设置PD0位输出模式，然后每隔一段时间翻转PD0的输出。</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">src/main.c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdint.h&gt;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;avr/io.h&gt;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">delay</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="p">{</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">    </span><span class="n">DDRD</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="mh">0x01</span><span class="p">;</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">    </span><span class="n">PORTD</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="mh">0x01</span><span class="p">;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(;;)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">        </span><span class="n">PIND</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x01</span><span class="p">;</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">        </span><span class="n">delay</span><span class="p">();</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="p">}</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">delay</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="p">{</span>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">volatile</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mh">0x20000</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">);</span>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>编译代码：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a>make
</code></pre></div></td></tr></table></div>
<p>将在 <code>build</code> 文件夹下生成ELF/HEX/BIN文件。</p>
<h3 id="_9">下载<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>在 <code>/etc/udev/rules.d/</code> 目录下创建一个USBasp的规则文件 <code>99-usbasp.rules</code> ，内容如下：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">/etc/udev/rules.d/99-usbasp.rules</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a>ATTRS{idVendor}==&quot;16c0&quot;, ATTRS{idProduct}==&quot;05dc&quot;, MODE=&quot;664&quot;, GROUP=&quot;plugdev&quot;
</code></pre></div></td></tr></table></div>
<p>其中，注意 <code>idVector</code> 和 <code>idProduct</code> 需要根据实际情况填写。</p>
<p>安装 <code>avrdude</code> 软件：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>avrdude
</code></pre></div></td></tr></table></div>
<p>连接USBasp，进行下载：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a>make<span class="w"> </span>flash
</code></pre></div></td></tr></table></div>
<p>上述命令实际上执行的是：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a>avrdude<span class="w"> </span>-c<span class="w"> </span>usbasp<span class="w"> </span>-p<span class="w"> </span>t88<span class="w"> </span>-U<span class="w"> </span>flash:w:build/led.hex:i
</code></pre></div></td></tr></table></div>
<p><code>avrdude</code> 中常用的选项如下</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>含义</th>
<th>取值</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-c programmer-id</code></td>
<td>指定编程器</td>
<td><code>usbasp</code> ：USBasp <br/> <code>arduino</code> ：ArduinoISP</td>
</tr>
<tr>
<td><code>-p partno</code></td>
<td>指定单片机</td>
<td><code>t88</code> ：ATtiny88 <br/> <code>m328p</code>：ATmega328P <br/> <code>m32u4</code> ：ATmega32U4</td>
</tr>
<tr>
<td><code>-P port</code></td>
<td>指定端口</td>
<td></td>
</tr>
<tr>
<td><code>-b baudrate</code></td>
<td>指定波特率</td>
<td></td>
</tr>
<tr>
<td><code>-U memtype:op:filename[:format]</code></td>
<td>指定执行的操作 <br/> <code>memtype</code> ：内存区域 <br/> <code>op</code> ：操作 <br/> <code>filename</code> ：文件名 <br/> <code>format</code> ：文件格式</td>
<td><code>memtype</code> 的取值： <br/> <code>flash</code> ：Flash ROM <br/> <code>eeprom</code> ：EEPROM <br/> <code>efuse</code> / <code>hfuse</code> / <code>lfuse</code> ：扩展/高/低熔丝位 <br/> <code>op</code> 的取值： <br/> <code>r</code> ：读 <br/> <code>w</code> ：写 <br/> <code>v</code> ：校验 <br/> <code>format</code> 的取值： <br/> <code>i</code> ：Intel Hex <br/> <code>r</code> ：raw binary <br/> <code>e</code> ：ELF</td>
</tr>
</tbody>
</table>
<p>输出如下信息表示下载成功：</p>
<p><img alt="image.png" src="https://cdn.jsdelivr.net/gh/chinjinyu/image-hosting-website@main/images/20230819154855.png" /></p>
<h2 id="_10">参考资料<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="https://ww1.microchip.com/downloads/en/DeviceDoc/doc8008.pdf">ATtiny88 Datasheet</a></li>
<li><a href="https://github.com/gen-so/PROGISP-V1.72">PROGISP</a></li>
<li><a href="https://www.nongnu.org/avrdude/user-manual/avrdude.html">AVRDUDE User Manual</a></li>
</ol>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.51d95adb.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>