{"config":{"lang":["ja"],"separator":"[\\s\\-\uff0c\u3002]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Hi\uff0c\u6211\u662fChin\uff0c\u6b22\u8fce\u6765\u5230\u6211\u7684\u4e3b\u9875\uff01","text":"<p>\u201cIf I've learned one thing in the 14 years I've been a full-time cartoonist, it's that you can not let anyone else define your professionalism. It has to be a personal ethos to which you adhere despite third party influence or acceptance. The old measuring sticks for professionalism are going away and now more than ever it's time for independent creatives to set the bar. Set it high.\u201d -- Scott R. Kurtz  </p> <p>\u6211\uff0c\u70ed\u7231\u8ba1\u7b97\u673a\u548c\u5d4c\u5165\u5f0f\uff0c\u6c89\u8ff7\u4e8e\u4ee3\u7801\u7684\u4e16\u754c \u559c\u6b22\u5b89\u9759\u7684\u73af\u5883\uff0c\u7231\u542c\u73c2\u77e3\u59d0\u59d0\u7684\u6b4c \u867d\u7136\u72ec\u6765\u72ec\u5f80\uff0c\u4f46\u5e76\u4e0d\u5b64\u5355 \u6211\u7684\u811a\u6b65\u624d\u521a\u521a\u5f00\u59cb  </p>"},{"location":"#_1","title":"\u6211\u7684\u7ad9\u70b9","text":"<ul> <li>GitHub</li> <li>\u535a\u5ba2\u56ed</li> </ul>"},{"location":"#_2","title":"\u6253\u8d4f\u8d5e\u52a9","text":"\u652f\u4ed8\u5b9d \u5fae\u4fe1"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E7%82%B9%E7%81%AF/","title":"ATtiny88\u521d\u4f53\u9a8c\uff08\u4e00\uff09\uff1a\u70b9\u706f","text":"<p>\u6700\u8fd1\u901b\u6dd8\u5b9d\u65f6\uff0c\u53d1\u73b0\u4e00\u5757ATtiny88\u6838\u5fc3\u677f\uff08MH-ET LIVE Tiny88\uff09\u7528\u5b8c\u7ea2\u5305\u540e\u53ea\u52694\u5757\u94b1\u4e86\uff0c\u679c\u65ad\u4e0b\u5355\uff0c\u51c6\u5907\u597d\u597d\u628a\u73a9\u4e00\u756a\u3002</p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E7%82%B9%E7%81%AF/#mh-et-live-tiny88","title":"MH-ET LIVE Tiny88\u4ecb\u7ecd","text":"<p>\u8fd9\u5757\u6838\u5fc3\u677f\u4f7f\u7528\u7684MCU\u578b\u53f7\u662fATtiny88\uff0c\u4e3b\u8981\u53c2\u6570\u5982\u4e0b\uff1a</p> \u8d44\u6e90 \u4e3b\u8981\u7279\u5f81 Flash 8KB SRAM 512B \u9891\u7387 12MHz EEPROM 64B \u5b9a\u65f6\u5668 1\u4e2a8bit\uff0c1\u4e2a16bit PWM 2\u901a\u9053 ADC 8\u901a\u905310bit \u6bd4\u8f83\u5668 1 GPIO 28 SPI 1 TWI 1 \u770b\u95e8\u72d7 1 \u7535\u538b 0~4MHz @ 1.8~5.5V  0~8MHz @ 2.7~5.5V  0~12MHz @ 4.5~5.5V <p>MH-ET LIVE Tiny88\u7684\u5f15\u811a\u56fe\u5982\u4e0b\uff1a</p> <p></p> <p>\u677f\u5b50\u5171\u5f15\u51fa\u4e8626\u4e2aIO\u53e3\uff0c\u5c11\u4e86\u76842\u4e2aIO\u53e3\u662fPB6\u548cPC6\uff0c\u5176\u4e2dPB6\u6ca1\u6709\u5f15\u51fa\uff0c\u53ef\u4ee5\u901a\u8fc7\u7194\u4e1d\u4f4d\u5c06RST\u5f15\u811a\u914d\u7f6e\u4e3aPC6\u3002\u53e6\u5916\uff0c1\u53f7\u548c2\u53f7\u5f15\u811a\u662f\u8fde\u63a5\u5230USB\u53e3\u7684\uff0c\u4f9bVUSB\u4f7f\u7528\uff0c\u6700\u597d\u4e0d\u8981\u53e6\u4f5c\u4ed6\u7528\u3002</p> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u677f\u5b50\u642d\u8f7d\u7684\u6676\u632f\u9891\u7387\u4e3a16MHz\uff0c\u5df2\u7ecf\u8d85\u8fc7\u4e86ATtiny88\u624b\u518c\u91cc\u6807\u660e\u7684\u6700\u5927\u5de5\u4f5c\u9891\u738712MHz\uff0c\u8d85\u9891\u4e8633%\u3002</p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E7%82%B9%E7%81%AF/#_1","title":"\u7194\u4e1d\u4f4d","text":"<p>ATtiny88\u62e5\u67093\u4e2a\u5b57\u8282\u7684\u7194\u4e1d\u4f4d\uff0c\u548c\u4e00\u822c\u7684\u903b\u8f91\u76f8\u53cd\uff0c\u7194\u4e1d\u4f4d\u4e2d\u7684 <code>1</code> \u8868\u793a\u672a\u7f16\u7a0b\uff08\u7981\u6b62\uff09\uff0c <code>0</code> \u8868\u793a\u5df2\u7f16\u7a0b\uff08\u542f\u7528\uff09\u3002\u4fee\u6539\u7194\u4e1d\u4f4d\u65f6\u9700\u8981\u8c28\u614e\u518d\u8c28\u614e\uff0c\u5426\u5219\u53ef\u80fd\u9020\u6210\u9501\u6b7b\u5355\u7247\u673a\uff08\u4fd7\u79f0\u53d8\u7816\uff09\u3002</p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E7%82%B9%E7%81%AF/#_2","title":"\u7194\u4e1d\u6269\u5c55\u4f4d","text":"<ul> <li><code>SELFPRGEN</code> \uff1a\u8bbe\u4e3a <code>0</code> \u8868\u793a\u542f\u7528\u81ea\u7f16\u7a0b\uff08 <code>SPM</code> \u6307\u4ee4\uff09</li> </ul>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E7%82%B9%E7%81%AF/#_3","title":"\u7194\u4e1d\u9ad8\u4f4d","text":"<ul> <li><code>RSTDISBL</code> \uff1a\u8bbe\u4e3a <code>0</code> \u65f6\u5c06\u590d\u4f4d\u5f15\u811a\u7528\u4f5c\u666e\u901aIO\uff08PC6\uff09\uff0c\u4fee\u6539\u9700\u8c28\u614e\uff01</li> <li><code>DWEN</code> \uff1a\u8bbe\u4e3a <code>0</code> \u65f6\u542f\u7528\u8c03\u8bd5\u63a5\u53e3</li> <li><code>SPIEN</code> \uff1a\u8bbe\u4e3a <code>0</code> \u65f6\u53ef\u4ee5\u901a\u8fc7SPI\u4e0b\u8f7d\u7a0b\u5e8f\u548c\u6570\u636e\uff0c\u4fee\u6539\u9700\u8c28\u614e\uff01</li> <li><code>WDTON</code> \uff1a\u8bbe\u4e3a <code>0</code> \u65f6\u5c06\u603b\u662f\u542f\u7528\u770b\u95e8\u72d7</li> <li><code>EESAVE</code> \uff1a\u8bbe\u4e3a <code>0</code> \u65f6\u64e6\u9664\u82af\u7247\u65f6\u4f1a\u4fdd\u7559EEPROM\u4e2d\u7684\u5185\u5bb9</li> <li><code>BODLEVEL[2:0]</code> \uff1a\u8bbe\u7f6e\u6b20\u538b\u68c0\u6d4b\u7b49\u7ea7     </li> </ul>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E7%82%B9%E7%81%AF/#_4","title":"\u7194\u4e1d\u4f4e\u4f4d","text":"<ul> <li><code>CKDIV8</code> \uff1a\u8bbe\u4e3a <code>0</code> \u65f6\u7cfb\u7edf\u65f6\u949f\u4f1a\u8fdb\u884c8\u5206\u9891</li> <li><code>CKOUT</code> \uff1a\u8bbe\u4e3a <code>0</code> \u65f6\u542f\u7528\u65f6\u949f\u8f93\u51fa\uff08\u901a\u8fc7CLKO\u5f15\u811a\uff09</li> <li><code>SUT[1:0]</code> \uff1a\u8bbe\u7f6e\u542f\u52a8\u65f6\u95f4     </li> <li><code>CKSEL[1:0]</code> \uff1a\u8bbe\u7f6e\u65f6\u949f\u6e90     </li> </ul>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E7%82%B9%E7%81%AF/#_5","title":"\u4fee\u6539\u7194\u4e1d\u4f4d","text":"<p>\u5728Windows\u73af\u5883\u4e0b\uff0c\u53ef\u4ee5\u501f\u52a9PROGISP\u8f6f\u4ef6\u67e5\u770b\u548c\u4fee\u6539\u7194\u4e1d\u4f4d\u3002</p> <p>\u901a\u8fc7USBasp\u5c06\u6838\u5fc3\u677f\u4e0e\u7535\u8111\u8fde\u63a5\uff0c\u6253\u5f00PROGISP\u8f6f\u4ef6\uff0c\u5728\u201cSelect Chip\u201d\u4e0b\u9009\u62e9\u201cATtiny88\u201d\uff0c\u70b9\u51fb\u201cRD\u201d\u6309\u94ae\uff0c\u5982\u679c\u8fde\u63a5\u6ca1\u6709\u95ee\u9898\uff0c\u4f1a\u63d0\u793a\u201c\u8bfb\u51faID\u6210\u529f\u201d\u3002</p> <p></p> <p>\u70b9\u51fb\u201c\u81ea\u52a8\u201d\u6309\u94ae\u65c1\u8fb9\u7684\u201c...\u201d\u6309\u94ae\u3002</p> <p></p> <p>\u5728\u5f39\u51fa\u7684\u5c0f\u7a97\u53e3\u4e2d\u70b9\u51fb\u4e0b\u65b9\u201c\u4f4d\u914d\u7f6e\u65b9\u5f0f\u201d\u6807\u7b7e\u9875\u4e2d\u7684\u201c\u8bfb\u51fa\u201d\u6309\u94ae\uff0c\u63d0\u793a\u201c\u7194\u4e1d\u4f4d\u8bfb\u51fa\u6210\u529f\u201d\u3002</p> <p></p> <p>\u70b9\u51fb\u9700\u8981\u4fee\u6539\u7194\u4e1d\u4f4d\u5373\u53ef\u5207\u6362\u8be5\u4f4d\u7684\u503c\uff0c\u8bbe\u7f6e\u5b8c\u6bd5\u540e\u70b9\u51fb\u201c\u4f4d\u914d\u7f6e\u65b9\u5f0f\u201d\u4e2d\u7684\u201c\u5199\u5165\u201d\u6309\u94ae\uff0c\u63d0\u793a\u201c\u7194\u4e1d\u4f4d\u5199\u5165\u6210\u529f\u201d\u3002</p> <p></p> <p>\u81f3\u6b64\uff0c\u4fbf\u5b8c\u6210\u4e86\u7194\u4e1d\u4f4d\u7684\u4fee\u6539\u3002</p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E7%82%B9%E7%81%AF/#_6","title":"\u70b9\u706f","text":"<p>\u201c\u70b9\u706f\u201d\u7a0b\u5e8f\u5c31\u662f\u5355\u7247\u673a\u5f00\u53d1\u4e2d\u7684\u201cHello World\uff01\u201d\uff0c\u501f\u52a9\u5b83\uff0c\u53ef\u4ee5\u5927\u81f4\u4f53\u4f1a\u5355\u7247\u673a\u5f00\u53d1\u7684\u5b8c\u6574\u6d41\u7a0b\u3002</p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E7%82%B9%E7%81%AF/#_7","title":"\u5bc4\u5b58\u5668\u4ecb\u7ecd","text":"<p>\u5728ATtiny88\u4e2d\uff0c\u6bcf\u4e2aIO\u53e3\u90fd\u53ef\u4f5c\u4e3a\u8f93\u5165\u6216\u8005\u8f93\u51fa\uff0c\u5e76\u4e14\u90fd\u6709\u4e00\u4e2a\u72ec\u7acb\u53ef\u63a7\u7684\u5185\u90e8\u4e0a\u62c9\u7535\u963b\u3002</p> <p>\u4e0eIO\u76f8\u5173\u7684\u5bc4\u5b58\u5668\u4e3b\u8981\u6709 <code>MCUCR</code> \u3001 <code>PORTCR</code> \u3001 <code>PORTx</code> \u3001 <code>DDRx</code> \u3001 <code>PINx</code> \u3002</p> <p></p> <ul> <li><code>PUD</code> \uff1a\u5199 <code>1</code> \u7981\u6b62\u5185\u90e8\u4e0a\u62c9\u7535\u963b\uff08\u5168\u5c40\uff09</li> </ul> <p></p> <ul> <li><code>BBMx</code> \uff1a\u5199 <code>1</code> \u4f7f\u80fd\u5bf9\u5e94\u7aef\u53e3\u7684Break-Before-Make\u6a21\u5f0f</li> <li><code>PUDx</code> \uff1a\u5199 <code>1</code> \u7981\u6b62\u5bf9\u5e94\u7aef\u53e3\u7684\u5185\u90e8\u4e0a\u62c9\u7535\u963b</li> </ul> <p></p> <p><code>PORTx</code> \u5bc4\u5b58\u5668\u5b58\u653e\u8f93\u51fa\u6570\u636e\uff0c <code>PINx</code> \u5bc4\u5b58\u5668\u5b58\u653e\u8f93\u5165\u6570\u636e\uff0c <code>DDRx</code> \u5bc4\u5b58\u5668\u7528\u4e8e\u914d\u7f6e\u7aef\u53e3\u65b9\u5411\uff0c <code>0</code> \u8868\u793a\u8f93\u5165\uff0c <code>1</code> \u8868\u793a\u8f93\u51fa\u3002</p> <p>\u5f53IO\u914d\u7f6e\u4e3a\u8f93\u5165\u6a21\u5f0f\u65f6\uff0c\u5411 <code>PORTx</code> \u5bc4\u5b58\u5668\u4e2d\u5199 <code>1</code> \u8868\u793a\u542f\u7528\u5185\u90e8\u4e0a\u62c9\u7535\u963b\u3002</p> <p>\u4e0d\u7ba1\u662f\u8f93\u5165\u8fd8\u662f\u8f93\u51fa\u6a21\u5f0f\uff0c\u5411 <code>PINx</code> \u5bc4\u5b58\u5668\u4e2d\u5199 <code>1</code> \u90fd\u8868\u793a\u7ffb\u8f6c <code>PORTx</code> \u5bc4\u5b58\u5668\u4e2d\u5bf9\u5e94\u4f4d\u7684\u72b6\u6001\u3002</p> <p>IO\u53e3\u7684\u5177\u4f53\u914d\u7f6e\u7ec4\u5408\u5982\u4e0b\u6240\u793a\uff1a</p> <p></p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E7%82%B9%E7%81%AF/#_8","title":"\u4ee3\u7801","text":"<p>\u4ee3\u7801\u6587\u4ef6\u7684\u6574\u4f53\u7ed3\u6784\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 inc\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 main.c\n</code></pre> <p>\u4e3a\u4e86\u65b9\u4fbf\u7f16\u8bd1\uff0c\u5728\u6839\u76ee\u5f55\u4e0b\u7f16\u5199\u4e00\u4e2a <code>Makefile</code> \u6587\u4ef6\uff1a</p> Makefile<pre><code>CC = avr-gcc\nCP = avr-objcopy\nSZ = avr-size\nDP = avr-objdump\nAVRDUDE = avrdude\n\nTARGET = led\nBUILD_DIR = build\nC_SOURCES = src/main.c\nC_INCLUDES = -Iinc\nC_DEFS = -DF_CPU=16000000\nLIBS = -lc -lm\nLIBDIRS =\nMCU = -mmcu=attiny88\nOPT = -Og\nCFLAGS = $(MCU) $(C_DEFS) $(C_INCLUDES) $(OPT) -g -std=gnu99 -Wall -fdata-sections -ffunction-sections\nLDFLAGS = $(MCU) $(LIBS) $(LIBDIRS) -Wl,--gc-sections -Wl,-Map=$(BUILD_DIR)/$(TARGET).map,--cref\n\nPROGRAMMER_ID = usbasp\nPARTNO = t88\nPORT =\nBAUDRATE =\nOBJECTS = $(addprefix $(BUILD_DIR)/,$(C_SOURCES:.c=.o))\nCFLAGS += -MMD -MP -MF\"$(@:%.o=%.d)\" -Wa,-adhmls=$(@:%.o=%.lst)\nAVRDUDE_FLAGS = -c $(PROGRAMMER_ID) -p $(PARTNO)\nifneq ($(PORT),)\nAVRDUDE_FLAGS += -P $(PORT)\nendif\nifneq ($(BAUDRATE),)\nAVRDUDE_FLAGS += -b $(BAUDRATE)\nendif\n.PHONY: all clean flash\nall: $(BUILD_DIR)/$(TARGET).elf $(BUILD_DIR)/$(TARGET).txt $(BUILD_DIR)/$(TARGET).hex $(BUILD_DIR)/$(TARGET).bin\n$(BUILD_DIR)/%.o: %.c Makefile | $(BUILD_DIR)\n$(CC) -c $(CFLAGS) -o $@ $&lt;\n\n$(BUILD_DIR)/$(TARGET).elf: $(OBJECTS)\n$(CC) $(LDFLAGS) $(OBJECTS) -o $@\n$(SZ) $@\n$(BUILD_DIR)/$(TARGET).txt: $(BUILD_DIR)/$(TARGET).elf\n$(DP) -h -S $&lt; &gt; $@\n$(BUILD_DIR)/$(TARGET).hex: $(BUILD_DIR)/$(TARGET).elf\n$(CP) -O ihex $&lt; $@\n$(BUILD_DIR)/$(TARGET).bin: $(BUILD_DIR)/$(TARGET).elf\n$(CP) -O binary -S $&lt; $@\n$(BUILD_DIR):\nmkdir -p $(sort $(dir $(OBJECTS)))\nclean:\nrm -rf $(BUILD_DIR)\nflash: $(BUILD_DIR)/$(TARGET).hex\n$(AVRDUDE) $(AVRDUDE_FLAGS) -U flash:w:$&lt;:i\n\n-include $(OBJECTS:%.o=%.d)\n</code></pre> <p><code>Makefile</code> \u6587\u4ef6\u4e2d\u7684 <code>TARGET</code> \u53d8\u91cf\u6307\u5b9a\u76ee\u6807\u540d\u79f0\uff0c <code>BUILD_DIR</code> \u53d8\u91cf\u6307\u5b9a\u7f16\u8bd1\u76ee\u5f55\uff0c <code>C_SOURCES</code> \u6307\u5b9aC\u6e90\u6587\u4ef6\uff0c <code>C_DEFS</code> \u6307\u5b9aC\u5b8f\u5b9a\u4e49\uff0c <code>C_INCLUDES</code> \u6307\u5b9a\u5934\u6587\u4ef6\u76ee\u5f55\u3002</p> <p>MH-ET LIVE Tiny88\u677f\u8f7d\u7684LED\u8fde\u63a5\u52300\u53f7\u5f15\u811a\uff0c\u5bf9\u5e94\u7684\u662fPD0\uff0c\u9ad8\u7535\u5e73\u70b9\u4eae\u3002\u5728 <code>src</code> \u76ee\u5f55\u4e0b\u65b0\u5efa\u4e00\u4e2a <code>main.c</code> \u6e90\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u4ee3\u7801\uff0c\u5b9e\u73b0\uff1a\u8bbe\u7f6ePD0\u4f4d\u8f93\u51fa\u6a21\u5f0f\uff0c\u7136\u540e\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u7ffb\u8f6cPD0\u7684\u8f93\u51fa\u3002</p> src/main.c<pre><code>#include &lt;stdint.h&gt;\n#include &lt;avr/io.h&gt;\nstatic void delay(void);\nint main(void)\n{\nDDRD |= 0x01;\nPORTD |= 0x01;\nfor (;;) {\nPIND = 0x01;\ndelay();\n}\n}\nstatic void delay(void)\n{\nfor (volatile uint32_t i = 0; i &lt; 0x20000; i++);\n}\n</code></pre> <p>\u7f16\u8bd1\u4ee3\u7801\uff1a</p> <pre><code>make\n</code></pre> <p>\u5c06\u5728 <code>build</code> \u6587\u4ef6\u5939\u4e0b\u751f\u6210ELF/HEX/BIN\u6587\u4ef6\u3002</p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E7%82%B9%E7%81%AF/#_9","title":"\u4e0b\u8f7d","text":"<p>\u5728 <code>/etc/udev/rules.d/</code> \u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2aUSBasp\u7684\u89c4\u5219\u6587\u4ef6 <code>99-usbasp.rules</code> \uff0c\u5185\u5bb9\u5982\u4e0b\uff1a</p> /etc/udev/rules.d/99-usbasp.rules<pre><code>ATTRS{idVendor}==\"16c0\", ATTRS{idProduct}==\"05dc\", MODE=\"664\", GROUP=\"plugdev\"\n</code></pre> <p>\u5176\u4e2d\uff0c\u6ce8\u610f <code>idVector</code> \u548c <code>idProduct</code> \u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u586b\u5199\u3002</p> <p>\u5b89\u88c5 <code>avrdude</code> \u8f6f\u4ef6\uff1a</p> <pre><code>sudo apt install avrdude\n</code></pre> <p>\u8fde\u63a5USBasp\uff0c\u8fdb\u884c\u4e0b\u8f7d\uff1a</p> <pre><code>make flash\n</code></pre> <p>\u4e0a\u8ff0\u547d\u4ee4\u5b9e\u9645\u4e0a\u6267\u884c\u7684\u662f\uff1a</p> <pre><code>avrdude -c usbasp -p t88 -U flash:w:build/led.hex:i\n</code></pre> <p><code>avrdude</code> \u4e2d\u5e38\u7528\u7684\u9009\u9879\u5982\u4e0b</p> \u9009\u9879 \u542b\u4e49 \u53d6\u503c <code>-c programmer-id</code> \u6307\u5b9a\u7f16\u7a0b\u5668 <code>usbasp</code> \uff1aUSBasp  <code>arduino</code> \uff1aArduinoISP <code>-p partno</code> \u6307\u5b9a\u5355\u7247\u673a <code>t88</code> \uff1aATtiny88  <code>m328p</code>\uff1aATmega328P  <code>m32u4</code> \uff1aATmega32U4 <code>-P port</code> \u6307\u5b9a\u7aef\u53e3 <code>-b baudrate</code> \u6307\u5b9a\u6ce2\u7279\u7387 <code>-U memtype:op:filename[:format]</code> \u6307\u5b9a\u6267\u884c\u7684\u64cd\u4f5c  <code>memtype</code> \uff1a\u5185\u5b58\u533a\u57df  <code>op</code> \uff1a\u64cd\u4f5c  <code>filename</code> \uff1a\u6587\u4ef6\u540d  <code>format</code> \uff1a\u6587\u4ef6\u683c\u5f0f <code>memtype</code> \u7684\u53d6\u503c\uff1a  <code>flash</code> \uff1aFlash ROM  <code>eeprom</code> \uff1aEEPROM  <code>efuse</code> / <code>hfuse</code> / <code>lfuse</code> \uff1a\u6269\u5c55/\u9ad8/\u4f4e\u7194\u4e1d\u4f4d  <code>op</code> \u7684\u53d6\u503c\uff1a  <code>r</code> \uff1a\u8bfb  <code>w</code> \uff1a\u5199  <code>v</code> \uff1a\u6821\u9a8c  <code>format</code> \u7684\u53d6\u503c\uff1a  <code>i</code> \uff1aIntel Hex  <code>r</code> \uff1araw binary  <code>e</code> \uff1aELF <p>\u8f93\u51fa\u5982\u4e0b\u4fe1\u606f\u8868\u793a\u4e0b\u8f7d\u6210\u529f\uff1a</p> <p></p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E7%82%B9%E7%81%AF/#_10","title":"\u53c2\u8003\u8d44\u6599","text":"<ol> <li>ATtiny88 Datasheet</li> <li>PROGISP</li> <li>AVRDUDE User Manual</li> </ol>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9ATWI/","title":"ATtiny88\u521d\u4f53\u9a8c\uff08\u4e03\uff09\uff1aTWI","text":""},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9ATWI/#twi","title":"TWI\u6a21\u5757\u4ecb\u7ecd","text":"<p>ATtiny88\u7684TWI\u6a21\u5757\u517c\u5bb9Phillips I2C\u4ee5\u53caSMBus\uff0c\u652f\u6301\u4e3b\u4ece\u6a21\u5f0f\uff0c\u652f\u63017bit\u5730\u5740\uff0c\u6700\u5927\u5141\u8bb8128\u4e2a\u4e0d\u540c\u7684\u4ece\u673a\u5730\u5740\u3002\u5728\u591a\u4e3b\u673a\u6a21\u5f0f\u4e0b\uff0c\u652f\u6301\u603b\u7ebf\u4ef2\u88c1\u3002\u4ece\u673a\u6a21\u5f0f\u4e0b\u7684\u6570\u636e\u901f\u7387\u9ad8\u8fbe400kHz\uff0c\u4e14\u4ece\u673a\u5730\u5740\u53ef\u7f16\u7a0b\u3002\u5728\u7761\u7720\u6a21\u5f0f\u4e0b\uff0c\u652f\u6301\u5730\u5740\u8bc6\u522b\u5524\u9192\u3002</p> <p></p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u4f7f\u7528TWI\u6a21\u5757\uff0c <code>PRR</code> \u5bc4\u5b58\u5668\u4e2d\u7684 <code>PRTWI</code> \u4f4d\u5fc5\u987b\u8bbe\u4e3a0\u3002</p> <p>\u6570\u636e\u4f4d\u4f20\u8f93\uff1a</p> <p></p> <p>\u5f00\u59cb\u548c\u505c\u6b62\u6761\u4ef6\uff1a</p> <p></p> <p>\u5730\u5740\u5e27\u683c\u5f0f\uff1a</p> <p></p> <p>\u6570\u636e\u5e27\u683c\u5f0f\uff1a</p> <p></p> <p>\u5b8c\u6574\u7684\u4f20\u8f93\u8fc7\u7a0b\uff1a</p> <p></p> <p>\u666e\u901a\u6a21\u5f0f\u65f6\u949f\u9891\u7387\uff1a</p> \\[f_{SCL} = \\frac{clk_{I/O}}{16 + (2 \\times TWBR \\times TWPS)}\\] <p>\u9ad8\u901f\u6a21\u5f0f\u65f6\u949f\u9891\u7387\uff1a</p> \\[f_{SCL} = \\frac{clk_{TWIHS}}{16 + (2 \\times TWBR \\times TWPS)}\\] <p>\u5176\u4e2d\uff0c \\(clk_{I/O}\\) \u4e3a\u5206\u9891\u540e\u7684\u7cfb\u7edf\u65f6\u949f\uff0c \\(clk_{TWIHS}\\) \u4e3a\u7cfb\u7edf\u65f6\u949f\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3b\u673a\u6a21\u5f0f\u4e0b\uff0c <code>TWBR</code> \u503c\u4e0d\u80fd\u4f4e\u4e8e10\u3002</p> <p>\u4e0b\u56fe\u5c55\u73b0\u4e86\u4e00\u4e2a\u5178\u578b\u4f20\u8f93\u8fc7\u7a0b\u4e2d\uff0c\u5e94\u7528\u7a0b\u5e8f\u5982\u4f55\u4e0eTWI\u6a21\u5757\u4ea4\u4e92\u7684\u3002</p> <p></p> <p>ATtiny88\u7684TWI\u62e5\u6709\u56db\u79cd\u6a21\u5f0f\uff1aMaster Transmitter\u3001Master Receiver\u3001Slave Transmitter\u3001Slave Receiver\u3002</p> <p>Master Transmitter\u6a21\u5f0f\u4e0b\u7684\u72b6\u6001\u7801\uff1a</p> <p></p> <p></p> <p>Master Receiver\u6a21\u5f0f\u4e0b\u7684\u72b6\u6001\u7801\uff1a</p> <p></p> <p></p> <p>Slave Receiver\u6a21\u5f0f\u4e0b\u7684\u72b6\u6001\u7801\uff1a</p> <p></p> <p></p> <p>Slave Transmitter\u6a21\u5f0f\u4e0b\u7684\u72b6\u6001\u7801\uff1a</p> <p></p> <p></p> <p>\u5176\u4ed6\u72b6\u6001\u7801\uff1a</p> <p></p> <p>\u591a\u4e3b\u673a\u4ef2\u88c1\u8fc7\u7a0b\u53ca\u72b6\u6001\u7801\uff1a</p> <p></p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9ATWI/#_1","title":"\u5bc4\u5b58\u5668","text":"<ul> <li><code>TWBR[7:0]</code> \uff1a\u5206\u9891\u7cfb\u6570\uff0c\u5728\u4e3b\u673a\u6a21\u5f0f\u4e0b\u4e0d\u80fd\u4f4e\u4e8e10\u3002</li> </ul> <ul> <li><code>TWINT</code> \uff1aTWI\u4e2d\u65ad\u6807\u5fd7\uff0c\u5fc5\u987b\u51991\u6e05\u9664\uff08\u4e0d\u4f1a\u6267\u884c\u5b8c\u4e2d\u65ad\u81ea\u52a8\u6e05\u9664\uff09\uff0c\u5728\u6e05\u9664\u524d\uff0c\u5fc5\u987b\u5b8c\u6210\u5bf9 <code>TWAR</code> \u5bc4\u5b58\u5668\u3001 <code>TWSR</code> \u5bc4\u5b58\u5668\u3001 <code>TWDR</code> \u5bc4\u5b58\u5668\u7684\u64cd\u4f5c\u3002 <code>TWINT</code> \u7f6e\u4f4d\u671f\u95f4\uff0cSCL\u7ebf\u59cb\u7ec8\u4fdd\u6301\u4f4e\u7535\u5e73\u3002</li> <li><code>TWEA</code> \uff1a\u51991\u4f7f\u80fd\u5e94\u7b54\u3002</li> <li><code>TWSTA</code> \uff1a\u51991\u4ea7\u751fSTART\u4fe1\u53f7\uff0c\u5728START\u4fe1\u53f7\u4f20\u8f93\u5b8c\u6210\u540e\u5fc5\u987b\u624b\u52a8\u6e05\u9664\u8be5\u4f4d\u3002</li> <li><code>TWSTO</code> \uff1a\u51991\u4ea7\u751fSTOP\u4fe1\u53f7\uff0c\u8be5\u4f4d\u4f1a\u81ea\u52a8\u6e05\u9664\u3002\u4ece\u673a\u72b6\u6001\u4e0b\uff0c\u8bbe\u7f6e\u8be5\u4f4d\u53ef\u4ee5\u4ece\u9519\u8bef\u72b6\u6001\u4e2d\u6062\u590d\u3002</li> <li><code>TWWC</code> \uff1a\u5199\u51b2\u7a81\u6807\u5fd7\uff0c\u5728 <code>TWINT</code> \u4f4d\u4e3a1\u65f6\u5199 <code>TWDR</code> \u5bc4\u5b58\u5668\u6e05\u9664\u3002</li> <li><code>TWEN</code> \uff1a\u51991\u4f7f\u80fdTWI\u6a21\u5757\u3002</li> <li><code>TWIE</code> \uff1a\u51991\u4f7f\u80fdTWI\u4e2d\u65ad\u3002</li> </ul> <ul> <li><code>TWS</code> \uff1aTWI\u72b6\u6001\u7801\u3002</li> <li><code>TWPS</code> \uff1aTWI\u5206\u9891\u3002     </li> </ul> <ul> <li><code>TWA[6:0]</code> \uff1aTWI\u4ece\u673a\u5730\u5740\u3002</li> <li><code>TWGCE</code> \uff1a\u51991\u4f7f\u80fdGeneral Call\u3002</li> </ul> <ul> <li><code>TWAM[6:0]</code> \uff1aTWI\u5730\u5740\u63a9\u7801\uff0c\u8bbe\u4e3a1\u5c06\u5ffd\u7565\u5bf9\u5e94\u4f4d\u7684\u5339\u914d\u3002     </li> </ul> <ul> <li><code>TWHS</code> \uff1a\u51991\u4f7f\u80fdTWI\u9ad8\u901f\u6a21\u5f0f\u3002</li> </ul>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9ATWI/#_2","title":"\u4ee3\u7801","text":"<p>\u4e0b\u9762\u7684\u4ee3\u7801\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528ATtiny88\u7684TWI\u6a21\u5757\u4e0eSSD1306 OLED\u8fdb\u884c\u901a\u4fe1\u5237\u5c4f\u3002</p> <p>\u6e90\u6587\u4ef6\u7684\u7ec4\u7ec7\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 inc\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 serial.h\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 serial_stdio.h\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 main.c\n    \u251c\u2500\u2500 serial.c\n    \u2514\u2500\u2500 serial_stdio.c\n</code></pre> <p><code>src/main.c</code> \u6e90\u6587\u4ef6\u7684\u5185\u5bb9\u5982\u4e0b\uff1a</p> src/main.c<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;avr/io.h&gt;\n#include &lt;avr/interrupt.h&gt;\n#include &lt;serial_stdio.h&gt;\n#define OLED_ADDR   0x3C\n#define oled_write_command(cmd) oled_write_byte(0, cmd)\n#define oled_write_data(data)   oled_write_byte(1, data)\nstatic void oled_setup(void);\nstatic void oled_write_byte(uint8_t dc, uint8_t data);\nstatic void oled_fill(uint8_t color);\nint main(void)\n{\ncli();\nstdio_setup();          // initialize stdio and redirect it to serial\noled_setup();           // initialize oled\nsei();\nstatic const uint8_t colors[] = {\n0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40,\n0x80, 0x40, 0x20, 0x10, 0x08, 0x04, 0x02\n};\nuint8_t i = 0;\nfor (;;) {\noled_fill(colors[i]);\ni = (i + 1) % sizeof(colors);\n}\n}\nstatic void oled_setup(void)\n{\nstatic const uint8_t cmds[] = {\n0xAE, 0xD5, 0x80, 0xA8, 0x3F,\n0xD3, 0x00, 0x40, 0x8D, 0x14,\n0x20, 0x00, 0xA1, 0xC8, 0xDA,\n0x12, 0x81, 0xEF, 0xD9, 0xF1,\n0xDB, 0x30, 0xA4, 0xA6, 0xAF\n};\nTWSR = 0x00;            // TWPS = 1\nTWBR = 12;              // TWBR = 12, freq = 16MHz / (16 + 2 * 12 * 1) = 400KHz\nTWHSR = 0x00;           // disable high speed mode\nfor (uint8_t i = 0; i &lt; sizeof(cmds); i++) {\noled_write_command(cmds[i]);\n}\noled_fill(0x00);\n}\nstatic void oled_write_byte(uint8_t dc, uint8_t data)\n{\n// transmit START condition\nTWCR = _BV(TWINT) | _BV(TWSTA) | _BV(TWEN);\nwhile (!(TWCR &amp; _BV(TWINT)));\n// transmit SLA+W\nTWDR = OLED_ADDR &lt;&lt; 1;\nTWCR = _BV(TWINT) | _BV(TWEN);\nwhile (!(TWCR &amp; _BV(TWINT)));\n// transmit control byte\nTWDR = dc ? 0x40 : 0x00;\nTWCR = _BV(TWINT) | _BV(TWEN);\nwhile (!(TWCR &amp; _BV(TWINT)));\n// transmit data byte\nTWDR = data;\nTWCR = _BV(TWINT) | _BV(TWEN);\nwhile (!(TWCR &amp; _BV(TWINT)));\n// transmit STOP condition\nTWCR = _BV(TWINT) | _BV(TWSTO) | _BV(TWEN);\n// Note that TWINT is NOT set after a STOP condition has been transmitted\n}\nstatic void oled_fill(uint8_t color)\n{\noled_write_command(0x21);\noled_write_command(0x00);\noled_write_command(0x7F);\noled_write_command(0x22);\noled_write_command(0x00);\noled_write_command(0x07);\nfor (uint8_t i = 0; i &lt; 128; i++) {\nfor (uint8_t j = 0; j &lt; 8; j++) {\noled_write_data(color);\n}\n}\n}\n</code></pre>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9ATWI/#_3","title":"\u53c2\u8003\u8d44\u6599","text":"<ol> <li>ATtiny88 Datasheet</li> </ol>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E4%B8%B2%E5%8F%A3/","title":"ATtiny88\u521d\u4f53\u9a8c\uff08\u4e09\uff09\uff1a\u4e32\u53e3","text":"<p>ATtiny88\u5355\u7247\u673a\u4e0d\u5305\u542b\u4e32\u53e3\u6a21\u5757\uff0c\u56e0\u6b64\u53ea\u80fd\u4f7f\u7528\u8f6f\u4ef6\u65b9\u5f0f\u6a21\u62df\u4e32\u53e3\u65f6\u5e8f\u3002</p> <p></p> <p>\u4e32\u53e3\u901a\u4fe1\u65f6\u5e8f\u901a\u5e38\u7531\u8d77\u59cb\u4f4d\u3001\u6570\u636e\u4f4d\u3001\u6821\u9a8c\u4f4d\u548c\u505c\u6b62\u4f4d\u56db\u4e2a\u90e8\u5206\u7ec4\u6210\uff0c\u5e38\u89c1\u7684\u914d\u7f6e\u4e3a1\u4f4d\u8d77\u59cb\u4f4d\u30018\u4f4d\u6570\u636e\u4f4d\u3001\u65e0\u6821\u9a8c\u4f4d\u548c1\u4f4d\u505c\u6b62\u4f4d\u3002</p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E4%B8%B2%E5%8F%A3/#_1","title":"\u6a21\u62df\u4e32\u53e3\u53d1\u9001\u65f6\u5e8f","text":"<ol> <li>\u8bbe\u7f6eTX\u5f15\u811a\u4e3a\u8f93\u51fa\u6a21\u5f0f\uff0c\u521d\u59cb\u7535\u5e73\u72b6\u6001\u4e3a\u9ad8\u7535\u5e73\u3002</li> <li>\u8bbe\u7f6e\u5b9a\u65f6\u5668\u5468\u671f\uff0c\u4ee59600\u6ce2\u7279\u7387\u4e3a\u4f8b\uff0c\u5c06\u5b9a\u65f6\u5668\u5468\u671f\u8bbe\u4e3a \\(\\frac{1s}{9600} \\approx 104us\\) \u3002</li> <li>TX\u5f15\u811a\u8f93\u51fa\u4f4e\u7535\u5e73\uff08\u8d77\u59cb\u4f4d\uff09\uff0c\u540c\u65f6\u5f00\u542f\u5b9a\u65f6\u5668\u3002</li> <li>\u4e4b\u540e\u76848\u6b21\u5b9a\u65f6\u5668\u4e2d\u65ad\uff0c\u6bcf\u6b21\u8f93\u51fa1\u4f4d\u6570\u636e\uff0c\u4ece\u4f4e\u4f4d\u5f00\u59cb\u3002</li> <li>\u7b2c9\u6b21\u5b9a\u65f6\u5668\u4e2d\u65ad\uff0cTX\u5f15\u811a\u8f93\u51fa\u9ad8\u7535\u5e73\uff08\u505c\u6b62\u4f4d\uff09\u3002</li> <li>\u7b2c10\u6b21\u5b9a\u65f6\u5668\u4e2d\u65ad\uff0c\u5173\u95ed\u5b9a\u65f6\u5668\u3002</li> </ol>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E4%B8%B2%E5%8F%A3/#_2","title":"\u6a21\u62df\u4e32\u53e3\u63a5\u6536\u65f6\u5e8f","text":"<ol> <li>\u8bbe\u7f6eRX\u5f15\u811a\u4e3a\u8f93\u5165\u6a21\u5f0f\uff0c\u4f7f\u80fd\u4e0a\u62c9\u7535\u963b\uff0c\u5f00\u542f\u4e0b\u964d\u6cbf\u4e2d\u65ad\u3002</li> <li>\u5f53\u63a5\u6536\u5230\u8d77\u59cb\u4f4d\u65f6\uff0c\u89e6\u53d1\u4e0b\u964d\u6cbf\u4e2d\u65ad\uff0c\u8bbe\u7f6e\u5b9a\u65f6\u5668\u5468\u671f\u4e3a \\(\\frac{1s}{9600} \\times \\frac{1}{6} \\approx 17us\\) \uff0c\u5f00\u542f\u5b9a\u65f6\u5668\u3002</li> <li>\u4e4b\u540e\u768430\u6b21\u5b9a\u65f6\u5668\u4e2d\u65ad\uff0c\u5bf9RX\u5f15\u811a\u7684\u7535\u5e73\u72b6\u6001\u8fdb\u884c\u8ba1\u6570\uff08\u8d77\u59cb\u4f4d\uff09\u3002</li> <li>\u7b2c1\u6b21\u5b9a\u65f6\u5668\u4e2d\u65ad\uff0c\u5c06\u5b9a\u65f6\u5668\u5468\u671f\u91cd\u8bbe\u4e3a \\(\\frac{1s}{9600} \\times \\frac{1}{3} \\approx 35us\\) \u3002</li> <li>\u7b2c3\u6b21\u5b9a\u65f6\u5668\u4e2d\u65ad\uff0c\u5982\u679c\u9ad8\u7535\u5e73\u6570\u91cf\u5927\u4e8e\u4f4e\u7535\u5e73\u6570\u91cf\uff0c\u5219\u8868\u793a\u8d77\u59cb\u4f4d\u63a5\u6536\u5931\u8d25\uff0c\u76f4\u63a5\u5173\u95ed\u5b9a\u65f6\u5668\uff0c\u5e76\u5f00\u542f\u4e0b\u964d\u6cbf\u4e2d\u65ad\u3002</li> <li>\u7b2c6/9/.../24/27\u6b21\u5b9a\u65f6\u5668\u4e2d\u65ad\uff0c\u5224\u65ad\u9ad8\u7535\u5e73\u548c\u4f4e\u7535\u5e73\u7684\u6570\u91cf\uff0c\u9009\u53d6\u6570\u91cf\u591a\u7684\u90a3\u4e2a\u7535\u5e73\u4f5c\u4e3a\u6570\u636e\u4f4d\uff0c\u4ece\u4f4e\u4f4d\u5f00\u59cb\u586b\u5145\u3002</li> <li>\u7b2c30\u6b21\u5b9a\u65f6\u5668\u4e2d\u65ad\uff0c\u5173\u95ed\u5b9a\u65f6\u5668\u4e2d\u65ad\uff0c\u5f00\u542f\u4e0b\u964d\u6cbf\u4e2d\u65ad\uff0c\u5982\u679c\u9ad8\u7535\u5e73\u6570\u91cf\u5927\u4e8e\u4f4e\u7535\u5e73\u6570\u91cf\uff0c\u5219\u8868\u793a\u6210\u529f\u63a5\u6536\u5230\u505c\u6b62\u4f4d\uff0c\u6570\u636e\u6709\u6548\u3002</li> </ol>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E4%B8%B2%E5%8F%A3/#_3","title":"\u5916\u90e8\u4e2d\u65ad","text":"<p>ATtiny88\u67098\u4e2a\u5916\u90e8\u4e2d\u65ad\u6e90\uff1aINT0\u3001INT1\u3001PCI0\u3001PCI1\u3001PCI2\u3001PCI3\u3002\u5176\u4e2dINT0/1\u652f\u6301\u4f4e\u7535\u5e73/\u4e0b\u964d\u6cbf/\u4e0a\u5347\u6cbf\u89e6\u53d1\uff0cPCI0/1/2/3\u5728\u5f15\u811a\u72b6\u6001\u6539\u53d8\u65f6\u89e6\u53d1\u3002</p> <p>ATtiny88\u5916\u90e8\u4e2d\u65ad\u548c\u5f15\u811a\u7684\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff1a</p> \u4e2d\u65ad\u6e90 \u5f15\u811a INT0 PD2 INT1 PD3 PCI0 PB[0:7] -&gt; PCINT[0:7] PCI1 PC[0:7] -&gt; PCINT[8:15] PCI2 PD[0:7] -&gt; PCINT[16:23] PCI3 PA[0:3] -&gt; PCINT[24:27] <p>\u6ce8\u610f\uff1a\u5373\u4f7f\u5f15\u811a\u914d\u7f6e\u4e3a\u8f93\u51fa\u6a21\u5f0f\uff0c\u4e5f\u80fd\u89e6\u53d1\u76f8\u5e94\u7684\u4e2d\u65ad\u3002</p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E4%B8%B2%E5%8F%A3/#_4","title":"\u5bc4\u5b58\u5668","text":"<ul> <li><code>ISC1[1:0]</code> \uff1a\u8bbe\u7f6eINT1\u4e2d\u65ad\u89e6\u53d1\u65b9\u5f0f\u3002     </li> <li><code>ISC0[1:0]</code> \uff1a\u8bbe\u7f6eINT0\u4e2d\u65ad\u89e6\u53d1\u65b9\u5f0f\uff0c\u53d6\u503c\u540c <code>ISC1[1:0]</code> \u3002</li> </ul> <ul> <li><code>INT1</code> \uff1a\u8bbe\u4e3a1\u4f7f\u80fdINT1\u4e2d\u65ad\u3002</li> <li><code>INT0</code> \uff1a\u8bbe\u4e3a1\u4f7f\u80fdINT0\u4e2d\u65ad\u3002</li> </ul> <ul> <li><code>INTF1</code> \uff1aINT1\u4e2d\u65ad\u6807\u5fd7\u4f4d\uff0c\u6267\u884c\u4e2d\u65ad\u51fd\u6570\u65f6\u81ea\u52a8\u6e05\u96f6\uff0c\u4e5f\u53ef\u4ee5\u51991\u6e05\u96f6\u3002</li> <li><code>INTF0</code> \uff1aINT0\u4e2d\u65ad\u6807\u5fd7\u4f4d\uff0c\u6267\u884c\u4e2d\u65ad\u51fd\u6570\u65f6\u81ea\u52a8\u6e05\u96f6\uff0c\u4e5f\u53ef\u4ee5\u51991\u6e05\u96f6\u3002</li> </ul> <ul> <li><code>PCIE3</code> \uff1a\u8bbe\u4e3a1\u4f7f\u80fdPCI3\uff08PCINT[27:24]\uff09\u4e2d\u65ad\u3002</li> <li><code>PCIE2</code> \uff1a\u8bbe\u4e3a1\u4f7f\u80fdPCI2\uff08PCINT[23:16]\uff09\u4e2d\u65ad\u3002</li> <li><code>PCIE1</code> \uff1a\u8bbe\u4e3a1\u4f7f\u80fdPCI1\uff08PCINT[15:8]\uff09\u4e2d\u65ad\u3002</li> <li><code>PCIE0</code> \uff1a\u8bbe\u4e3a1\u4f7f\u80fdPCI0\uff08PCINT[7:0]\uff09\u4e2d\u65ad\u3002</li> </ul> <ul> <li><code>PCIF3</code> \uff1aPCI3\uff08PCINT[27:24]\uff09\u4e2d\u65ad\u6807\u5fd7\u4f4d\uff0c\u6267\u884c\u4e2d\u65ad\u51fd\u6570\u65f6\u81ea\u52a8\u6e05\u96f6\uff0c\u4e5f\u53ef\u4ee5\u51991\u6e05\u96f6\u3002</li> <li><code>PCIF2</code> \uff1aPCI2\uff08PCINT[23:16]\uff09\u4e2d\u65ad\u6807\u5fd7\u4f4d\uff0c\u6267\u884c\u4e2d\u65ad\u51fd\u6570\u65f6\u81ea\u52a8\u6e05\u96f6\uff0c\u4e5f\u53ef\u4ee5\u51991\u6e05\u96f6\u3002</li> <li><code>PCIF1</code> \uff1aPCI1\uff08PCINT[15:8]\uff09\u4e2d\u65ad\u6807\u5fd7\u4f4d\uff0c\u6267\u884c\u4e2d\u65ad\u51fd\u6570\u65f6\u81ea\u52a8\u6e05\u96f6\uff0c\u4e5f\u53ef\u4ee5\u51991\u6e05\u96f6\u3002</li> <li><code>PCIF0</code> \uff1aPCI0\uff08PCINT[7:0]\uff09\u4e2d\u65ad\u6807\u5fd7\u4f4d\uff0c\u6267\u884c\u4e2d\u65ad\u51fd\u6570\u65f6\u81ea\u52a8\u6e05\u96f6\uff0c\u4e5f\u53ef\u4ee5\u51991\u6e05\u96f6\u3002</li> </ul> <ul> <li><code>PCINTx</code> \uff1a\u8bbe\u4e3a1\u4f7f\u80fdPCINTx\u4e2d\u65ad\u3002</li> </ul>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E4%B8%B2%E5%8F%A3/#_5","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<p>\u4ee3\u7801\u6587\u4ef6\u7684\u6574\u4f53\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 inc\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 serial.h\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 main.c\n    \u2514\u2500\u2500 serial.c\n</code></pre> <p><code>inc/serial.h</code> \u5934\u6587\u4ef6\u7684\u4ee3\u7801\u5185\u5bb9\u5982\u4e0b\uff1a</p> inc/serial.h<pre><code>#pragma once\n#include &lt;stdint.h&gt;\n#define UART    (&amp;serial)\ntypedef struct {\nconst uint8_t *cfg;\nuint8_t flag;\nuint8_t tx_idx;\nuint8_t tx_temp;\nuint8_t tx_data;\nuint8_t rx_idx;\nuint8_t rx_temp;\nuint8_t rx_data;\nuint8_t rx_cnt;\n} serial_t;\ntypedef enum {\nSERIAL_BR_1200 = 0,\nSERIAL_BR_2400,\nSERIAL_BR_4800,\nSERIAL_BR_9600,\nSERIAL_BR_19200,\nSERIAL_BR_38400,\nSERIAL_BR_57600,\nSERIAL_BR_115200\n} serial_baudrate_t;\ntypedef enum {\nSERIAL_FLAG_TXE = 0x01,\nSERIAL_FLAG_RXNE = 0x02\n} serial_flag_t;\nextern serial_t serial;\nvoid serial_setup(serial_t *serial, serial_baudrate_t br);\nuint8_t serial_get_flag(serial_t *serial, serial_flag_t flag);\nvoid serial_send_data(serial_t *serial, uint8_t data);\nuint8_t serial_receive_data(serial_t *serial);\n</code></pre> <p><code>src/serial.c</code> \u6e90\u6587\u4ef6\u7684\u4ee3\u7801\u5185\u5bb9\u5982\u4e0b\uff0c\u5176\u4e2d\u5c06PD1\u5f15\u811a\u5b9a\u4e49\u4e3aTX\uff0c\u5c06PD2\u5f15\u811a\u5b9a\u4e49\u4e3aRX\uff1a</p> src/serial.c<pre><code>#include &lt;serial.h&gt;\n#include &lt;avr/io.h&gt;\n#include &lt;avr/interrupt.h&gt;\nserial_t serial;\nstatic const uint8_t serial_cfg[] = {\n0x03, 208, 35, 69,  // 1200\n0x03, 104, 17, 35,  // 2400\n0x03, 52, 9, 17,    // 4800\n0x02, 208, 35, 69,  // 9600\n0x02, 104, 17, 35,  // 19200\n0x02, 52, 9, 17,    // 38400\n0x02, 35, 6, 12,    // 57600\n0x01, 139, 23, 46,  // 115200\n};\nvoid serial_setup(serial_t *serial, serial_baudrate_t br)\n{\nserial-&gt;cfg = &amp;serial_cfg[br * 4];\nserial-&gt;flag = SERIAL_FLAG_TXE;         // initial value for serial-&gt;flag\n// setup tx pin\nPORTD |= _BV(PORTD1);                   // PD1 outputs high level\nDDRD |= _BV(DDD1);                      // set PD1 as output\n// setup rx pin\nPORTD |= _BV(PORTD2);                   // enable PD2 pull-up resistance\nDDRD &amp;= ~_BV(DDD2);                     // set PD2 as input\n// setup INT0\nEICRA &amp;= ~(_BV(ISC01) | _BV(ISC00));\nEICRA |= _BV(ISC01);                    // the falling edge of INT0 generates an interrupt request\nEIFR = _BV(INTF0);                      // clear INT0 interrupt flag\nEIMSK |= _BV(INT0);                     // enable INT0 interrupt\n// setup TIMER0\nTCNT0 = 0;                              // clear counter\nTIMSK0 = 0;                             // disable all interrupts of TIMER0\nTIFR0 = _BV(OCF0B) | _BV(OCF0A);        // clear TIMER0_COMPA &amp; TIMER0_COMPB interrupt flags\nTCCR0A = serial-&gt;cfg[0];                // set mode &amp; prescaler of TIMER0\n}\nuint8_t serial_get_flag(serial_t *serial, serial_flag_t flag)\n{\nreturn serial-&gt;flag &amp; flag;\n}\nvoid serial_send_data(serial_t *serial, uint8_t data)\n{\nserial-&gt;flag &amp;= ~SERIAL_FLAG_TXE;       // clear TXE flag\nserial-&gt;tx_data = data;                 // store the data to transmit\nserial-&gt;tx_temp = data;\nserial-&gt;tx_idx = 0;                     // reset index of transmission\nOCR0A = TCNT0 + serial-&gt;cfg[1] - 1;     // set period of TIMER0_COMPA\nPORTD &amp;= ~_BV(PORTD1);                  // PD1 outputs low level\nTIFR0 = _BV(OCF0A);                     // clear TIMER0_COMPA interrupt flag\nTIMSK0 |= _BV(OCIE0A);                  // enable TIMER0_COMPA interrupt\n}\nuint8_t serial_receive_data(serial_t *serial)\n{\nuint8_t data = serial-&gt;rx_data;         // read the data received\nserial-&gt;flag &amp;= ~SERIAL_FLAG_RXNE;      // clear RXNE flag\nreturn data;\n}\nstatic inline void serial_tx_timer_isr(serial_t *serial)\n{\nif (serial-&gt;tx_idx &lt; 8) {               // send databits\nif (serial-&gt;tx_temp &amp; 0x01) {       // output the lowest bit\nPORTD |= _BV(PORTD1);\n} else {\nPORTD &amp;= ~_BV(PORTD1);\n}\nserial-&gt;tx_temp &gt;&gt;= 1;\n} else if (serial-&gt;tx_idx == 8) {       // send stopbit\nPORTD |= _BV(PORTD1);\n} else {                                // end of transmission\nserial-&gt;flag |= SERIAL_FLAG_TXE;    // set TXE flag\nTIMSK0 &amp;= ~_BV(OCIE0A);             // disable TIMER0_COMPA interrupt\n}\nOCR0A += serial-&gt;cfg[1];                // set time of the next interrupt\nserial-&gt;tx_idx++;                       // update index of transmission\n}\nstatic inline void serial_rx_int_isr(serial_t *serial)\n{\nOCR0B = TCNT0 + serial-&gt;cfg[2] - 1;     // set time of the first TIMER0_COMPB interrupt\nEIMSK &amp;= ~_BV(INT0);                    // disable INT0 interrupt\nTIFR0 = _BV(OCF0B);                     // clear TIMER0_COMPB interrupt flag\nTIMSK0 |= _BV(OCIE0B);                  // enable TIMER0_COMPB interrupt\nserial-&gt;rx_idx = 0;                     // reset index of reception\nserial-&gt;rx_cnt = 0;                     // clear counter of 0/1\n}\nstatic inline void serial_rx_timer_isr(serial_t *serial)\n{\nserial-&gt;rx_cnt += PIND &amp; _BV(PIND2) ? 0x10 : 0x01;  // count 0/1\nif (serial-&gt;rx_idx == 2) {              // receive startbit\nif (serial-&gt;rx_cnt &gt; 0x20) {        // if startbit is '1'\nTIMSK0 &amp;= ~_BV(OCIE0B);         // disable TIMER0_COMPB interrupt\nEIFR = _BV(INTF0);              // clear INT0 interrupt flag\nEIMSK |= _BV(INT0);             // enable INT0 interrupt flag\n}\nserial-&gt;rx_cnt = 0;                 // reset counter of 0/1\n} else if (serial-&gt;rx_idx == 29) {      // receive stopbit\nif (serial-&gt;rx_cnt &gt; 0x20) {        // if stopbit is '1'\nserial-&gt;rx_data = serial-&gt;rx_temp;  // the data received is valid, store it to serial-&gt;rx_data\nserial-&gt;flag |= SERIAL_FLAG_RXNE;   // set RXNE flag\n}\nTIMSK0 &amp;= ~_BV(OCIE0B);             // disable TIMER0_COMPB interrupt\nEIFR = _BV(INTF0);                  // clear INT0 interrupt flag\nEIMSK |= _BV(INT0);                 // clear INT0 interrupt flag\n} else if (serial-&gt;rx_idx % 3 == 2) {   // receive databits\nserial-&gt;rx_temp &gt;&gt;= 1;\nif (serial-&gt;rx_cnt &gt; 0x20) {\nserial-&gt;rx_temp |= 0x80;\n}\nserial-&gt;rx_cnt = 0;                 // reset counter of 0/1\n}\nOCR0B += serial-&gt;cfg[3];                // set time of the next interrupt\nserial-&gt;rx_idx++;                       // update index of reception\n}\nISR(TIMER0_COMPA_vect)\n{\nuint8_t sreg = SREG;\nserial_tx_timer_isr(UART);\nSREG = sreg;\n}\nISR(INT0_vect)\n{\nuint8_t sreg = SREG;\nserial_rx_int_isr(UART);\nSREG = sreg;\n}\nISR(TIMER0_COMPB_vect)\n{\nuint8_t sreg = SREG;\nserial_rx_timer_isr(UART);\nSREG = sreg;\n}\n</code></pre> <p>\u6ce8\u610f\uff1a\u5b9e\u6d4b115200\u4ee5\u4e0b\uff08\u542b\uff09\u7684\u6ce2\u7279\u7387\u53d1\u9001\u90fd\u6b63\u5e38\uff0c\u4f46\u662f9600\u4ee5\u4e0a\uff08\u4e0d\u542b\uff09\u7684\u6ce2\u7279\u7387\u63a5\u6536\u4e0d\u6b63\u5e38\uff0c\u5efa\u8bae\u65e5\u5e38\u4f7f\u75289600\u6ce2\u7279\u7387\u3002</p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E4%B8%B2%E5%8F%A3/#stdio","title":"\u91cd\u5b9a\u5411stdio\u5230\u4e32\u53e3","text":"<p>\u4e3a\u4e86\u66f4\u65b9\u4fbf\u7684\u4f7f\u7528\u4e32\u53e3\uff0c\u53ef\u4ee5\u5c06\u6807\u51c6\u8f93\u5165\u8f93\u51fa\u91cd\u5b9a\u5411\u5230\u4e32\u53e3\uff0c\u5728AVR GCC\u4e2d\u7684\u505a\u6cd5\u5982\u4e0b\uff1a</p> <ol> <li>\u5b9a\u4e49\u8f93\u5165\u548c\u8f93\u51fa\u7684\u63a5\u53e3\u51fd\u6570\uff0c\u539f\u578b\u5982\u4e0b\uff1a     <pre><code>int putc(char c, FILE *stream);\nint getc(FILE *stream);\n</code></pre></li> <li>\u4f7f\u7528 <code>FDEV_SETUP_STREAM</code> \u521b\u5efa\u4e00\u4e2astream\u3002     <pre><code>FILE s = FDEV_SETUP_STREAM(putc, getc, flag)\n</code></pre></li> <li>\u5c06\u4e0a\u9762\u521b\u5efa\u7684stream\u66ff\u6362\u6389 <code>stdout</code> / <code>stdin</code> \u3002     <pre><code>stdout = stdin = &amp;s;\n</code></pre></li> </ol>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E4%B8%B2%E5%8F%A3/#_6","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<p><code>src/main.c</code> \u6e90\u6587\u4ef6\u7684\u4ee3\u7801\u5185\u5bb9\u5982\u4e0b\uff1a</p> src/main.c<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;avr/io.h&gt;\n#include &lt;avr/interrupt.h&gt;\n#include &lt;serial.h&gt;\nstatic void stdio_setup(void);\nint main(void)\n{\ncli();\nstdio_setup();\nsei();\nprintf(\"Hello, ATtiny88!\\r\\n\");\nfor (;;) {\nputchar(getchar());\n}\n}\nstatic int serial_putchar(char c, FILE *stream)\n{\nwhile (!serial_get_flag(UART, SERIAL_FLAG_TXE));\nserial_send_data(UART, c);\nreturn 0;\n}\nstatic int serial_getchar(FILE *stream)\n{\nwhile (!serial_get_flag(UART, SERIAL_FLAG_RXNE));\nreturn serial_receive_data(UART);\n}\nstatic void stdio_setup(void)\n{\nstatic FILE f = FDEV_SETUP_STREAM(serial_putchar, serial_getchar, _FDEV_SETUP_RW);\nserial_setup(UART, SERIAL_BR_9600);\nstdout = &amp;f;\nstdin = &amp;f;\n}\n</code></pre>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E4%B8%B2%E5%8F%A3/#_7","title":"\u53c2\u8003\u8d44\u6599","text":"<ol> <li>avr-libc: Standard IO facilities</li> <li>ATtiny88 Datasheet</li> </ol>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E5%91%BC%E5%90%B8%E7%81%AF/","title":"ATtiny88\u521d\u4f53\u9a8c\uff08\u4e8c\uff09\uff1a\u547c\u5438\u706f","text":"<p>\u524d\u9762\u7684\u201c\u70b9\u706f\u201d\u5b9e\u9a8c\u5b9e\u73b0\u4e86\u95f4\u9694\u70b9\u4eae/\u7184\u706dLED\uff0c\u4f46\u662f\u95f4\u9694\u65f6\u95f4\u548c\u4eae\u5ea6\u90fd\u6ca1\u6cd5\u63a7\u5236\uff0c\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528ATtiny88\u7684\u5b9a\u65f6\u5668\u6a21\u5757\u3002</p> <p>ATtiny88\u5355\u7247\u673a\u542b\u67092\u4e2a\u5b9a\u65f6\u5668\uff0c\u5b9a\u65f6\u56680\u662f8bit\u7684\uff0c\u5b9a\u65f6\u56681\u662f16bit\u7684\uff0c\u5176\u4e2d\u5b9a\u65f6\u56681\u652f\u6301PWM\u529f\u80fd\u3002\u67e5\u8be2\u624b\u518c\u5f97\u77e5\uff0c\u5b9a\u65f6\u56681\u7684\u4e24\u4e2a\u901a\u9053\u7684\u8f93\u51fa\u811a\u4e3aPB1\u548cPB2\uff0c\u800cMH-ET LIVE Tiny88\u6838\u5fc3\u677f\u7684LED\u8fde\u63a5\u7684\u662fPD0\u811a\uff0c\u56e0\u6b64\u65e0\u6cd5\u5229\u7528\u5b9a\u65f6\u56681\u7684PWM\u529f\u80fd\u63a7\u5236\u677f\u8f7dLED\u3002\u8fd9\u91cc\u4ecb\u7ecd\u57fa\u4e8e\u5b9a\u65f6\u56680\uff0c\u901a\u8fc7\u8f6f\u4ef6\u6a21\u62dfPWM\u63a7\u5236\u677f\u8f7dLED\u7684\u65b9\u6cd5\u3002</p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E5%91%BC%E5%90%B8%E7%81%AF/#0","title":"\u5b9a\u65f6\u56680\u4ecb\u7ecd","text":"<p>ATtiny88\u7684\u5b9a\u65f6\u56680\u662f\u4e00\u4e2a8bit\u7684\u5b9a\u65f6\u5668\uff0c\u62e5\u6709\u4e24\u4e2a\u72ec\u7acb\u7684\u8f93\u51fa\u6bd4\u8f83\u5355\u5143\uff0c\u652f\u6301CTC\u6a21\u5f0f\uff0c\u62e5\u6709\u4e09\u4e2a\u72ec\u7acb\u7684\u4e2d\u65ad\u6e90\uff08TOV0\uff0cOCF0A\uff0cOCF0B\uff09\u3002</p> <p>\u5b9a\u65f6\u56680\u7684\u65f6\u949f\u6e90\u53ef\u4ee5\u662f\u7531\u5185\u90e8\u65f6\u949f\u6e90\u5206\u9891\u800c\u6765\uff0c\u4e5f\u53ef\u4ee5\u662f\u6765\u81eaT0\uff08PD4\uff09\u5f15\u811a\u7684\u5916\u90e8\u65f6\u949f\u6e90\u3002</p> <p></p> <p>\u6ce8\u610f\uff1a\u5728\u4f7f\u7528\u5b9a\u65f6\u56680\u65f6\uff0c\u52a1\u5fc5\u786e\u4fdd <code>PRR</code> \u5bc4\u5b58\u5668\u4e2d\u7684 <code>PRTIM0</code> \u4f4d\u503c\u4e3a0\u3002</p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E5%91%BC%E5%90%B8%E7%81%AF/#_1","title":"\u666e\u901a\u6a21\u5f0f","text":"<p>\u5728\u666e\u901a\u6a21\u5f0f\u4e0b\uff0c <code>TCNT0</code> \u5bc4\u5b58\u5668\u7684\u503c\u4ece0x00\u4e00\u76f4\u589e\u52a0\u52300xFF\uff0c\u7136\u540e\u56de\u52300x00\uff0c\u5982\u6b64\u5f80\u590d\u3002\u5f53 <code>TCNT0</code> \u5bc4\u5b58\u5668\u7684\u503c\u56de\u52300x00\u65f6\uff0c <code>TOV0</code> \u6807\u5fd7\u4f4d\u7f6e\u4f4d\uff0c\u540c\u65f6\u89e6\u53d1 <code>TIMER0_OVF</code> \u4e2d\u65ad\u3002</p> <p></p> <p>\u5f53 <code>TCNT0</code> \u5bc4\u5b58\u5668\u7684\u503c\u4e0e <code>OCR0x</code> \u5bc4\u5b58\u5668\u7684\u503c\u76f8\u7b49\u65f6\uff0c <code>OCF0x</code> \u6807\u5fd7\u4f4d\u5c06\u5728\u4e0b\u4e00\u4e2a\u65f6\u949f\u7f6e\u4f4d\uff0c\u540c\u65f6\u89e6\u53d1 <code>TIMER0_COMPx</code> \u4e2d\u65ad\u3002</p> <p></p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E5%91%BC%E5%90%B8%E7%81%AF/#ctc","title":"CTC\u6a21\u5f0f","text":"<p>\u5728CTC\uff08Clear Timer on Compare Match\uff09\u6a21\u5f0f\u4e0b\uff0c <code>TCNT0</code> \u5bc4\u5b58\u5668\u7684\u503c\u4ece0x00\u4e00\u76f4\u589e\u52a0\u5230\u548c <code>OCR0A</code> \u5bc4\u5b58\u5668\u76f8\u7b49\uff0c\u7136\u540e\u56de\u5f52\u52300x00\u3002\u5f53 <code>TCNT0</code> \u5bc4\u5b58\u5668\u7684\u503c\u56de\u52300x00\u65f6\uff0c <code>OCF0A</code> \u6807\u5fd7\u4f4d\u7f6e\u4f4d\uff0c\u540c\u65f6\u89e6\u53d1 <code>TIMER0_COMPA</code> \u4e2d\u65ad\u3002</p> <p></p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E5%91%BC%E5%90%B8%E7%81%AF/#_2","title":"\u5bc4\u5b58\u5668","text":"<ul> <li><code>CTC0</code> \uff1aCTC\u6a21\u5f0f\uff0c <code>0</code> \u4e3a\u666e\u901a\u6a21\u5f0f\uff0c <code>1</code> \u4e3aCTC\u6a21\u5f0f\u3002     </li> <li><code>CS0[2:0]</code> \uff1a\u65f6\u949f\u6e90\u9009\u62e9\u3002     </li> </ul> <ul> <li><code>OCIE0B</code> \uff1a\u7f6e <code>1</code> \u65f6\u4f7f\u80fd <code>TIMER0_COMPB</code> \u4e2d\u65ad\u3002</li> <li><code>OCIE0A</code> \uff1a\u7f6e <code>1</code> \u65f6\u4f7f\u80fd <code>TIEMR0_COMPA</code> \u4e2d\u65ad\u3002</li> <li><code>TOIE0</code> \uff1a\u7f6e <code>1</code> \u65f6\u4f7f\u80fd <code>TIMER0_OVF</code> \u4e2d\u65ad\u3002</li> </ul> <ul> <li><code>OCF0B</code> \uff1a\u5b9a\u65f6\u56680\u8f93\u51fa\u6bd4\u8f83B\u5339\u914d\u6807\u5fd7\u4f4d\uff0c\u6267\u884c\u4e2d\u65ad\u5904\u7406\u51fd\u6570\u65f6\u81ea\u52a8\u6e05\u9664\uff0c\u6216\u8005\u53ef\u4ee5\u5199 <code>1</code> \u6e05\u9664\u3002</li> <li><code>OCF0A</code> \uff1a\u5b9a\u65f6\u56680\u8f93\u51fa\u6bd4\u8f83A\u5339\u914d\u6807\u5fd7\u4f4d\uff0c\u6267\u884c\u4e2d\u65ad\u5904\u7406\u51fd\u6570\u65f6\u81ea\u52a8\u6e05\u9664\uff0c\u6216\u8005\u53ef\u4ee5\u5199 <code>1</code> \u6e05\u9664\u3002</li> <li><code>TOV0</code> \uff1a\u5b9a\u65f6\u56680\u6ea2\u51fa\u6807\u5fd7\u4f4d\uff0c\u6267\u884c\u4e2d\u65ad\u5904\u7406\u51fd\u6570\u65f6\u81ea\u52a8\u6e05\u9664\uff0c\u6216\u8005\u53ef\u4ee5\u5199 <code>1</code> \u6e05\u9664\u3002</li> </ul>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E5%91%BC%E5%90%B8%E7%81%AF/#led","title":"\u63a7\u5236LED\u95ea\u70c1\u5468\u671f","text":"<p>\u5229\u7528ATtiny88\u5b9a\u65f6\u56680\u7684CTC\u6a21\u5f0f\u53ef\u4ee5\u7075\u6d3b\u63a7\u5236LED\u7684\u95ea\u70c1\u5468\u671f\uff0c <code>OCR0A</code> \u5bc4\u5b58\u5668\u7684\u503c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u5f0f\u8ba1\u7b97\u5f97\u5230\uff1a</p> \\[OCR0A = time \\times f_{T0} - 1 = time \\times \\frac{f_{IO}}{prescaler} - 1\\] <p>\u4ee3\u7801\u6587\u4ef6\u7684\u7ec4\u7ec7\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 inc\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 main.c\n</code></pre> <p>\u5176\u4e2d <code>src/main.c</code> \u6e90\u6587\u4ef6\u7684\u5185\u5bb9\u5982\u4e0b\uff1a</p> src/main.c<pre><code>#include &lt;stdint.h&gt;\n#include &lt;avr/io.h&gt;\n#include &lt;avr/interrupt.h&gt;\nint main(void)\n{\ncli();                          // disable global interrupt\nDDRD |= _BV(DDD0);              // set PD0 as output\nPORTD |= _BV(PORTD0);           // PD0 outputs high level\nTCNT0 = 0;                      // clear counter\nOCR0A = 249;                    // reload value, 1ms\nTCCR0A = _BV(CTC0) | _BV(CS01) | _BV(CS00);\n// CTC mode, prescaler = 64, clk_t0 = 250KHz\nTIFR0 = _BV(OCF0A);             // clear OCF0A flag\nTIMSK0 = _BV(OCIE0A);           // enable TIMER0_COMPA interrupt\nsei();                          // enable global interrupt\nfor (;;);                       // wait for interrupt\n}\nISR(TIMER0_COMPA_vect)\n{\nstatic uint16_t count = 0;\nuint8_t sreg = SREG;            // store the status register\nif (++count == 500) {\ncount = 0;\nPIND = _BV(PIND0);          // toggle PD0 every 500ms\n}\nSREG = sreg;                    // restore the status register\n}\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u8bbe\u7f6e\u5b9a\u65f6\u56680\u7684\u65f6\u949f\u5206\u9891\u7cfb\u6570\u4e3a64\uff0c\u5373 \\(f_{T0} = \\frac{16MHz}{64} = 250KHz\\) \uff1b\u8bbe\u7f6e\u5b9a\u65f6\u5468\u671f\u4e3a1\u6beb\u79d2\uff0c\u5373 \\(OCR0A = 10^{-3}s \\times 250KHz - 1 = 249\\) \uff1b\u540c\u65f6\uff0c\u5f00\u542f <code>TIMER0_COMPA</code> \u4e2d\u65ad\u3002\u5728\u4e2d\u65ad\u51fd\u6570\u4e2d\uff0c\u6bcf500\u4e2a\u5468\u671f\u7ffb\u8f6c\u4e00\u6b21PD0\u7684\u7535\u5e73\u72b6\u6001\uff0c\u5b9e\u73b0\u4e86LED\u4ee51\u79d2\u4e3a\u5468\u671f\u7684\u95ea\u70c1\u529f\u80fd\u3002</p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E5%91%BC%E5%90%B8%E7%81%AF/#led_1","title":"\u63a7\u5236LED\u4eae\u5ea6","text":"<p>\u5229\u7528ATtiny88\u5b9a\u65f6\u56680\u7684\u666e\u901a\u6a21\u5f0f\uff0c\u53ef\u4ee5\u5b9e\u73b0\u8f6f\u4ef6PWM\u529f\u80fd\uff0cPWM\u7684\u9891\u7387\u548c\u5360\u7a7a\u6bd4\u53ef\u4ee5\u901a\u8fc7\u4e0b\u5f0f\u8ba1\u7b97\u5f97\u5230\uff1a</p> \\[f_{PWM} = \\frac{f_{T0}}{256} = \\frac{f_{IO}}{prescaler \\times 256}\\] \\[duty = \\frac{OCR0A + 1}{256}\\] <p>\u4ee3\u7801\u6587\u4ef6\u7684\u7ec4\u7ec7\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 inc\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 main.c\n</code></pre> <p>\u5176\u4e2d <code>src\\main.c</code> \u6e90\u6587\u4ef6\u7684\u5185\u5bb9\u5982\u4e0b\uff1a</p> src/main.c<pre><code>#include &lt;stdint.h&gt;\n#include &lt;avr/io.h&gt;\n#include &lt;avr/interrupt.h&gt;\nint main(void)\n{\ncli();                              // disable global interrupt\nDDRD |= _BV(DDD0);                  // set PD0 as output\nPORTD &amp;= ~_BV(PORTD0);              // PD0 outputs low level\nTCNT0 = 0;                          // clear counter\nOCR0A = 0;                          // clear compare value\nTCCR0A = _BV(CS01) | _BV(CS00);     // normal mode, prescaler = 64, clk_t0 = 250KHz, f_pwm = 977Hz\nTIFR0 = _BV(OCF0A) | _BV(TOV0);     // clear OCF0A &amp; TOV0 flag\nTIMSK0 = _BV(OCIE0A) | _BV(TOIE0);  // enable TIMER0_COMPA &amp; TIMER0_OVF interrupt\nsei();                              // enable global interrupt\nfor (;;);                           // wait for interrupt\n}\nISR(TIMER0_COMPA_vect)\n{\nuint8_t sreg = SREG;                // store the status register\nPORTD &amp;= ~_BV(PORTD0);              // PD0 outputs low level\nSREG = sreg;                        // restore the status register\n}\nISR(TIMER0_OVF_vect)\n{\nstatic uint8_t count = 0;\nstatic int8_t inc = 1;\nuint8_t sreg = SREG;                // store the status register\nPORTD |= _BV(PORTD0);               // PD0 outputs high level\nif (++count == 10) {\nOCR0A += inc;                   // increase / decrease PWM duty every 10 cycles\nif (OCR0A == 0xFF) {\ninc = -1;\n} else if (OCR0A == 0) {\ninc = 1;\n}\ncount = 0;\n}\nSREG = sreg;                        // restore the status register\n}\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u8bbe\u7f6e\u5b9a\u65f6\u5668\u7684\u65f6\u949f\u5206\u9891\u7cfb\u6570\u4e3a64\uff0c\u5219PWM\u7684\u9891\u7387\u4e3a \\(f_{PWM} = \\frac{16MHz}{64 \\times 256} \\approx 977Hz\\) \uff0c\u5e76\u5f00\u542f\u4e86 <code>TIMER0_COMPA</code> \u548c <code>TIMER0_OVF</code> \u4e2d\u65ad\u3002\u5728 <code>TIMER0_COMPA</code> \u4e2d\u65ad\u91ccPD0\u8f93\u51fa\u4f4e\u7535\u5e73\uff0c\u5728 <code>TIMER0_OVF</code> \u4e2d\u65ad\u91ccPD0\u8f93\u51fa\u9ad8\u7535\u5e73\uff0c\u53e6\u5916\u6bcf10\u4e2a\u5468\u671f\u589e\u52a0/\u51cf\u5c11\u4e00\u6b21\u5360\u7a7a\u6bd4\u3002</p> <p>\u5c06\u4ee3\u7801\u4e0b\u8f7d\u5230\u5355\u7247\u673a\u540e\uff0c\u677f\u8f7dLED\u5c06\u5448\u73b0\u547c\u5438\u706f\u7684\u6548\u679c\uff0c\u7531\u706d\u6162\u6162\u53d8\u4eae\uff0c\u518d\u7531\u4eae\u6162\u6162\u53d8\u706d\u3002\u540c\u65f6\uff0c\u5c06PD0\u5f15\u811a\u8fde\u63a5\u5230\u793a\u6ce2\u5668\uff0c\u53ef\u4ee5\u770b\u5230\u9891\u7387\u4e3a977Hz\u5de6\u53f3\u7684PWM\u6ce2\uff0c\u4e14\u5360\u7a7a\u6bd4\u5728\u89c4\u5f8b\u53d8\u5316\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6ce8\u610f\uff1a\u8fd9\u79cd\u65b9\u6cd5\u4ea7\u751f\u7684PWM\u6700\u4f4e\u5360\u7a7a\u6bd4\u4e3a \\(\\frac{1}{255}\\) \uff0c\u6700\u9ad8\u5360\u7a7a\u6bd4\u4ecb\u4e8e \\(\\frac{255}{256}\\) \u548c1\u4e4b\u95f4\uff0c\u8fd9\u662f\u56e0\u4e3a\u867d\u7136\u7406\u8bba\u4e0a <code>OCR0A</code> \u5bc4\u5b58\u5668\u8bbe\u7f6e\u4e3a255\u65f6\u5360\u7a7a\u6bd4\u4e3a1\uff0c\u4f46\u662f\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b <code>TIMER0_COMPA</code> \u548c <code>TIMER0_OVF</code> \u8fd9\u4e24\u4e2a\u4e2d\u65ad\u4f1a\u540c\u65f6\u4ea7\u751f\uff0c\u800c <code>TIMER0_COMPA</code> \u4e2d\u65ad\u7684\u4f18\u5148\u7ea7\u6bd4 <code>TIMER0_OVF</code> \u9ad8\uff0c\u56e0\u6b64\u4f1a\u5148\u6267\u884c <code>TIMER0_COMPA</code> \u4e2d\u65ad\uff0c\u6267\u884c\u5b8c\u540e\u518d\u6267\u884c <code>TIMER0_OVF</code> \u4e2d\u65ad\uff0c\u6240\u4ee5PD0\u4f1a\u8f93\u51fa\u4e00\u4e2a\u65f6\u95f4\u5f88\u77ed\u7684\u4f4e\u7535\u5e73\u8109\u51b2\uff0c\u5bfc\u81f4\u5b9e\u9645\u5360\u7a7a\u6bd4\u8fbe\u4e0d\u52301\u3002</p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E5%91%BC%E5%90%B8%E7%81%AF/#_3","title":"\u53c2\u8003\u8d44\u6599","text":"<ol> <li>ATtiny88 Datasheet</li> <li>Programming and Interfacing ATMEL's AVRs</li> </ol>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9AADC/","title":"ATtiny88\u521d\u4f53\u9a8c\uff08\u4e94\uff09\uff1aADC","text":""},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9AADC/#adc","title":"ADC\u6a21\u5757\u4ecb\u7ecd","text":"<p>ATtiny88\u5355\u7247\u673a\u5305\u542b\u4e00\u4e2a10bit\u5206\u8fa8\u7387\u7684ADC\u6a21\u5757\uff0c\u62e5\u67098\u4e2a\u901a\u9053\uff0c\u6700\u5927\u91c7\u6837\u738715kSPS\uff0c\u8f6c\u6362\u65f6\u95f414us\u3002ATtiny88\u7684ADC\u53c2\u8003\u7535\u538b\u53ef\u4ee5\u6765\u81ea\u5916\u90e8\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5185\u90e81.1V\u7684\u7535\u538b\u6e90\u3002\u652f\u6301\u81ea\u7531\u8fd0\u884c\u6a21\u5f0f\u548c\u5355\u6b21\u8f6c\u6362\u6a21\u5f0f\uff0c\u652f\u6301\u591a\u79cd\u81ea\u52a8\u89e6\u53d1\u6e90\uff0c\u5728\u7761\u7720\u6a21\u5f0f\u4e0b\u62e5\u6709\u566a\u58f0\u6d88\u9664\u5668\u3002</p> <p></p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u4f7f\u7528ADC\u6a21\u5757\uff0c <code>PRR</code> \u5bc4\u5b58\u5668\u7684 <code>PRADC</code> \u4f4d\u5fc5\u987b\u8bbe\u4e3a0\u3002</p> <p>ADC\u8f6c\u6362\u7ed3\u679c\u4fdd\u5b58\u5728 <code>ADCH</code> \u548c <code>ADCL</code> \u5bc4\u5b58\u5668\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 <code>ADLAR</code> \u4f4d\u6765\u9009\u62e9\u5de6\u5bf9\u9f50\u8fd8\u662f\u53f3\u5bf9\u9f50\u3002\u4e3a\u4e86\u9632\u6b62\u5728\u8bfb\u53d6ADC\u7ed3\u679c\u65f6\uff0cADC\u7ed3\u679c\u53d1\u751f\u6539\u53d8\uff0c\u5fc5\u987b\u5148\u8bfb\u53d6 <code>ADCL</code> \u5bc4\u5b58\u5668\uff0c\u7136\u540e\u518d\u8bfb\u53d6 <code>ADCH</code> \u5bc4\u5b58\u5668\u3002\u56e0\u4e3a\u5728\u8bfb\u53d6 <code>ADCL</code> \u5bc4\u5b58\u5668\u65f6\uff0cADC\u8f6c\u6362\u7684\u7ed3\u679c\u4f1a\u88ab\u9501\u5b9a\uff0c\u76f4\u5230 <code>ADCH</code> \u5bc4\u5b58\u5668\u88ab\u8bfb\u53d6\u4e3a\u6b62\u3002</p> <p>ADC\u6709\u4e24\u79cd\u6a21\u5f0f\uff1a\u5355\u6b21\u89e6\u53d1\u6a21\u5f0f\u548c\u81ea\u7531\u8fd0\u884c\u6a21\u5f0f\u3002\u5728\u5355\u6b21\u89e6\u53d1\u6a21\u5f0f\u4e0b\uff0c\u5411 <code>ADSC</code> \u4f4d\u51991\u542f\u52a8\u8f6c\u6362\uff0c\u8f6c\u6362\u5b8c\u6210\u540e\u8be5\u4f4d\u4f1a\u81ea\u52a8\u6e05\u96f6\uff1b\u5728\u81ea\u7531\u8fd0\u884c\u6a21\u5f0f\u4e0b\uff0c <code>ADSC</code> \u4f4d\u4f1a\u4e00\u76f4\u7ef4\u63011\u3002</p> <p>\u5728\u7761\u7720\u6a21\u5f0f\u4e0b\uff0cADC\u6a21\u5757\u53ef\u4ee5\u542f\u7528\u566a\u58f0\u6d88\u9664\u5668\u51cf\u5c11\u6765\u81eaCPU\u5185\u6838\u548c\u5176\u4ed6I/O\u5916\u8bbe\u7684\u566a\u58f0\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a</p> <ol> <li>\u786e\u4fddADC\u4f7f\u80fd\u5e76\u5904\u4e8e\u975e\u5fd9\u72b6\u6001\uff0c\u9009\u62e9\u5355\u6b21\u8f6c\u6362\u6a21\u5f0f\uff0c\u4f7f\u80fdADC\u8f6c\u6362\u7ed3\u675f\u4e2d\u65ad\u3002</li> <li>\u8fdb\u5165ADC\u566a\u58f0\u51cf\u5c11\u6a21\u5f0f\uff08\u6216\u7a7a\u95f2\u6a21\u5f0f\uff09\uff0c\u5f53CPU\u505c\u6b62\u5de5\u4f5c\u65f6\uff0cADC\u4f1a\u5f00\u59cb\u4e00\u6b21\u8f6c\u6362\u3002</li> <li>\u5f53\u8f6c\u6362\u7ed3\u675f\u65f6\uff0cADC\u8f6c\u6362\u7ed3\u675f\u4e2d\u65ad\u4f1a\u5524\u9192CPU\uff0c\u9664\u975e\u518d\u6b21\u4f7f\u7528\u7761\u7720\u547d\u4ee4\uff0c\u5426\u5219CPU\u4f1a\u4e00\u76f4\u5904\u4e8e\u6d3b\u8dc3\u72b6\u6001\u3002</li> </ol> <p>\u6ce8\u610f\uff1a\u8fdb\u5165\u9664\u7a7a\u95f2\u6a21\u5f0f\u53caADC\u566a\u58f0\u51cf\u5c11\u6a21\u5f0f\u5916\u7684\u5176\u4ed6\u7761\u7720\u6a21\u5f0f\u65f6\uff0c\u4e0d\u4f1a\u81ea\u52a8\u5173\u95edADC\uff0c\u5efa\u8bae\u5728\u8fdb\u5165\u8fd9\u4e9b\u7761\u7720\u6a21\u5f0f\u65f6\u5c06 <code>ADEN</code> \u4f4d\u6e05\u96f6\u3002</p> <p>ADC\u8f6c\u6362\u7ed3\u679c\u4e0e\u7535\u538b\u7684\u5173\u7cfb\u5982\u4e0b\u5f0f\u6240\u793a\uff1a</p> \\[ADC=\\frac{V_{IN} \\times 1024}{V_{REF}}\\] <p>ATtiny88\u5185\u90e8\u6709\u4e00\u4e2a\u6e29\u5ea6\u4f20\u611f\u5668\uff0c\u5b83\u8fde\u63a5\u5230ADC8\u901a\u9053\uff0c\u5728\u6d4b\u91cf\u6e29\u5ea6\u65f6\uff0c\u5fc5\u987b\u9009\u62e9\u5185\u90e81.1V\u53c2\u8003\u7535\u538b\u3002</p> <p>ADC\u7684\u6d4b\u91cf\u7535\u538b\u4e0e\u6e29\u5ea6\u7ea6\u4e3a\u7ebf\u6027\u5173\u7cfb\uff0c\u7075\u654f\u5ea6\u7ea6\u4e3a1LSB/\u2103\uff0c\u5178\u578b\u503c\u5982\u4e0b\uff1a</p> <p></p> <p>\u4e3a\u4e86\u83b7\u5f97\u66f4\u9ad8\u7684\u7cbe\u5ea6\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u516c\u5f0f\u8fdb\u884c\u8f6f\u4ef6\u6821\u6b63\uff1a</p> \\[T = k \\times [(ADCH &lt;&lt; 8) | ADCL] + T_{OS}\\] <p>\u5176\u4e2d\uff0c \\(k\\) \u662f\u659c\u7387\uff0c\u662f\u56fa\u5b9a\u7684\uff0c\u901a\u5e38\u6570\u503c\u975e\u5e38\u63a5\u8fd11\uff0c \\(T_{OS}\\) \u662f\u4f20\u611f\u5668\u504f\u79fb\u91cf\u3002</p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9AADC/#_1","title":"\u76f8\u5173\u5bc4\u5b58\u5668","text":"<ul> <li><code>REFS0</code> \uff1a\u53c2\u8003\u7535\u538b\u9009\u62e9\u3002     </li> <li><code>ADLAR</code> \uff1aADC\u7ed3\u679c\u5de6\u5bf9\u9f50\uff0c\u8bbe\u4e3a0\u53f3\u5bf9\u9f50\uff0c\u8bbe\u4e3a1\u5de6\u5bf9\u9f50\u3002</li> <li><code>MUX[3:0]</code> \uff1a\u6a21\u62df\u901a\u9053\u9009\u62e9\u3002     </li> </ul> <ul> <li><code>ADEN</code> \uff1a\u4f7f\u80fdADC\u3002</li> <li><code>ADSC</code> \uff1a\u542f\u52a8ADC\u8f6c\u6362\uff0c\u8f6c\u6362\u7ed3\u675f\u540e\u81ea\u52a8\u6e05\u96f6\u3002</li> <li><code>ADATE</code> \uff1a\u4f7f\u80fdADC\u81ea\u52a8\u89e6\u53d1\u3002</li> <li><code>ADIF</code> \uff1aADC\u4e2d\u65ad\u6807\u5fd7\u4f4d\uff0c\u4e2d\u65ad\u7a0b\u5e8f\u6267\u884c\u7ed3\u675f\u540e\u6e05\u96f6\uff0c\u6216\u8005\u4e5f\u53ef\u4ee5\u51991\u6e05\u96f6\u3002</li> <li><code>ADPS[2:0]</code> \uff1aADC\u5206\u9891\u9009\u62e9\uff0c\u5206\u9891\u540e\u7684\u9891\u7387\u4e0d\u8981\u8d85\u8fc71MHz\u3002     </li> </ul> <ul> <li><code>ADTS[2:0]</code> \uff1aADC\u81ea\u52a8\u89e6\u53d1\u6e90\u9009\u62e9\u3002     </li> </ul> <ul> <li><code>ADCnD</code> \uff1a\u5173\u95ed\u5bf9\u5e94ADC\u5f15\u811a\u7684\u6570\u5b57\u8f93\u5165\u7f13\u51b2\u3002</li> </ul>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9AADC/#_2","title":"\u4ee3\u7801","text":"<p>\u4e0b\u9762\u7684\u4ee3\u7801\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528ATtiny88\u7684ADC\u6a21\u5757\u8bfb\u53d6ADC0\u901a\u9053\uff08PC0\u5f15\u811a\uff09\u7684\u7535\u538b\u503c\uff0c\u4ee3\u7801\u6587\u4ef6\u7684\u6574\u4f53\u7ec4\u7ec7\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 inc\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 serial.h\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 serial_stdio.h\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 main.c\n    \u251c\u2500\u2500 serial.c\n    \u2514\u2500\u2500 serial_stdio.c\n</code></pre> <p><code>src/main.c</code> \u6e90\u6587\u4ef6\u7684\u5185\u5bb9\u5982\u4e0b\uff1a</p> src/main.c<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;avr/io.h&gt;\n#include &lt;avr/interrupt.h&gt;\n#include &lt;serial_stdio.h&gt;\nstatic void delay(void);\nint main(void)\n{\ncli();\nstdio_setup();              // initialize stdio and redirect it to serial\nADMUX = _BV(REFS0);         // external reference, align right, select channel ADC0(PC0)\nADCSRA = _BV(ADEN) | _BV(ADIF) | _BV(ADPS2) | _BV(ADPS1) | _BV(ADPS0);\n// enable ADC, clear ADC interrupt flag, disable ADC interrupt, division factor = 128\nDIDR0 = _BV(ADC0D);         // disable digital input buffer of ADC0 pin\nsei();\nfor (;;) {\nADCSRA |= _BV(ADSC);            // start conversion\nwhile (!(ADCSRA &amp; _BV(ADIF)));  // wait for completion\nuint16_t value = ADCL;          // read low byte first\nvalue |= ADCH &lt;&lt; 8;             // then read the high\nuint16_t voltage = (5000UL * value) &gt;&gt; 10;  // convert digital value to voltage\nprintf(\"ADC0 value: 0x%04X, voltage: %dmV.\\r\\n\", value, voltage);\nADCSRA |= _BV(ADIF);            // clear flag\ndelay();\n}\n}\nstatic void delay(void)\n{\nfor (volatile uint32_t i = 0; i &lt; 0x8000; i++);\n}\n</code></pre>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9AADC/#_3","title":"\u53c2\u8003\u8d44\u6599","text":"<ol> <li>ATtiny88 Datasheet</li> </ol>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9ASPI/","title":"ATtiny88\u521d\u4f53\u9a8c\uff08\u516d\uff09\uff1aSPI","text":""},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9ASPI/#spi","title":"SPI\u4ecb\u7ecd","text":"<p>ATtiny88\u81ea\u5e26SPI\u6a21\u5757\uff0c\u53ef\u4ee5\u5b9e\u73b0\u6570\u636e\u7684\u5168\u53cc\u5de5\u4e09\u7ebf\u540c\u6b65\u4f20\u8f93\u3002\u5b83\u652f\u6301\u4e3b\u4ece\u4e24\u79cd\u6a21\u5f0f\uff0c\u53ef\u4ee5\u914d\u7f6e\u4e3aLSB\u6216\u8005MSB\u4f18\u5148\u4f20\u8f93\uff0c\u67097\u79cd\u53ef\u7f16\u7a0b\u901f\u7387\uff0c\u652f\u6301\u4ece\u7a7a\u95f2\u6a21\u5f0f\u5524\u9192\u3002</p> <p></p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u4f7f\u7528SPI\u6a21\u5757\uff0c\u5fc5\u987b\u5c06 <code>PRR</code> \u5bc4\u5b58\u5668\u4e2d\u7684 <code>PRSPI</code> \u4f4d\u8bbe\u7f6e\u4e3a0\u3002</p> <p>ATtiny88\u7684SPI\u65f6\u949f\u9891\u7387\u4e0d\u80fd\u8d85\u8fc7 \\(f_{OSC}/4\\) \uff0c\u53cc\u500d\u901f\u7387\u6a21\u5f0f\u4e0b\u4e0d\u80fd\u8d85\u8fc7 \\(f_{OSC}/2\\) \u3002</p> <p>\u5f53SPI\u4f7f\u80fd\u65f6\uff0cMOSI\u3001MISO\u3001SCK\u3001SS\u5f15\u811a\u7684\u65b9\u5411\u4f1a\u88ab\u8986\u76d6\uff0c\u5177\u4f53\u89c1\u4e0b\u8868\uff1a</p> <p></p> <p>\u6839\u636eSCK\u7684\u6781\u6027\u548c\u76f8\u4f4d\u4e0d\u540c\uff0cSPI\u5206\u4e3a\u56db\u79cd\u6a21\u5f0f\uff1a</p> <p></p> <p></p> <p></p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9ASPI/#_1","title":"\u5bc4\u5b58\u5668","text":"<ul> <li><code>SPIE</code> \uff1a\u5199\u51651\u4f7f\u80fdSPI\u4e2d\u65ad\u3002</li> <li><code>SPE</code> \uff1a\u5199\u51651\u4f7f\u80fdSPI\u3002</li> <li><code>DORD</code> \uff1a\u6570\u636e\u65b9\u5411\uff0c\u5199\u51651\u4e3aLSB\u4f18\u5148\uff0c\u5199\u51650\u4e3aMSB\u4f18\u5148\u3002</li> <li><code>MSTR</code> \uff1a\u4e3b\u673a/\u4ece\u673a\u6a21\u5f0f\u9009\u62e9\uff0c\u5199\u51651\u4e3a\u4e3b\u673a\u6a21\u5f0f\uff0c\u5199\u51650\u4e3a\u4ece\u673a\u6a21\u5f0f\u3002</li> <li><code>CPOL</code> \uff1a\u65f6\u949f\u6781\u6027\u3002</li> <li><code>CPHA</code> \uff1a\u65f6\u949f\u76f8\u4f4d\u3002</li> <li><code>SPR[1:0]</code> \uff1aSPI\u65f6\u949f\u901f\u7387\u9009\u62e9\u3002     </li> </ul> <ul> <li><code>SPIF</code> \uff1aSPI\u4e2d\u65ad\u6807\u5fd7\uff0c\u6267\u884c\u5b8c\u4e2d\u65ad\u540e\u81ea\u52a8\u6e05\u9664\uff0c\u6216\u8005\u901a\u8fc7\u5148\u8bfb <code>SPSR</code> \u5bc4\u5b58\u5668\uff0c\u518d\u8bbf\u95ee <code>SPDR</code> \u5bc4\u5b58\u5668\u6e05\u9664\u3002</li> <li><code>WCOL</code> \uff1a\u5199\u51b2\u7a81\u6807\u5fd7\uff0c\u5728\u6570\u636e\u4f20\u8f93\u671f\u95f4\u5bf9 <code>SPDR</code> \u5bc4\u5b58\u5668\u8fdb\u884c\u5199\u64cd\u4f5c\u65f6\u7f6e\u4f4d\uff0c\u901a\u8fc7\u5148\u8bfb <code>SPSR</code> \u5bc4\u5b58\u5668\uff0c\u518d\u8bbf\u95ee <code>SPDR</code> \u5bc4\u5b58\u5668\u6e05\u9664\u3002</li> <li><code>SPI2X</code> \uff1aSPI\u901f\u7387\u52a0\u500d\u3002\u5728\u4e3b\u673a\u6a21\u5f0f\u4e0b\uff0c\u5411\u6b64\u4f4d\u5199\u51651\u4f7fSPI\u65f6\u949f\u901f\u7387\u52a0\u500d\uff0c\u6700\u5927\u901f\u7387\u4e3a \\(f_{OSC}/2\\) \u3002\u5728\u4ece\u673a\u6a21\u5f0f\u4e0b\uff0c\u6700\u5927\u901f\u7387\u8fd8\u662f\u53ea\u6709 \\(f_{OSC}/4\\) \u3002</li> </ul>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9ASPI/#_2","title":"\u4ee3\u7801","text":"<p>\u4e0b\u9762\u7684\u4ee3\u7801\u6f14\u793a\u4e86\u4f7f\u7528ATtiny88\u7684SPI\u6a21\u5757\u4e0eW25Q32 Flash\u6a21\u5757\u8fdb\u884c\u901a\u4fe1\uff0c\u8bfb\u53d6Flash\u7684ID\u4fe1\u606f\u3002\u6e90\u6587\u4ef6\u7684\u7ec4\u7ec7\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 inc\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 serial.h\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 serial_stdio.h\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 main.c\n    \u251c\u2500\u2500 serial.c\n    \u2514\u2500\u2500 serial_stdio.c\n</code></pre> <p><code>src/main.c</code> \u6e90\u6587\u4ef6\u7684\u4ee3\u7801\u5982\u4e0b\uff1a</p> src/main.c<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;avr/io.h&gt;\n#include &lt;avr/interrupt.h&gt;\n#include &lt;serial_stdio.h&gt;\nstatic void spi_setup(void);\nstatic uint8_t spi_read_and_write(uint8_t data);\nstatic void w25qxx_read_device_id(void *id, uint8_t n);\nstatic void w25qxx_read_manufacturer_device_id(void *id, uint8_t n);\nstatic void w25qxx_read_unique_id(void *id, uint8_t n);\nstatic void w25qxx_read_jedec_id(void *id, uint8_t n);\nint main(void)\n{\ncli();\nstdio_setup();              // initialize stdio and redirect it to serial\nspi_setup();                // initialize spi module\nsei();\nprintf(\"=================================\\r\\n\");\n// read device id of spi flash\nuint8_t buf[8];\nw25qxx_read_device_id(buf, 1);\nprintf(\"device id: 0x%02X.\\r\\n\", buf[0]);\n// read manufacturer and device id of spi flash\nw25qxx_read_manufacturer_device_id(buf, 2);\nprintf(\"manufacturer &amp; device id: 0x%02X%02X.\\r\\n\", buf[0], buf[1]);\n// read unique id of spi flash\nw25qxx_read_unique_id(buf, 8);\nprintf(\"unique id: 0x\");\nfor (uint8_t i = 0; i &lt; 8; i++) {\nprintf(\"%02X\", buf[i]);\n}\nprintf(\".\\r\\n\");\n// read jedec id of spi flash\nw25qxx_read_jedec_id(buf, 3);\nprintf(\"jedec id: 0x%02X%02X%02X.\\r\\n\", buf[0], buf[1], buf[2]);\nfor (;;);\n}\nstatic void spi_setup(void)\n{\n// initialize gpios\n// PB2 -&gt; SS\n// PB3 -&gt; MOSI\n// PB4 -&gt; MISO\n// PB5 -&gt; SCK\nDDRB |= _BV(DDB2) | _BV(DDB3) | _BV(DDB5);\nPORTB |= _BV(PORTB2) | _BV(PORTB3) | _BV(PORTB5);\n// enable spi, msb first, master mode, mode 3, prescaler = 64\nSPCR = _BV(SPE) | _BV(MSTR) | _BV(CPOL) | _BV(CPHA) | _BV(SPR1) | _BV(SPR0);\nSPSR = _BV(SPI2X);\n}\nstatic uint8_t spi_read_and_write(uint8_t data)\n{\nSPDR = data;\nwhile (!(SPSR &amp; _BV(SPIF)));\nreturn SPDR;\n}\nstatic void w25qxx_read_device_id(void *id, uint8_t n)\n{\nif (n &gt; 1) {\nn = 1;\n}\nPORTB &amp;= ~_BV(PORTB2);\nspi_read_and_write(0xAB);\nspi_read_and_write(0xFF);\nspi_read_and_write(0xFF);\nspi_read_and_write(0xFF);\nwhile (n--) {\n*(uint8_t *)id++ = spi_read_and_write(0xFF);\n}\nPORTB |= _BV(PORTB2);\n}\nstatic void w25qxx_read_manufacturer_device_id(void *id, uint8_t n)\n{\nif (n &gt; 2) {\nn = 2;\n}\nPORTB &amp;= ~_BV(PORTB2);\nspi_read_and_write(0x90);\nspi_read_and_write(0xFF);\nspi_read_and_write(0xFF);\nspi_read_and_write(0x00);\nwhile (n--) {\n*(uint8_t *)id++ = spi_read_and_write(0xFF);\n}\nPORTB |= _BV(PORTB2);\n}\nstatic void w25qxx_read_unique_id(void *id, uint8_t n)\n{\nif (n &gt; 8) {\nn = 8;\n}\nPORTB &amp;= ~_BV(PORTB2);\nspi_read_and_write(0x4B);\nspi_read_and_write(0xFF);\nspi_read_and_write(0xFF);\nspi_read_and_write(0xFF);\nspi_read_and_write(0xFF);\nwhile (n--) {\n*(uint8_t *)id++ = spi_read_and_write(0xFF);\n}\nPORTB |= _BV(PORTB2);\n}\nstatic void w25qxx_read_jedec_id(void *id, uint8_t n)\n{\nif (n &gt; 3) {\nn = 3;\n}\nPORTB &amp;= ~_BV(PORTB2);\nspi_read_and_write(0x9F);\nwhile (n--) {\n*(uint8_t *)id++ = spi_read_and_write(0xFF);\n}\nPORTB |= _BV(PORTB2);\n}\n</code></pre> <p>\u7f16\u8bd1\u5e76\u4e0b\u8f7d\u7a0b\u5e8f\u5230ATtiny88\uff0c\u8fde\u63a5\u597d\u4e32\u53e3\uff0c\u53ef\u4ee5\u89c2\u5bdf\u4e32\u53e3\u7684\u8f93\u51fa\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9ASPI/#_3","title":"\u53c2\u8003\u8d44\u6599","text":"<ol> <li>ATtiny88 Datasheet</li> <li>Programming and Interfacing ATMEL's AVRs</li> </ol>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E7%9C%8B%E9%97%A8%E7%8B%97/","title":"ATtiny88\u521d\u4f53\u9a8c\uff08\u56db\uff09\uff1a\u770b\u95e8\u72d7","text":"<p>ATtiny88\u5355\u7247\u673a\u7684\u770b\u95e8\u72d7\u4f7f\u7528\u5185\u90e8\u72ec\u7acb\u7684128KHz\u65f6\u949f\u6e90\uff0c\u62e5\u67093\u79cd\u5de5\u4f5c\u6a21\u5f0f\uff1a</p> <ul> <li>Interrupt\u6a21\u5f0f\uff1a\u8d85\u65f6\u4ea7\u751f\u4e2d\u65ad\uff1b</li> <li>System Reset\u6a21\u5f0f\uff1a\u8d85\u65f6\u4ea7\u751f\u7cfb\u7edf\u590d\u4f4d\uff1b</li> <li>Interrupt &amp; System Reset\u6a21\u5f0f\uff1a\u8d85\u65f6\u4ea7\u751f\u4e2d\u65ad\uff0c\u4e2d\u65ad\u5904\u7406\u5b8c\u6210\u540e\u4ea7\u751f\u7cfb\u7edf\u590d\u4f4d\u3002</li> </ul> <p></p> <p>\u5f53\u7194\u4e1d\u4f4d <code>WDTON</code> \u88ab\u7f16\u7a0b\u65f6\uff08\u503c\u4e3a0\uff09\uff0c\u5c06\u5f3a\u5236\u5c06\u770b\u95e8\u72d7\u8bbe\u4e3aSystem Reset\u6a21\u5f0f\uff0c\u6b64\u65f6 <code>WDE</code> \u548c <code>WDIE</code> \u4f4d\u5c06\u88ab\u9501\u5b9a\u4e3a <code>1</code> \u548c <code>0</code> \u3002</p> <p>\u6e05\u9664 <code>WDE</code> \u4f4d\u548c\u4fee\u6539 <code>WDP</code> \u9700\u8981\u6309\u7167\u4e0b\u9762\u7684\u987a\u5e8f\u8fdb\u884c\u64cd\u4f5c\uff1a</p> <ol> <li>\u5411 <code>WDCE</code> \u548c <code>WDE</code> \u4f4d\u51991\uff0c\u4e0d\u7ba1 <code>WDE</code> \u4f4d\u5148\u524d\u662f\u4ec0\u4e48\u503c\uff0c\u90fd\u5fc5\u987b\u51991\u3002</li> <li>\u5728\u63a5\u4e0b\u6765\u76844\u4e2a\u65f6\u949f\u91cc\uff0c\u4fee\u6539 <code>WDE</code> \u548c <code>WDP</code> \u4f4d\uff0c\u6e05\u9664 <code>WDCE</code> \u4f4d\uff0c\u8fd9\u4e9b\u5fc5\u987b\u5728\u4e00\u6b21\u64cd\u4f5c\u5185\u5b8c\u6210\u3002</li> </ol> <p>\u6ce8\u610f\uff1a</p> <ol> <li>\u4e3a\u4e86\u9632\u6b62\u7a0b\u5e8f\u9677\u5165\u590d\u4f4d\u5faa\u73af\uff0c\u4e0d\u7ba1\u6709\u6ca1\u6709\u7528\u5230\u770b\u95e8\u72d7\uff0c\u5728\u521d\u59cb\u5316\u65f6\uff0c\u90fd\u5efa\u8bae\u6e05\u9664 <code>WDRF</code> \u6807\u5fd7\u4f4d\u548c <code>WDE</code> \u4f4d\u3002</li> <li>\u5728\u4efb\u4f55\u5bf9 <code>WDP</code> \u4f4d\u7684\u4fee\u6539\u4e4b\u524d\uff0c\u5efa\u8bae\u90fd\u590d\u4f4d\u770b\u95e8\u72d7\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u5bfc\u81f4\u610f\u5916\u7684\u590d\u4f4d\u3002</li> </ol>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E7%9C%8B%E9%97%A8%E7%8B%97/#_1","title":"\u5bc4\u5b58\u5668","text":"<ul> <li><code>WDRF</code> \uff1a\u770b\u95e8\u72d7\u7cfb\u7edf\u590d\u4f4d\u6807\u5fd7\u4f4d\u3002</li> <li><code>BORF</code> \uff1a\u6b20\u538b\u590d\u4f4d\u6807\u5fd7\u4f4d\u3002</li> <li><code>EXTRF</code> \uff1a\u5916\u90e8\u590d\u4f4d\u6807\u5fd7\u4f4d\u3002</li> <li><code>PORF</code> \uff1a\u4e0a\u7535\u590d\u4f4d\u6807\u5fd7\u4f4d\u3002</li> </ul> <ul> <li><code>WDIF</code> \uff1a\u770b\u95e8\u72d7\u4e2d\u65ad\u6807\u5fd7\u4f4d\u3002</li> <li><code>WDIE</code> \uff1a\u770b\u95e8\u72d7\u4e2d\u65ad\u4f7f\u80fd\u3002</li> <li><code>WDCE</code> \uff1a\u770b\u95e8\u72d7\u4fee\u6539\u4f7f\u80fd\uff0c\u53ea\u6709\u8bbe\u7f6e\u6b64\u4f4d\uff0c\u624d\u80fd\u4fee\u6539 <code>WDE</code> \u548c <code>WDP</code> \u4f4d\u3002</li> <li><code>WDE</code> \uff1a\u770b\u95e8\u72d7\u7cfb\u7edf\u590d\u4f4d\u4f7f\u80fd\u3002     </li> <li><code>WDP[3:0]</code> \uff1a\u770b\u95e8\u72d7\u5b9a\u65f6\u5668\u5206\u9891\u3002     </li> </ul>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E7%9C%8B%E9%97%A8%E7%8B%97/#_2","title":"\u4ee3\u7801","text":"<p>\u4ee3\u7801\u7684\u6587\u4ef6\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 inc\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 serial.h\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 serial_stdio.h\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 main.c\n    \u251c\u2500\u2500 serial.c\n    \u2514\u2500\u2500 serial_stdio.c\n</code></pre> <p>\u5176\u4e2d\uff0c <code>src/main.c</code> \u7684\u5185\u5bb9\u5982\u4e0b\uff1a</p> src/main.c<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;avr/io.h&gt;\n#include &lt;avr/interrupt.h&gt;\n#include &lt;avr/wdt.h&gt;\n#include &lt;serial_stdio.h&gt;\nstatic void watchdog_setup(void);\nint main(void)\n{\ncli();\nDDRD = _BV(DDD0);                   // set PD0 as output\nstdio_setup();                      // initialize stdio\nsei();\nif (MCUSR &amp; _BV(WDRF)) {            // check if watchdog reset\nprintf(\"Watchdog Reset.\\r\\n\");\n}\nif (MCUSR &amp; _BV(BORF)) {            // check if brown-out reset\nprintf(\"Brown-out Reset.\\r\\n\");\n}\nif (MCUSR &amp; _BV(EXTRF)) {           // check if external reset\nprintf(\"External Reset.\\r\\n\");\n}\nif (MCUSR &amp; _BV(PORF)) {            // check if power-on reset\nprintf(\"Power-on Reset.\\r\\n\");\n}\nMCUSR = 0;                          // clear reset flags\nwatchdog_setup();                   // initialize watchdog as timer\nfor (;;);\n}\nstatic void watchdog_setup(void)\n{\ncli();\nwdt_reset();                        // reset watchdog counter\nMCUSR &amp;= ~_BV(WDRF);                // clear watchdog reset flag\nWDTCSR = _BV(WDCE) | _BV(WDE);      // enable watchdog change\nWDTCSR = _BV(WDIE) | _BV(WDP2) | _BV(WDP0); // interrupt mode, 0.5s\nsei();\n}\nISR(WDT_vect)\n{\nuint8_t sreg = SREG;\nPIND = _BV(PIND0);                  // toggle PD0\nSREG = sreg;\n}\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u5c06\u770b\u95e8\u72d7\u8bbe\u7f6e\u4e3a\u5b9a\u65f6\u5668\u4e2d\u65ad\u6a21\u5f0f\uff0c\u5b9a\u65f6\u5468\u671f\u4e3a0.5s\uff0c\u5728\u4e2d\u65ad\u7a0b\u5e8f\u91cc\uff0c\u7ffb\u8f6cPD0\u7684\u8f93\u51fa\u72b6\u6001\u3002</p>"},{"location":"Embed/ATtiny88%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E7%9C%8B%E9%97%A8%E7%8B%97/#_3","title":"\u53c2\u8003\u8d44\u6599","text":"<ol> <li>ATtiny88 Datasheet</li> </ol>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E6%90%AD%E5%BB%BA%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83/","title":"AVR\u6c47\u7f16\uff08\u4e00\uff09\uff1a\u642d\u5efa\u4ea4\u53c9\u7f16\u8bd1\u73af\u5883","text":"<p>\u51e0\u5e74\u95f4\uff0c\u9646\u9646\u7eed\u7eed\u63a5\u89e6\u4e86\u5f88\u591a\u70ed\u95e8\u7684\u5355\u7247\u673a\uff0c\u5982STC\u3001STM8S\u3001STM32\u3001ESP32\u7b49\u3002\u4f46\u4e00\u76f4\u90fd\u662f\u62b1\u7740\u6025\u529f\u8fd1\u5229\u7684\u5fc3\u6001\u53bb\u5b66\u4e60\u4ed6\u4eec\uff0c\u57fa\u672c\u4e0a\u90fd\u662f\u57fa\u4e8e\u5e93\u51fd\u6570\u548c\u7b2c\u4e09\u65b9\u7ec4\u4ef6\u8fdb\u884c\u5f00\u53d1\uff0c\u5f88\u5c11\u9759\u4e0b\u5fc3\u6765\u53bb\u7814\u7a76\u8fd9\u4e9b\u4e0d\u540c\u5185\u6838\u5355\u7247\u673a\u7684\u5e95\u5c42\u5de5\u4f5c\u539f\u7406\u3002\u56e0\u6b64\u6211\u6253\u7b97\u63a5\u4e0b\u6765\u4e00\u6bb5\u65f6\u95f4\u597d\u597d\u7814\u7a76\u4e00\u756a\uff0c\u5148\u4ece\u76f8\u5bf9\u5bb9\u6613\u7684AVR\u5185\u6838\u5f00\u59cb\u3002</p> <p>AVR\u662fAtmel\u63a8\u51fa\u7684\u4e00\u4e2a8\u4f4d\u7684RISC\u5fae\u63a7\u5236\u5668\u5185\u6838\uff0c\u54c8\u4f5b\u67b6\u6784\uff0c\u5177\u59071MIPS/MHz\u7684\u9ad8\u901f\u8fd0\u884c\u5904\u7406\u80fd\u529b\u3002\u672c\u6587\u5c06\u4ecb\u7ecd\u5728Linux\u7cfb\u7edf\u4e0b\u642d\u5efaAVR\u4ea4\u53c9\u7f16\u8bd1\u73af\u5883\uff0c\u4ee5\u53ca\u4eff\u771fAVR\u7a0b\u5e8f\u7684\u65b9\u6cd5\uff0c\u8fd8\u4f1a\u63d0\u5230\u4e00\u4e9b\u5e38\u7528\u7684GDB\u8c03\u8bd5\u547d\u4ee4\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E6%90%AD%E5%BB%BA%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83/#avr_1","title":"\u642d\u5efaAVR\u4ea4\u53c9\u7f16\u8bd1\u73af\u5883","text":"<p>\u4e3b\u8981\u5b89\u88c5 <code>avr-gcc</code> \u3001 <code>make</code> \u3001 <code>simavr</code> \u8f6f\u4ef6\uff0c\u524d\u4e24\u8005\u7528\u4e8e\u7f16\u8bd1\uff0c\u540e\u8005\u7528\u4e8e\u4eff\u771f\u3002</p> <p>\u4eceMicrochip\u5b98\u7f51\u4e0b\u8f7dGCC Compilers for AVR\uff0c\u9009\u62e9\u201cAVR 8-Bit Toolchain (Linux)\u201d\u3002</p> <p></p> <p>\u4e0b\u8f7d\u540e\u5f97\u5230 <code>avr8-gnu-toolchain-3.7.0.1796-linux.any.x86_64.tar.gz</code> \u6587\u4ef6\uff0c\u5c06\u4e4b\u89e3\u538b\u5230\u5408\u9002\u4f4d\u7f6e\uff1a</p> <p><pre><code>tar -zxvf avr8-gnu-toolchain-3.7.0.1796-linux.any.x86_64.tar.gz -C /path/to/avr-gcc\n</code></pre> \u5176\u4e2d\uff0c <code>-C</code> \u6307\u5b9a\u89e3\u538b\u76ee\u5f55\u3002</p> <p>\u89e3\u538b\u5b8c\u6210\u540e\uff0c\u5f97\u5230 <code>avr8-gnu-toolchain-linux_x86_64</code> \u6587\u4ef6\u5939\uff0c<code>avr-gcc</code> \u6240\u6709\u7684\u7f16\u8bd1\u5de5\u5177\u3001\u5e93\u3001\u5934\u6587\u4ef6\u7b49\u90fd\u5b58\u653e\u5728\u5b83\u4e0b\u9762\uff0c\u5176\u4e2d <code>bin</code> \u6587\u4ef6\u5939\u662f <code>avr-gcc</code> \u7b49\u4e3b\u8981\u53ef\u6267\u884c\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002</p> <p></p> <p>\u5c06 <code>avg-gcc</code> \u6240\u5728\u7684\u76ee\u5f55\u6dfb\u52a0\u5230 <code>PATH</code> \u73af\u5883\u53d8\u91cf\uff0c\u7136\u540e\u91cd\u65b0\u52a0\u8f7d\u7ec8\u7aef\uff1a</p> <pre><code>echo -e \"\\nexport PATH=\\$PATH:/path/to/avr-gcc/avr8-gnu-toolchain-linux_x86_64/bin\" &gt;&gt; ~/.zshrc\nsource ~/.zshrc\n</code></pre> <p>\u68c0\u67e5 <code>avr-gcc</code> \u662f\u5426\u5b89\u88c5\u6210\u529f\uff0c\u5982\u679c\u6210\u529f\uff0c\u5219\u4f1a\u6b63\u5e38\u8f93\u51fa\u7248\u672c\u4fe1\u606f\uff1a</p> <pre><code>avr-gcc --version\n</code></pre> <p></p> <p>\u5b89\u88c5 <code>make</code> \u548c <code>simavr</code> \uff1a</p> <pre><code>sudo apt update\nsudo apt install make simavr\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E6%90%AD%E5%BB%BA%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83/#_1","title":"\u7f16\u8bd1\u53ca\u4eff\u771f","text":"<p>\u9996\u5148\u51c6\u5907\u4e00\u4e2a\u7528\u4e8e\u4eff\u771f\u7684\u6e90\u4ee3\u7801 <code>hello.c</code> \uff0c\u5185\u5bb9\u5982\u4e0b\uff1a</p> hello.c<pre><code>#include &lt;avr/io.h&gt;\n#include &lt;stdint.h&gt;\nstatic void delay(void) {\nfor (volatile uint16_t i = 0; i &lt; 0x8000; i++);\n}\nint main(void)\n{\nuint8_t mask = 1 &lt;&lt; 5;\nDDRB |= mask;       // set PB5 to output mode\nPORTB &amp;= ~mask;     // PB5 = 0\nfor (;;) {\nPINB = mask;    // toggle PB5\ndelay();\n}\n}\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u5e72\u7684\u4e8b\u60c5\u5f88\u7b80\u5355\uff0c\u8bbe\u7f6e <code>PB5</code> \u4e3a\u8f93\u51fa\u6a21\u5f0f\uff0c\u7136\u540e\u4e0d\u65ad\u7ffb\u8f6c <code>PB5</code> \u7684\u8f93\u51fa\u7535\u5e73\u3002</p> <p>\u7136\u540e\u7f16\u5199 <code>Makefile</code> \u6587\u4ef6\uff1a</p> Makefile<pre><code>.PHONY: all clean\nall: hello.elf\nhello.o: hello.c\navr-gcc -mmcu=atmega328p -c -g -Wall -Og -std=gnu99 -o $@ $^\n\nhello.elf: hello.o\navr-gcc -mmcu=atmega328p -o $@ $^\n\nclean:\nrm -rf *.o *.elf\n</code></pre> <p>\u6587\u4ef6\u5b9a\u4e49\u7684\u6700\u7ec8\u7f16\u8bd1\u76ee\u6807\u662f <code>hello.elf</code> \uff0c\u5176\u4e2d\u4e0d\u8981\u5fd8\u4e86\u6307\u5b9a <code>avr-gcc</code> \u7684 <code>-mmcu</code> \u9009\u9879\uff0c\u8fd9\u91cc <code>-mmcu=atmega328p</code> \u8868\u793a\u7f16\u8bd1ATmega328P\u5355\u7247\u673a\u7684\u4ee3\u7801\u3002</p> <p>\u4e4b\u540e\u6267\u884c <code>make</code> \u8fdb\u884c\u7f16\u8bd1\uff0c\u751f\u6210 <code>hello.elf</code> \u6587\u4ef6\u3002</p> <p></p> <p>\u63a5\u4e0b\u6765\u5bf9 <code>hello.elf</code> \u8fdb\u884c\u4eff\u771f\uff0c\u8fd9\u4e3b\u8981\u501f\u52a9 <code>simavr</code> \u548c <code>avr-gdb</code> \u6765\u5b9e\u73b0\u3002</p> <pre><code>simavr -f 16000000 -m atmega328p --gdb hello.elf\n</code></pre> <p>\u8fd9\u6761\u547d\u4ee4\u4e2d <code>-f</code> \u8bbe\u7f6e\u4eff\u771f\u9891\u7387\uff0c <code>-m</code> \u6307\u5b9a\u4eff\u771f\u7684\u5355\u7247\u673a\u578b\u53f7\uff0c\u53ef\u4ee5\u901a\u8fc7 <code>simavr --list-cores</code> \u67e5\u770b\u6240\u6709\u652f\u6301\u7684\u5355\u7247\u673a\u578b\u53f7\uff0c <code>--gdb</code> \u5f00\u542fGDB\u670d\u52a1\uff0c\u76d1\u542c\u7aef\u53e3\u4e3a <code>1234</code> \u3002</p> <p>\u518d\u6253\u5f00\u53e6\u4e00\u4e2a\u7ec8\u7aef\u7a97\u53e3\uff0c\u7528\u4e8e\u6267\u884c <code>avr-gdb</code> \u3002</p> <pre><code>avr-gdb -ex \"target remote localhost:1234\" -q --tui hello.elf\n</code></pre> <p>\u6267\u884c\u8fd9\u6761\u547d\u4ee4\u540e\uff0c\u5c06\u8fdb\u5165 <code>avr-gdb</code> \u8c03\u8bd5\u754c\u9762\u3002</p> <p></p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E6%90%AD%E5%BB%BA%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83/#gdb","title":"\u5e38\u7528GDB\u547d\u4ee4","text":"\u547d\u4ee4 \u529f\u80fd \u793a\u4f8b <code>help</code> \u67e5\u770b\u5e2e\u52a9 <code>help all</code> \u67e5\u770b\u6240\u6709\u547d\u4ee4 <code>help print</code> \u67e5\u770b <code>print</code> \u547d\u4ee4\u7684\u5e2e\u52a9\u4fe1\u606f <code>target remote</code> \u8fde\u63a5\u5230\u8fdc\u7a0bGDB\u670d\u52a1\u5668 <code>target remote localhost:1234</code> \u8fde\u63a5\u5230\u672c\u5730\u7aef\u53e3\u53f7\u4e3a <code>1234</code> \u7684GDB\u670d\u52a1\u5668 <code>layout</code> \u8bbe\u7f6e\u7a97\u53e3\u5e03\u5c40 <code>layout regs</code> \u663e\u793a\u5bc4\u5b58\u5668\u7a97\u53e3 <code>layout src</code> \u663e\u793a\u6e90\u7801\u7a97\u53e3 <code>layout split</code> \u663e\u793a\u6e90\u7801\u548c\u53cd\u6c47\u7f16\u7a97\u53e3 <code>break</code> \u8bbe\u7f6e\u65ad\u70b9 <code>break n</code> \u5728\u7b2c <code>n</code> \u884c\u8bbe\u7f6e\u65ad\u70b9 <code>break func</code> \u5728 <code>func</code> \u51fd\u6570\u5165\u53e3\u5904\u8bbe\u7f6e\u65ad\u70b9 <code>print</code> \u6253\u5370\u8868\u8fbe\u5f0f\u7684\u503c <code>print/x var</code> \u4ee5\u5341\u516d\u8fdb\u5236\u5f62\u5f0f\u6253\u5370\u53d8\u91cf <code>var</code> \u7684\u503c <code>display</code> \u5728\u7a0b\u5e8f\u6bcf\u6b21\u6682\u505c\u65f6\u6253\u5370\u8868\u8fbe\u5f0f\u7684\u503c <code>display/x $r24</code> \u4ee5\u5341\u516d\u8fdb\u5236\u5f62\u5f0f\u5728\u6bcf\u6b21\u7a0b\u5e8f\u6682\u505c\u65f6\u6253\u5370 <code>r24</code> \u5bc4\u5b58\u5668\u7684\u503c <code>info registers</code> \u663e\u793a\u5bc4\u5b58\u5668\u7684\u5185\u5bb9 <code>info registers r24</code> \u663e\u793a <code>r24</code> \u5bc4\u5b58\u5668\u7684\u5185\u5bb9 <code>continue</code> \u7ee7\u7eed\u8fd0\u884c <code>next</code> \u5355\u6b65\u8c03\u8bd5\uff08\u4e0d\u8fdb\u5165\u51fd\u6570\uff09 <code>next n</code> \u6267\u884c <code>n</code> \u6b65 <code>step</code> \u5355\u6b65\u8c03\u8bd5\uff08\u8fdb\u5165\u51fd\u6570\uff09 <code>step n</code> \u6267\u884c <code>n</code> \u6b65 <code>backtrace</code> \u663e\u793a\u5f53\u524d\u5806\u6808 <code>list</code> \u67e5\u770b\u6e90\u7801 <code>list n</code> \u663e\u793a\u7b2c <code>n</code> \u884c\u524d\u540e10\u884c\u4ee3\u7801 <code>list func</code> \u663e\u793a <code>func</code> \u51fd\u6570\u7684\u6e90\u4ee3\u7801 <code>quit</code> \u9000\u51faGDB"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E6%90%AD%E5%BB%BA%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83/#_2","title":"\u53c2\u8003\u8d44\u6599","text":"<ol> <li>GCC Compilers for AVR</li> <li>buserror/simavr</li> <li>GDB\u5e38\u7528\u547d\u4ee4</li> <li>GDB User Manual</li> </ol>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9A%E4%BD%8D%E6%93%8D%E4%BD%9C%E5%92%8CMCU%E6%8E%A7%E5%88%B6%E6%8C%87%E4%BB%A4/","title":"AVR\u6c47\u7f16\uff08\u4e03\uff09\uff1a\u4f4d\u64cd\u4f5c\u548cMCU\u63a7\u5236\u6307\u4ee4","text":""},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9A%E4%BD%8D%E6%93%8D%E4%BD%9C%E5%92%8CMCU%E6%8E%A7%E5%88%B6%E6%8C%87%E4%BB%A4/#_1","title":"\u4f4d\u64cd\u4f5c\u6307\u4ee4","text":""},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9A%E4%BD%8D%E6%93%8D%E4%BD%9C%E5%92%8CMCU%E6%8E%A7%E5%88%B6%E6%8C%87%E4%BB%A4/#sbi-cbi","title":"<code>SBI</code> / <code>CBI</code>","text":"<p><code>SBI</code> \u6307\u4ee4\u7528\u4e8e\u8bbe\u7f6eI/O\u5bc4\u5b58\u5668\u4e2d\u7684\u7b2c <code>b</code> \u4f4d\uff0c <code>CBI</code> \u6307\u4ee4\u7528\u4e8e\u6e05\u9664I/O\u5bc4\u5b58\u5668\u4e2d\u7684\u7b2c <code>b</code> \u4f4d\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>SBI DDRB, 5     ; PB5\u8bbe\u4e3a\u8f93\u51fa\u6a21\u5f0f\nCBI PORTB, 5    ; PB5\u8f93\u51fa\u4f4e\u7535\u5e73\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9A%E4%BD%8D%E6%93%8D%E4%BD%9C%E5%92%8CMCU%E6%8E%A7%E5%88%B6%E6%8C%87%E4%BB%A4/#_2","title":"\u79fb\u4f4d","text":"<p><code>LSL</code> \u6307\u4ee4\u7528\u4e8e\u903b\u8f91\u5de6\u79fb\uff0c\u4f4e\u4f4d\u88650\u3002</p> <p><code>LSR</code> \u6307\u4ee4\u7528\u4e8e\u903b\u8f91\u53f3\u79fb\uff0c\u9ad8\u4f4d\u88650\u3002</p> <p><code>ASR</code> \u6307\u4ee4\u7528\u4e8e\u7b97\u672f\u53f3\u79fb\uff0c\u9ad8\u4f4d\u8865\u7b26\u53f7\u4f4d\u3002</p> <p><code>ROL</code> \u6307\u4ee4\u7528\u4e8e\u5faa\u73af\u5de6\u79fb\uff0c\u4f4e\u4f4d\u8865 <code>C</code> \u6807\u5fd7\u4f4d\uff0c\u9ad8\u4f4d\u8fdb\u5165 <code>C</code> \u6807\u5fd7\u4f4d\u3002</p> <p><code>ROR</code> \u6307\u4ee4\u7528\u4e8e\u5faa\u73af\u53f3\u79fb\uff0c\u9ad8\u4f4d\u8865 <code>C</code> \u6807\u5fd7\u4f4d\uff0c\u4f4e\u4f4d\u8fdb\u5165 <code>C</code> \u6807\u5fd7\u4f4d\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI R16, 0x88    ; R16 = 0x88\nLSR R16          ; R16 = 0x44\nLSL R16          ; R16 = 0x88\nASR R16          ; R16 = 0xC4\nSEC              ; C = 1\nROR R16          ; R16 = 0xE2, C = 0\nROL R16          ; R16 = 0xC4, C = 1\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9A%E4%BD%8D%E6%93%8D%E4%BD%9C%E5%92%8CMCU%E6%8E%A7%E5%88%B6%E6%8C%87%E4%BB%A4/#swap","title":"<code>SWAP</code>","text":"<p><code>SWAP</code> \u6307\u4ee4\u7528\u4e8e\u4ea4\u6362\u5bc4\u5b58\u5668\u7684\u9ad8\u4f4e4\u4f4d\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI R16, 0xA5    ; R16 = 0xA5\nSWAP R16         ; R16 = 0x5A\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9A%E4%BD%8D%E6%93%8D%E4%BD%9C%E5%92%8CMCU%E6%8E%A7%E5%88%B6%E6%8C%87%E4%BB%A4/#bset-bclr","title":"<code>BSET</code> / <code>BCLR</code>","text":"<p><code>BSET</code> \u7528\u4e8e\u8bbe\u7f6e <code>SREG</code> \u5bc4\u5b58\u5668\u4e2d\u7684\u7b2c <code>s</code> \u4f4d\uff0c <code>BCLR</code> \u7528\u4e8e\u6e05\u9664 <code>SREG</code> \u5bc4\u5b58\u5668\u4e2d\u7684\u7b2c <code>s</code> \u4f4d\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>BSET 0    ; C = 1\nBCLR 0    ; C = 0\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9A%E4%BD%8D%E6%93%8D%E4%BD%9C%E5%92%8CMCU%E6%8E%A7%E5%88%B6%E6%8C%87%E4%BB%A4/#bst-bld","title":"<code>BST</code> / <code>BLD</code>","text":"<p><code>BST</code> \u7528\u4e8e\u5c06\u5bc4\u5b58\u5668\u4e2d\u7684\u7b2c <code>b</code> \u4f4d\u4fdd\u5b58\u5230 <code>T</code> \u6807\u5fd7\u4f4d\uff0c <code>BLD</code> \u7528\u4e8e\u5c06 <code>T</code> \u6807\u5fd7\u4f4d\u52a0\u8f7d\u5230\u5bc4\u5b58\u5668\u7684\u7b2c <code>b</code> \u4f4d\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI R16, 0xAA\nBST R16, 1       ; T = 1\nBLD R16, 0       ; R16 = 0xAB\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9A%E4%BD%8D%E6%93%8D%E4%BD%9C%E5%92%8CMCU%E6%8E%A7%E5%88%B6%E6%8C%87%E4%BB%A4/#sex-clx","title":"<code>SEx</code> / <code>CLx</code>","text":"<p>\u5f62\u5982 <code>SEx</code> \u7684\u6307\u4ee4\u7528\u4e8e\u8bbe\u7f6e <code>SREG</code> \u5bc4\u5b58\u5668\u4e2d\u5bf9\u5e94\u7684\u6807\u5fd7\u4f4d\uff0c\u5f62\u5982 <code>CLx</code> \u7684\u6307\u4ee4\u7528\u4e8e\u6e05\u9664 <code>SREG</code> \u5bc4\u5b58\u5668\u4e2d\u5bf9\u5e94\u7684\u6807\u5fd7\u4f4d\uff0c\u8fd9\u4e24\u6761\u6307\u4ee4\u4f5c\u7528\u548c <code>BSET</code> / <code>BCLR</code> \u6307\u4ee4\u76f8\u540c\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>SEC    ; SREG = 0x01\nSEZ    ; SREG = 0x03\nSEN    ; SREG = 0x07\nSEV    ; SREG = 0x0F\nSES    ; SREG = 0x1F\nSEH    ; SREG = 0x3F\nSET    ; SREG = 0x7F\nSEI    ; SREG = 0xFF\nCLI    ; SREG = 0x7F\nCLT    ; SREG = 0x3F\nCLH    ; SREG = 0x1F\nCLS    ; SREG = 0x0F\nCLV    ; SREG = 0x07\nCLN    ; SREG = 0x03\nCLZ    ; SREG = 0x01\nCLC    ; SREG = 0x00\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9A%E4%BD%8D%E6%93%8D%E4%BD%9C%E5%92%8CMCU%E6%8E%A7%E5%88%B6%E6%8C%87%E4%BB%A4/#mcu","title":"MCU\u63a7\u5236\u6307\u4ee4","text":"<p><code>NOP</code> \u6307\u4ee4\u5360\u7528\u4e00\u4e2a\u5468\u671f\u800c\u4e0d\u505a\u4efb\u4f55\u64cd\u4f5c\u3002</p> <p><code>SLEEP</code> \u6307\u4ee4\u7528\u4e8e\u8fdb\u5165\u7761\u7720\u6a21\u5f0f\u3002</p> <p><code>WDR</code> \u6307\u4ee4\u7528\u4e8e\u590d\u4f4d\u770b\u95e8\u72d7\u3002</p> <p><code>BREAK</code> \u6307\u4ee4\u4f9b\u8c03\u8bd5\u7cfb\u7edf\u4f7f\u7528\uff0c\u5e94\u7528\u7a0b\u5e8f\u7528\u4e0d\u5230\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9A%E4%BD%8D%E6%93%8D%E4%BD%9C%E5%92%8CMCU%E6%8E%A7%E5%88%B6%E6%8C%87%E4%BB%A4/#_3","title":"\u53c2\u8003\u8d44\u6599","text":"<ol> <li>ATmega328P Datasheet</li> <li>AVR Instruction Set Manual</li> </ol>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/","title":"AVR\u6c47\u7f16\uff08\u4e09\uff09\uff1a\u5bfb\u5740\u65b9\u5f0f","text":"<p>AVR\u5177\u6709\u591a\u79cd\u5bfb\u5740\u65b9\u5f0f\uff0c\u5728\u4ecb\u7ecd\u5177\u4f53\u7684\u6c47\u7f16\u6307\u4ee4\u4e4b\u524d\uff0c\u6709\u5fc5\u8981\u5bf9\u5b83\u4eec\u505a\u4e00\u5b9a\u4e86\u89e3\u3002</p> <p>\u524d\u9762\u4ecb\u7ecd\u8fc7\uff0cAVR\u5c06\u5185\u5b58\u7a7a\u95f4\u5206\u4e3a\u591a\u4e2a\u90e8\u5206\uff1a\u5bc4\u5b58\u5668\u5806\u3001I/O\u7a7a\u95f4\u3001\u6570\u636e\u7a7a\u95f4\u3001\u7a0b\u5e8f\u7a7a\u95f4\u3002\u8fd9\u4e9b\u7a7a\u95f4\u652f\u6301\u7684\u6307\u4ee4\u548c\u5bfb\u5740\u65b9\u5f0f\u90fd\u5404\u4e0d\u76f8\u540c\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_1","title":"\u5bc4\u5b58\u5668\u5806\u7684\u5bfb\u5740\u65b9\u5f0f","text":"<p>AVR\u4e2d\u5bc4\u5b58\u5668\u5806\u7684\u5bfb\u5740\u65b9\u5f0f\u5206\u4e3a3\u79cd\uff1a\u7acb\u5373\u5bfb\u5740\u3001\u5355\u5bc4\u5b58\u5668\u5bfb\u5740\u3001\u53cc\u5bc4\u5b58\u5668\u5bfb\u5740\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_2","title":"\u7acb\u5373\u5bfb\u5740","text":"<p>\u6240\u8c13\u7acb\u5373\u5bfb\u5740\uff0c\u5c31\u662f\u6307\u64cd\u4f5c\u6570\u76f4\u63a5\u7f16\u7801\u5728\u6307\u4ee4\u4e2d\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u53ea\u6709 <code>R16</code> ~ <code>R31</code> \u5bc4\u5b58\u5668\u652f\u6301\u7acb\u5373\u5bfb\u5740\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>ANDI R16, 0x01    ; R16 &lt;- R16 &amp; 0x01\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_3","title":"\u5355\u5bc4\u5b58\u5668\u5bfb\u5740","text":"<p>\u5728\u5355\u5bc4\u5b58\u5668\u5bfb\u5740\u65b9\u5f0f\u4e0b\uff0c\u64cd\u4f5c\u6570\u5b58\u653e\u5728\u76ee\u7684\u5bc4\u5b58\u5668 <code>Rd</code> \u4e2d\u3002</p> <p>\u4f8b\u5982:</p> <pre><code>INC R16    ; R16 &lt;- R16 + 1\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_4","title":"\u53cc\u5bc4\u5b58\u5668\u5bfb\u5740","text":"<p>\u5728\u53cc\u5bc4\u5b58\u5668\u5bfb\u5740\u65b9\u5f0f\u4e0b\uff0c\u64cd\u4f5c\u6570\u5206\u522b\u5b58\u653e\u5728\u6e90\u5bc4\u5b58\u5668 <code>Rr</code> \u548c\u76ee\u7684\u5bc4\u5b58\u5668 <code>Rd</code> \u4e2d\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>ADD R16, R17    ; R16 &lt;- R16 + R17\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#io","title":"I/O\u7a7a\u95f4\u7684\u5bfb\u5740\u65b9\u5f0f","text":"<p>AVR\u4e2dI/O\u7a7a\u95f4\u5177\u6709\u72ec\u7acb\u7684\u5730\u5740\uff0c\u8303\u56f4\u4e3a0x00~0x3F\uff0c\u652f\u6301\u76f4\u63a5\u5bfb\u5740\u548c\u4f4d\u5bfb\u5740\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_5","title":"\u76f4\u63a5\u5bfb\u5740","text":"<p>\u5728\u76f4\u63a5\u5bfb\u5740\u65b9\u5f0f\u4e0b\uff0c\u64cd\u4f5c\u6570\u5730\u5740 <code>A</code> \u76f4\u63a5\u7f16\u7801\u5728\u6307\u4ee4\u4e2d\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>OUT PORTB, R16    ; PORTB &lt;- R16\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_6","title":"\u4f4d\u5bfb\u5740","text":"<p>I/O\u7a7a\u95f4\u4e2d\u5730\u5740\u4e3a0x00~0x1F\u7684\u533a\u57df\u652f\u6301\u6309\u4f4d\u8bbf\u95ee\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>SBI PORTB, 2    ; PORTB.2 &lt;- 1\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_7","title":"\u6570\u636e\u7a7a\u95f4\u7684\u5bfb\u5740\u65b9\u5f0f","text":"<p>AVR\u4e2d\u6570\u636e\u7a7a\u95f4\u5177\u67095\u79cd\u5bfb\u5740\u65b9\u5f0f\uff1a\u76f4\u63a5\u5bfb\u5740\u3001\u95f4\u63a5\u5bfb\u5740\u3001\u5e26\u524d\u7f00\u81ea\u51cf\u7684\u95f4\u63a5\u5bfb\u5740\u3001\u5e26\u540e\u7f00\u81ea\u589e\u7684\u95f4\u63a5\u5bfb\u5740\u3001\u5e26\u504f\u79fb\u91cf\u7684\u95f4\u63a5\u5bfb\u5740\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_8","title":"\u76f4\u63a5\u5bfb\u5740","text":"<p>\u5728\u76f4\u63a5\u5bfb\u5740\u65b9\u5f0f\u4e0b\uff0c\u64cd\u4f5c\u6570\u5730\u5740\u76f4\u63a5\u7f16\u7801\u5728\u6307\u4ee4\u4e2d\uff0c <code>Rd</code> / <code>Rr</code> \u6307\u5b9a\u76ee\u7684\u5bc4\u5b58\u5668/\u6e90\u5bc4\u5b58\u5668\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDS R16, 0X0100    ; R16 &lt;- (0X0100)\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_9","title":"\u95f4\u63a5\u5bfb\u5740","text":"<p>\u5728\u95f4\u63a5\u5bfb\u5740\u65b9\u5f0f\u4e0b\uff0c\u64cd\u4f5c\u6570\u5730\u5740\u5b58\u653e\u5728 <code>X</code> / <code>Y</code> / <code>Z</code> \u5bc4\u5b58\u5668\u4e2d\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LD R16, X    ; R16 &lt;- (X)\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_10","title":"\u5e26\u524d\u7f00\u81ea\u51cf\u7684\u95f4\u63a5\u5bfb\u5740","text":"<p>\u5728\u5e26\u524d\u7f00\u81ea\u51cf\u7684\u95f4\u63a5\u5bfb\u5740\u65b9\u5f0f\u4e0b\uff0c\u64cd\u4f5c\u6570\u5730\u5740\u5b58\u653e\u5728 <code>X</code> / <code>Y</code> / <code>Z</code> \u5bc4\u5b58\u5668\u4e2d\uff0c\u5e76\u4e14\u5728\u64cd\u4f5c\u4e4b\u524d <code>X</code> / <code>Y</code> / <code>Z</code> \u5148\u81ea\u51cf\u4e00\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LD R16, -X    ; X &lt;- X - 1, R16 &lt;- (X)\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_11","title":"\u5e26\u540e\u7f00\u81ea\u589e\u7684\u95f4\u63a5\u5bfb\u5740","text":"<p>\u5728\u5e26\u540e\u7f00\u81ea\u589e\u7684\u95f4\u63a5\u5bfb\u5740\u65b9\u5f0f\u4e0b\uff0c\u64cd\u4f5c\u6570\u5730\u5740\u5b58\u653e\u5728 <code>X</code> / <code>Y</code> / <code>Z</code> \u5bc4\u5b58\u5668\u4e2d\uff0c\u5e76\u4e14\u5728\u64cd\u4f5c\u4e4b\u540e <code>X</code> / <code>Y</code> / <code>Z</code> \u518d\u81ea\u589e\u4e00\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LD R16, X+    ; R16 &lt;- (X), X &lt;- X + 1\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_12","title":"\u5e26\u504f\u79fb\u91cf\u7684\u95f4\u63a5\u5bfb\u5740","text":"<p>\u5728\u5e26\u504f\u79fb\u91cf\u7684\u95f4\u63a5\u5bfb\u5740\u65b9\u5f0f\u4e0b\uff0c\u64cd\u4f5c\u6570\u5730\u5740\u7531 <code>Y</code> / <code>Z</code> \u5bc4\u5b58\u5668\u548c\u7f16\u7801\u5728\u6307\u4ee4\u4e2d\u7684\u504f\u79fb\u91cf <code>q</code> \u76f8\u52a0\u5f97\u51fa\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDD R16, Y+2    ; R16 &lt;- (Y + 2)\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_13","title":"\u7a0b\u5e8f\u7a7a\u95f4\u7684\u5bfb\u5740\u65b9\u5f0f","text":"<p>AVR\u4e2d\u7a0b\u5e8f\u7a7a\u95f4\u5177\u67095\u79cd\u5bfb\u5740\u65b9\u5f0f\uff1a\u5e38\u91cf\u5bfb\u5740\u3001\u5e26\u540e\u7f00\u81ea\u589e\u7684\u5e38\u91cf\u5bfb\u5740\u3001\u76f4\u63a5\u5bfb\u5740\u3001\u95f4\u63a5\u5bfb\u5740\u3001\u76f8\u5bf9\u5bfb\u5740\uff0c\u524d\u4e24\u79cd\u5bfb\u5740\u65b9\u5f0f\u7528\u4e8e\u8bbf\u95ee\u4f4d\u4e8e\u7a0b\u5e8f\u7a7a\u95f4\u7684\u5e38\u91cf\uff0c\u540e\u4e09\u79cd\u7528\u4e8e\u7a0b\u5e8f\u8df3\u8f6c\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_14","title":"\u5e38\u91cf\u5bfb\u5740","text":"<p>\u5728\u5e38\u91cf\u5bfb\u5740\u65b9\u5f0f\u4e0b\uff0c\u64cd\u4f5c\u6570\u5730\u5740\uff08\u5b57\u8282\u5730\u5740\uff09\u5b58\u653e\u5728 <code>Z</code> \u5bc4\u5b58\u5668\u4e2d\uff0c <code>Z</code> \u5bc4\u5b58\u5668\u4e2d\u9ad815\u4f4d\u6307\u5b9a\u5b57\u5730\u5740\uff0c\u6700\u4f4e\u4f4d\u4e3a0\u8868\u793a\u8bbf\u95ee\u7684\u662f\u5b57\u7684\u4f4e\u4f4d\u5b57\u8282\uff0c1\u8868\u793a\u8bbf\u95ee\u7684\u662f\u5b57\u7684\u9ad8\u4f4d\u5b57\u8282\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LPM R16, Z    ; R16 &lt;- (Z)\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_15","title":"\u5e26\u540e\u7f00\u81ea\u589e\u7684\u5e38\u91cf\u5bfb\u5740","text":"<p>\u5728\u5e26\u540e\u7f00\u81ea\u589e\u7684\u5e38\u91cf\u5bfb\u5740\u65b9\u5f0f\u4e0b\uff0c\u64cd\u4f5c\u6570\u5730\u5740\uff08\u5b57\u8282\u5730\u5740\uff09\u5b58\u653e\u5728 <code>Z</code> \u5bc4\u5b58\u5668\u4e2d\uff0c\u5e76\u4e14\u5728\u64cd\u4f5c\u4e4b\u540e <code>Z</code> \u5bc4\u5b58\u5668\u81ea\u589e\u4e00\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LPM R16, Z+    ; R16 &lt;- (Z), Z &lt;- Z + 1\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_16","title":"\u76f4\u63a5\u5bfb\u5740","text":"<p>\u5728\u76f4\u63a5\u5bfb\u5740\u65b9\u5f0f\u4e0b\uff0c\u7a0b\u5e8f\u63a5\u4e0b\u6765\u7684\u6267\u884c\u5730\u5740\uff08\u5b57\u5730\u5740\uff09 <code>k</code> \u76f4\u63a5\u7f16\u7801\u5728\u6307\u4ee4\u4e2d\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>    JMP FUNC    ; PC &lt;- FUNC\n...\nFUNC:\n...\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_17","title":"\u95f4\u63a5\u5bfb\u5740","text":"<p>\u5728\u95f4\u63a5\u5bfb\u5740\u65b9\u5f0f\u4e0b\uff0c\u7a0b\u5e8f\u63a5\u4e0b\u6765\u7684\u6267\u884c\u5730\u5740\uff08\u5b57\u5730\u5740\uff09\u5b58\u653e\u5728 <code>Z</code> \u5bc4\u5b58\u5668\u4e2d\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>IJMP    ; PC &lt;- Z\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_18","title":"\u76f8\u5bf9\u5bfb\u5740","text":"<p>\u5728\u76f8\u5bf9\u5bfb\u5740\u65b9\u5f0f\u4e0b\uff0c\u7a0b\u5e8f\u63a5\u4e0b\u6765\u7684\u6267\u884c\u5730\u5740\uff08\u5b57\u5730\u5740\uff09\u4e3a <code>PC</code> + <code>k</code> + 1\uff0c <code>k</code> \u7684\u8303\u56f4\u4e3a-2048~2047\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>    RJMP FUNC    ; PC &lt;- FUNC \u6c47\u7f16\u5668\u4f1a\u81ea\u52a8\u8ba1\u7b97k\u7684\u503c\n...\nFUNC:            ; FUNC\u4e0eRJMP\u6307\u4ee4\u7684\u8ddd\u79bb\u4e0d\u80fd\u8d85\u8fc7-2048~2047\n...\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/#_19","title":"\u53c2\u8003\u8d44\u6599","text":"<ol> <li>AVR Instruction Set Manual</li> </ol>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9AAVR%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/","title":"AVR\u6c47\u7f16\uff08\u4e8c\uff09\uff1aAVR\u67b6\u6784\u4ecb\u7ecd","text":""},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9AAVR%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/#atmega328p","title":"ATmega328P\u4ecb\u7ecd","text":"<p>ATmega328P\u662fAtmel\u516c\u53f8\uff08\u73b0Microchip\u516c\u53f8\uff09\u63a8\u51fa\u7684\u4e00\u4e2a\u57fa\u4e8eAVR\u67b6\u6784\u7684\u9ad8\u6027\u80fd\u4f4e\u529f\u8017\u5355\u7247\u673a\uff0c\u62e5\u670932KB\u7684Flash\u30011KB\u7684EEPROM\u4ee5\u53ca2KB\u7684SRAM\u7b49\u8d44\u6e90\uff0c\u5177\u4f53\u5982\u4e0b\u8868\uff1a</p> \u8d44\u6e90 \u4e3b\u8981\u7279\u5f81 Flash 32KB SRAM 2048B \u9891\u7387 16MHz EEPROM 1024B \u5b9a\u65f6\u5668 2\u4e2a8bit\uff0c1\u4e2a16bit PWM 6\u901a\u9053 ADC 8\u901a\u905310bit \u6bd4\u8f83\u5668 1 GPIO 23 USART 1 SPI 1 TWI 1 \u770b\u95e8\u72d7 1 RTC 1 \u7535\u538b 0~8MHz @ 2.7~5.5V  0~16MHz @ 4.5~5.5V <p>\u5982\u4e0b\u56fe\u6240\u793a\uff0cATmega328P\u7684AVR\u6838\u5fc3\u901a\u8fc7\u6570\u636e\u603b\u7ebf\u4e0e\u5404\u4e2a\u5916\u8bbe\u76f8\u8fde\uff0c\u53e6\u5916\u4e5f\u53ef\u4ee5\u53d1\u73b0AVR\u91c7\u7528\u7684\u662f\u54c8\u4f5b\u67b6\u6784\uff0cFlash\u548cSRAM\u76f8\u4e92\u72ec\u7acb\uff0c\u901a\u8fc7\u4e0d\u540c\u7684\u603b\u7ebf\u4e0eAVR\u6838\u5fc3\u76f8\u8fde\u3002</p> <p></p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9AAVR%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/#avr","title":"AVR\u5185\u5b58\u7a7a\u95f4","text":"<p>AVR\u5185\u6838\u5305\u542b\u4e24\u5757\u5185\u5b58\u7a7a\u95f4\uff1a\u6570\u636e\u7a7a\u95f4\uff08data memory\uff09\u548c\u7a0b\u5e8f\u7a7a\u95f4\uff08program memory\uff09\uff0c\u53e6\u5916\uff0cATmega328P\u8fd8\u5305\u542b\u989d\u5916\u7528\u4e8e\u6570\u636e\u5b58\u50a8\u7684EEPROM\u7a7a\u95f4\uff08EEPROM memory\uff09\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9AAVR%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/#program-memory","title":"Program Memory","text":"<p>ATmega328P\u7684\u7a0b\u5e8f\u6307\u4ee4\u5b58\u50a8\u5728\u7247\u4e0a\u768432KB Flash\u4e2d\uff0c\u7531\u4e8eAVR\u6307\u4ee4\u90fd\u662f16\u4f4d\u621632\u4f4d\u7684\uff0c\u56e0\u6b64Flash\u662f\u4ee516\u4f4d\uff081\u4e2a\u5b57\uff09\u4e3a\u5355\u5143\u7ec4\u7ec7\u7684\uff0c\u537316Kx16bit\uff0c\u5730\u5740\u7a7a\u95f4\u4e3a0x0000~0x3FFF\u3002</p> <p>ATmega328P\u7684\u7a0b\u5e8f\u7a7a\u95f4\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff1aApplication\u548cBootloader\u3002Bootloader\u5b58\u653e\u5728\u9ad8\u5730\u5740\u5904\uff0c\u5927\u5c0f\u53ef\u4ee5\u901a\u8fc7fuse\u76f8\u5173\u4f4d\u8fdb\u884c\u914d\u7f6e\uff0c\u6709256/512/1024/2048\u5b574\u79cd\u9009\u62e9\u3002</p> <p>\u53ef\u4ee5\u901a\u8fc7 <code>LPM</code> \u6307\u4ee4\u8bbf\u95ee\u6574\u4e2a\u7a0b\u5e8f\u7a7a\u95f4\u3002</p> <p></p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9AAVR%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/#data-memory","title":"Data Memory","text":"<p>ATmega328P\u7684\u6570\u636e\u7a7a\u95f4\u5927\u5c0f\u4e3a2303\u5b57\u8282\uff0c\u75314\u4e2a\u90e8\u5206\u7ec4\u6210\uff1a</p> <ul> <li>\u5bc4\u5b58\u5668\u5806\uff1a\u5305\u542b32\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u3002<ul> <li>\u901a\u8fc7 <code>MOV</code> / <code>MOVW</code> \u6307\u4ee4\u8bbf\u95ee\uff0c\u5730\u5740\u4e3a0x00~0x1F\u3002</li> </ul> </li> <li>I/O\u7a7a\u95f4\uff1a\u5305\u542b64\u4e2aI/O\u5bc4\u5b58\u5668\u3002<ul> <li>\u901a\u8fc7 <code>IN</code> / <code>OUT</code> \u6307\u4ee4\u8bbf\u95ee\u65f6\uff0cI/O\u7a7a\u95f4\u72ec\u7acb\u7f16\u5740\u52300x00~0x3F\uff1b</li> <li>\u901a\u8fc7 <code>LD</code> / <code>LDS</code> / <code>LDD</code> / <code>ST</code> / <code>STS</code> / <code>STD</code> \u8bbf\u95ee\u65f6\uff0c\u5730\u5740\u4e3aI/O\u5730\u5740+0x20\uff1b</li> <li>I/O\u5730\u5740\u4e3a0x00~0x1F\u7684\u5bc4\u5b58\u5668\u652f\u6301\u6309\u4f4d\u8bbf\u95ee\uff0c\u53ef\u4ee5\u901a\u8fc7 <code>SBI</code> / <code>CBI</code> / <code>SBIS</code> / <code>SBIC</code> \u6307\u4ee4\u8bbf\u95ee\u3002</li> </ul> </li> <li>\u6269\u5c55I/O\u7a7a\u95f4\uff1a\u5305\u542b160\u4e2a\u6269\u5c55I/O\u5bc4\u5b58\u5668\u3002<ul> <li>\u53ea\u80fd\u901a\u8fc7 <code>LD</code> / <code>LDS</code> / <code>LDD</code> / <code>ST</code> / <code>STS</code> / <code>STD</code> \u6307\u4ee4\u8bbf\u95ee\u3002</li> </ul> </li> <li>SRAM\u7a7a\u95f4\uff1a2KB\uff0c\u5730\u5740\u4ece0x0100\u5f00\u59cb\u3002</li> </ul> <p>\u6570\u636e\u7a7a\u95f4\u652f\u63015\u79cd\u5bfb\u5740\u65b9\u5f0f\uff1a</p> <ul> <li>\u76f4\u63a5\u5bfb\u5740\uff08direct\uff09\uff1b</li> <li>\u95f4\u63a5\u5bfb\u5740\uff08indirect\uff09\uff1b</li> <li>\u5e26\u504f\u79fb\u91cf\u7684\u95f4\u63a5\u5bfb\u5740\uff08indirect with displacement\uff09\uff1b</li> <li>\u5e26\u524d\u7f00\u81ea\u51cf\u7684\u95f4\u63a5\u5bfb\u5740\uff08indirect with pre-decrement\uff09\uff1b</li> <li>\u5e26\u540e\u7f00\u81ea\u589e\u7684\u95f4\u63a5\u5bfb\u5740\uff08indirect with post-increment\uff09\u3002</li> </ul> <p></p> <p>\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u53ef\u4ee5\u770b\u51fa\u5bf9SRAM\u7684\u8bbf\u95ee\u9700\u8981\u8017\u8d392\u4e2aCPU\u5468\u671f\u3002</p> <p></p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9AAVR%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/#eeprom-memory","title":"EEPROM Memory","text":"<p>ATmega328P\u62e5\u67091KB\u7684EEPROM\u7a7a\u95f4\uff0c\u80fd\u591f\u5bf9\u5176\u8fdb\u884c\u5355\u5b57\u8282\u7684\u8bfb\u5199\u64cd\u4f5c\uff0c\u9700\u8981\u901a\u8fc7 <code>EEARH</code> \u3001 <code>EEARL</code> \u3001 <code>EEDR</code> \u3001 <code>EECR</code> \u5bc4\u5b58\u5668\u8fdb\u884c\u8bbf\u95ee\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9AAVR%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/#avr_1","title":"AVR\u5185\u6838","text":"<p>\u5982\u4e0b\u56fe\u6240\u793a\uff0cAVR\u5185\u6838\u91c7\u7528\u54c8\u4f5b\u67b6\u6784\uff0c\u7a0b\u5e8f\u7a7a\u95f4\u548c\u6570\u636e\u7a7a\u95f4\u76f8\u4e92\u72ec\u7acb\u3002\u6307\u4ee4\u4ee5\u5355\u7ea7\u6d41\u6c34\u7ebf\u65b9\u5f0f\u6267\u884c\uff0c\u6267\u884c\u4e00\u6761\u6307\u4ee4\u7684\u540c\u65f6\u9884\u53d6\u51fa\u4e0b\u4e00\u6761\u6307\u4ee4\u3002</p> <p></p> <p>AVR\u5185\u6838\u7531ALU\uff08\u7b97\u672f\u903b\u8f91\u5355\u5143\uff09\u3001 <code>SREG</code> \uff08\u72b6\u6001\u5bc4\u5b58\u5668\uff09\u3001\u901a\u7528\u5bc4\u5b58\u5668\u5806\u3001 <code>SP</code> \uff08\u6700\u6808\u6307\u9488\uff09\u3001 <code>PC</code> \uff08\u7a0b\u5e8f\u8ba1\u6570\u5668\uff09\u6784\u6210\u3002</p> <p>ALU\u80fd\u591f\u4ee5\u5355\u5468\u671f\u7684\u65f6\u95f4\u5bf932\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u8fdb\u884c\u7b97\u672f\u3001\u903b\u8f91\u3001\u4f4d\u64cd\u4f5c\uff0c\u4e00\u4e9b\u5b9e\u73b0\u4e2d\u8fd8\u652f\u6301\u4e58\u6cd5\u8fd0\u7b97\u3002</p> <p>\u901a\u7528\u5bc4\u5b58\u5668\u5806\u652f\u6301\u4ee5\u4e0b4\u79cd\u64cd\u4f5c\uff1a</p> <ul> <li>1\u4e2a8\u4f4d\u64cd\u4f5c\u6570\uff0c1\u4e2a8\u4f4d\u7ed3\u679c\uff1b</li> <li>2\u4e2a8\u4f4d\u64cd\u4f5c\u6570\uff0c1\u4e2a8\u4f4d\u7ed3\u679c\uff1b</li> <li>2\u4e2a8\u4f4d\u64cd\u4f5c\u6570\uff0c1\u4e2a16\u4f4d\u7ed3\u679c\uff1b</li> <li>1\u4e2a16\u4f4d\u64cd\u4f5c\u6570\uff0c1\u4e2a16\u4f4d\u7ed3\u679c\u3002</li> </ul> <p>\u5176\u4e2d\uff0c\u53ea\u6709 <code>R16</code> \u81f3 <code>R31</code> \u652f\u6301\u7acb\u5373\u5bfb\u5740\uff0c<code>R26</code> \u81f3 <code>R31</code> \u53ef\u4ee5\u4e24\u4e24\u7ec4\u5408\u4e3a\u7d22\u5f15\u5bc4\u5b58\u5668 <code>X</code> \u3001 <code>Y</code> \u3001 <code>Z</code> \uff0c\u4f9b\u95f4\u63a5\u5bfb\u5740\u65f6\u4f7f\u7528\u3002</p> <p></p> <p><code>SREG</code> \uff08\u72b6\u6001\u5bc4\u5b58\u5668\uff09\u5305\u542b8\u4e2a\u6807\u5fd7\u4f4d\uff1a</p> <p></p> \u6807\u5fd7\u4f4d \u540d\u79f0 \u63cf\u8ff0 <code>I</code> \u4e2d\u65ad\u4f7f\u80fd\u4f4d \u7f6e\u4f4d\u4f7f\u80fd\u4e2d\u65ad\uff0c\u4f7f\u7528 <code>SEL</code> / <code>CLI</code> \u6307\u4ee4\u8bbf\u95ee <code>T</code> \u4f20\u8f93\u4f4d \u4f7f\u7528 <code>BLD</code> / <code>BST</code> \u6307\u4ee4\u8bbf\u95ee <code>H</code> \u534a\u8fdb\u4f4d\u6807\u5fd7 \u5f53bit 3\u5411bit 4\u8fdb\u4f4d\u65f6\u7f6e\u4f4d <code>S</code> \u7b26\u53f7\u4f4d <code>S</code> = <code>N</code> xor <code>V</code> <code>V</code> \u6ea2\u51fa\u6807\u5fd7 \u7ed3\u679c\u8d85\u8fc7\u7b26\u53f7\u6570\u8303\u56f4\u65f6\u7f6e\u4f4d <code>N</code> \u8d1f\u6570\u6807\u5fd7 \u7ed3\u679c\u662f\u8d1f\u6570\u65f6\u7f6e\u4f4d <code>Z</code> \u96f6\u6807\u5fd7 \u7ed3\u679c\u4e3a0\u65f6\u7f6e\u4f4d <code>C</code> \u8fdb\u4f4d\u6807\u5fd7 \u7ed3\u679c\u8d85\u8fc7\u65e0\u7b26\u53f7\u6570\u8303\u56f4\u65f6\u7f6e\u4f4d <p><code>SP</code> \uff08\u5806\u6808\u6307\u9488\uff09\u4f4d\u4e8eI/O\u7a7a\u95f4\uff0c\u7528\u4e8e\u5b58\u50a8\u5c40\u90e8\u53d8\u91cf\u3001\u4e2d\u65ad\u548c\u5b50\u7a0b\u5e8f\u7684\u8fd4\u56de\u5730\u5740\u3002\u5806\u6808\u4ece\u5730\u5740\u9ad8\u5904\u5f80\u4f4e\u5904\u589e\u957f\uff0c <code>SP</code> \u6307\u5411\u4e0b\u4e00\u4e2a\u53ef\u7528\u7684\u4f4d\u7f6e\uff08\u5373\u7a7a\u51cf\u6808\uff09\u3002</p> <p></p> <p><code>PC</code> \uff08\u7a0b\u5e8f\u8ba1\u6570\u5668\uff09\u6307\u5411\u4e0b\u4e00\u6761\u6267\u884c\u6307\u4ee4\u7684\u5730\u5740\u3002ATmega328P\u7684 <code>PC</code> \u4e3a14\u4f4d\u5bbd\u5ea6\uff0c\u7531\u4e8eFlash\u5b58\u50a8\u5355\u5143\u662f16\u4f4d\u5bbd\uff0c\u6240\u4ee5\u53ef\u4ee5\u5bfb\u57402^14=16K\u4e2a\u5b57\uff08\u537332KB\uff09\u3002\u4e0a\u7535\u65f6\uff0c <code>PC</code> \u7684\u503c\u4e3a0x0000\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9AAVR%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/#_1","title":"\u53c2\u8003\u8d44\u6599","text":"<ol> <li>ATmega328P Datasheet</li> <li>Programming and Interfacing ATMEL's AVRs</li> </ol>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/","title":"AVR\u6c47\u7f16\uff08\u4e94\uff09\uff1a\u7b97\u672f\u548c\u903b\u8f91\u6307\u4ee4","text":""},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/#_1","title":"\u7b97\u672f\u8fd0\u7b97\u6307\u4ee4","text":"<p>AVR\u4e2d\u5bf9\u4e8e\u7b97\u672f\u8fd0\u7b97\u63d0\u4f9b\u4e86\u52a0\u6cd5\u3001\u51cf\u6cd5\u548c\u4e58\u6cd5\u6307\u4ee4\uff0c\u6ca1\u6709\u9664\u6cd5\u6307\u4ee4\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/#add","title":"<code>ADD</code>","text":"<p><code>ADD</code> \u6307\u4ee4\u7528\u4e8e\u6267\u884c\u52a0\u6cd5\u64cd\u4f5c\uff0c\u76f8\u5173\u7684\u53d8\u4f53\u6307\u4ee4\u6709\uff1a\u4e00\u822c\u52a0\u6cd5 <code>ADD</code> \u3001\u5e26\u8fdb\u4f4d\u52a0\u6cd5 <code>ADC</code> \u300116\u4f4d\u7acb\u5373\u6570\u52a0\u6cd5 <code>ADIW</code> \u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI R16, 0x01    ; R16 = 0x01\nLDI R17, 0x02    ; R17 = 0x02\nADD R16, R17     ; R16 = 0x03\nSEC              ; C = 1\nADC R16, R17     ; R16 = 0x06, C = 0\nLDI R25, 0x0F    ; R25 = 0x0F\nLDI R24, 0xF0    ; R24 = 0xF0\nADIW R24, 0x10   ; R25:R24 = 0x1000\n</code></pre> <p>\u6ce8\u610f\uff1aAVR\u4e0d\u652f\u63018\u4f4d\u6570\u7684\u7acb\u5373\u6570\u52a0\u6cd5\uff0c\u5373\u6ca1\u6709 <code>ADDI</code> / <code>ADCI</code> \u8fd9\u6837\u7684\u6307\u4ee4\uff01</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/#sub","title":"<code>SUB</code>","text":"<p><code>SUB</code> \u6307\u4ee4\u7528\u4e8e\u6267\u884c\u51cf\u6cd5\u64cd\u4f5c\uff0c\u76f8\u5173\u7684\u53d8\u4f53\u6307\u4ee4\u6709\uff1a\u4e00\u822c\u51cf\u6cd5 <code>SUB</code> \u3001\u7acb\u5373\u6570\u51cf\u6cd5 <code>SUBI</code> \u3001\u5e26\u8fdb\u4f4d\u7684\u51cf\u6cd5 <code>SUBC</code> \u3001\u5e26\u8fdb\u4f4d\u7684\u7acb\u5373\u6570\u51cf\u6cd5 <code>SBCI</code> \u300116\u4f4d\u7acb\u5373\u6570\u51cf\u6cd5 <code>SBIW</code> \u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI R16, 0x81     ; R16 = 0x81\nLDI R17, 0x80     ; R17 = 0x80\nSUB R16, R17      ; R16 = 0x01\nSUBI R17, 0x10    ; R17 = 0x70\nSEC               ; C = 1\nLDI R16, 0x80     ; R16 = 0x80\nSBC R16, R17      ; R16 = 0x0F, C = 0\nSEC               ; C = 1\nSBCI R16, 0x02    ; R16 = 0x0C, C = 0\nLDI R25, 0x02     ; R25 = 0x02\nLDI R24, 0x03     ; R24 = 0x03\nSBIW R24, 0x04    ; R25:R24 = 0x01FF\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/#inc-dec","title":"<code>INC</code> / <code>DEC</code>","text":"<p><code>INC</code> \u6307\u4ee4\u7528\u4e8e\u6267\u884c\u52a0\u4e00\u64cd\u4f5c\uff0c <code>DEC</code> \u6307\u4ee4\u7528\u4e8e\u6267\u884c\u51cf\u4e00\u64cd\u4f5c\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e24\u6761\u6307\u4ee4\u90fd\u4e0d\u4f1a\u5f71\u54cd\u6807\u5fd7\u4f4d <code>C</code> \u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI R16, 0x7F    ; R16 = 0x7F\nINC R16          ; R16 = 0x80\nDEC R16          ; R16 = 0x7F\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/#mul","title":"<code>MUL</code>","text":"<p><code>MUL</code> \u6307\u4ee4\u7528\u4e8e\u6267\u884c\u4e58\u6cd5\u64cd\u4f5c\uff0c\u8ba1\u7b97\u7ed3\u679c\u5b58\u653e\u5728 <code>R0</code> \u548c <code>R1</code> \u5bc4\u5b58\u5668\u4e2d\u3002\u9ed8\u8ba4\u6267\u884c\u7684\u662f\u65e0\u7b26\u53f7\u6570\u4e58\u6cd5\uff0c\u540e\u7f00\u5e26 <code>S</code> \u8868\u793a\u6267\u884c\u7684\u662f\u7b26\u53f7\u6570\u4e58\u6cd5\uff0c\u540e\u7f00\u5e26 <code>SU</code> \u8868\u793a\u6267\u884c\u7684\u662f\u7b26\u53f7\u6570\u4e0e\u65e0\u7b26\u53f7\u6570\u4e58\u6cd5\uff0c\u524d\u7f00\u5e26 <code>F</code> \u8868\u793a\u6267\u884c\u5206\u6570\u4e58\u6cd5\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI R16, 0xFE      ; R16 = 0xFE (-2/254)\nLDI R17, 0x03      ; R17 = 0x03 (3)\nMUL R16, R17       ; R1:R0 = 0x02FA (762)\nMULS R16, R17      ; R1:R0 = 0xFFFA (-6)\nMULSU R16, R17     ; R1:R0 = 0xFFFA (-6)\nFMUL R16, R17      ; R1:R0 = 0x05F4 (1524)\nFMULS R16, R17     ; R1:R0 = 0xFFF4 (-12)\nFMULSU R16, R17    ; R1:R0 = 0xFFF4 (-12)\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/#_2","title":"\u903b\u8f91\u8fd0\u7b97\u6307\u4ee4","text":""},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/#and-or-eor","title":"<code>AND</code> / <code>OR</code> / <code>EOR</code>","text":"<p><code>AND</code> \u7528\u4e8e\u6267\u884c\u201c\u4e0e\u201d\u64cd\u4f5c\uff0c <code>OR</code> \u7528\u4e8e\u6267\u884c\u201c\u6216\u201d\u64cd\u4f5c\uff0c <code>EOR</code> \u7528\u4e8e\u6267\u884c\u201c\u5f02\u6216\u201d\u64cd\u4f5c\uff0c\u540e\u7f00\u5e26 <code>I</code> \u8868\u793a\u64cd\u4f5c\u6570\u662f\u7acb\u5373\u6570\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI R16, 0xAA     ; R16 = 0xAA\nLDI R17, 0x0F     ; R17 = 0x0F\nAND R16, R17      ; R16 = 0x0A\nANDI R16, 0x03    ; R16 = 0x02\nOR R16, R17       ; R16 = 0x0F\nORI R16, 0xAA     ; R16 = 0xAF\nEOR R16, R17      ; R16 = 0xA0\n</code></pre> <p>\u6ce8\u610f\uff1aAVR\u4e2d\u201c\u5f02\u6216\u201d\u64cd\u4f5c\u4e0d\u652f\u6301\u7acb\u5373\u6570\uff0c\u5373\u6ca1\u6709 <code>EORI</code> \u8fd9\u6837\u7684\u6307\u4ee4\uff01</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/#com-neg","title":"<code>COM</code> / <code>NEG</code>","text":"<p><code>COM</code> \u6307\u4ee4\u7528\u4e8e\u8ba1\u7b97\u53cd\u7801\uff08\u5bf9\u539f\u7801\u53d6\u53cd\uff09\uff0c <code>NEG</code> \u6307\u4ee4\u7528\u4e8e\u8ba1\u7b97\u8865\u7801\uff08\u5bf9\u539f\u7801\u53d6\u53cd\u52a0\u4e00\uff09\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI R16, 0xA5    ; R16 = 0xA5\nCOM R16          ; R16 = 0x5A\nNEG R16          ; R16 = 0xA6\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/#sbr-cbr","title":"<code>SBR</code> / <code>CBR</code>","text":"<p><code>SER</code> \u6307\u4ee4\u7528\u4e8e\u6839\u636e\u63a9\u7801 <code>K</code> \u8bbe\u7f6e\u5bc4\u5b58\u5668\u4e2d\u7684\u67d0\u4e9b\u4f4d\uff0c\u4e0e <code>ORI</code> \u6307\u4ee4\u4f5c\u7528\u76f8\u540c\u3002 <code>CBR</code> \u6307\u4ee4\u7528\u4e8e\u6839\u636e\u63a9\u7801 <code>K</code> \u6e05\u9664\u5bc4\u5b58\u5668\u4e2d\u7684\u67d0\u4e9b\u4f4d\uff0c\u5373\u6267\u884c\u201c\u4e0e\u975e\u201d\u64cd\u4f5c\u3002</p> <pre><code>LDI R16, 0x0F    ; R16 = 0x0F\nSBR R16, 0x55    ; R16 = 0x5F\nCBR R16, 0x55    ; R16 = 0x0A\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/#tst-clr-ser","title":"<code>TST</code> / <code>CLR</code> / <code>SER</code>","text":"<p><code>TST</code> \u6307\u4ee4\u7528\u4e8e\u6d4b\u8bd5\u5bc4\u5b58\u5668\u7684\u503c\u662f\u5426\u662f\u96f6\u6216\u8005\u8d1f\u6570\uff0c <code>CLR</code> \u6307\u4ee4\u5c06\u5bc4\u5b58\u5668\u503c\u8bbe\u4e3a0\uff0c <code>SER</code> \u6307\u4ee4\u5c06\u5bc4\u5b58\u5668\u503c\u8bbe\u4e3a0xFF\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI R16, 0xAA    ; R16 = 0xAA\nTST R16          ; S = 1, V = 0, N = 1, Z = 0\nCLR R16          ; R16 = 0, S = 0, V = 0, N = 0, Z = 1\nSER R16          ; R16 = 0xFF\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/#_3","title":"\u72b6\u6001\u6807\u5fd7\u4f4d","text":"<p>\u548c\u4e0a\u4e00\u7bc7\u4ecb\u7ecd\u7684\u6570\u636e\u4f20\u9001\u6307\u4ee4\u4e0d\u540c\uff0c\u7b97\u672f\u548c\u903b\u8f91\u6307\u4ee4\u4f1a\u6539\u53d8 <code>SREG</code> \u5bc4\u5b58\u5668\u4e2d\u7684\u6807\u5fd7\u4f4d\uff0c\u4e0b\u9762\u4ecb\u7ecd\u5176\u4e2d\u6700\u5e38\u7528\u76844\u4e2a\uff1a <code>Z</code> \u3001 <code>N</code> \u3001 <code>V</code> \u3001 <code>C</code> \u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/#z","title":"<code>Z</code> \u6807\u5fd7\u4f4d","text":"<p><code>Z</code> \u6807\u5fd7\u4f4d\u6307\u793a\u8ba1\u7b97\u7ed3\u679c\u662f\u5426\u4e3a0\uff0c\u5f53\u7ed3\u679c\u4e3a0\u65f6\u7f6e\u4f4d\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI R16, 5     ;             Z = ?\nSUBI R16, 2    ; result = 3, Z = 0\nSUBI R16, 3    ; result = 2, Z = 1\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/#n","title":"<code>N</code> \u6807\u5fd7\u4f4d","text":"<p><code>N</code> \u6807\u5fd7\u4f4d\u6307\u793a\u8ba1\u7b97\u7ed3\u679c\u662f\u5426\u4e3a\u8d1f\u6570\uff0c\u5f53\u7ed3\u679c\u5c0f\u4e8e0\u65f6\u7f6e\u4f4d\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI R16, 1      ;              N = ?, Z = ?\nLDI R17, 2      ;              N = ?, Z = ?\nADD R16, R17    ; result = 3,  N = 0, Z = 0\nSUBI R16, 3     ; result = 0,  N = 0, Z = 1\nSUBI R16, 1     ; result = -1, N = 1, Z = 0\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/#c-v","title":"<code>C</code> / <code>V</code> \u6807\u5fd7\u4f4d","text":"<p><code>C</code> \u6807\u5fd7\u4f4d\u6307\u793a\u8ba1\u7b97\u7ed3\u679c\u662f\u5426\u8d85\u8fc7\u65e0\u7b26\u53f7\u6570\u8303\u56f4\uff0c\u5f53\u7ed3\u679c\u8d85\u8fc7[0, 255]\u65f6\u7f6e\u4f4d\u3002</p> <p><code>V</code> \u6807\u5fd7\u4f4d\u6307\u793a\u8ba1\u7b97\u7ed3\u679c\u662f\u5426\u8d85\u8fc7\u7b26\u53f7\u6570\u8303\u56f4\uff0c\u5f53\u7ed3\u679c\u8d85\u8fc7[-128, 127]\u65f6\u7f6e\u4f4d\u3002</p> <p>\u6bd4\u5982\uff0c\u5bf9\u4e8e0x7F+0x01=0x80\uff0c\u4ece\u65e0\u7b26\u53f7\u6570\u89d2\u5ea6\u770b\uff0c\u5c31\u662f127+1=128\uff0c\u6ca1\u6709\u8d85\u8fc7\u65e0\u7b26\u53f7\u6570\u8303\u56f4\uff0c\u6545 <code>C</code> \u4e3a0\u3002\u4ece\u7b26\u53f7\u6570\u89d2\u5ea6\u770b\uff0c127+1=128(-128)\uff0c\u8d85\u8fc7\u4e86\u7b26\u53f7\u6570\u8303\u56f4\uff0c\u6545 <code>V</code> \u4e3a1\u3002</p> <p>\u518d\u6bd4\u5982\uff0c\u5bf9\u4e8e0xFE+0x02=0x00\uff0c\u4ece\u65e0\u7b26\u53f7\u6570\u89d2\u5ea6\u770b\uff0c\u4e3a254+2=256(0)\uff0c\u8d85\u8fc7\u4e86\u65e0\u7b26\u53f7\u6570\u8303\u56f4\uff0c\u6545 <code>C</code> \u4e3a1\u3002\u4ece\u7b26\u53f7\u6570\u89d2\u5ea6\u770b\uff0c-2+2=0\uff0c\u6ca1\u6709\u8d85\u8fc7\u7b26\u53f7\u6570\u8303\u56f4\uff0c\u6545 <code>V</code> \u4e3a0\u3002</p> <p>\u66f4\u591a\u4f8b\u5b50\uff1a</p> <pre><code>LDI R17, 4      ;                           N = ?, Z = ?, V = ?, C = ?\nLDI R18, 2      ;                           N = ?, Z = ?, V = ?, C = ?\nLDI R19, 1      ;                           N = ?, Z = ?, V = ?, C = ?\nLDI R16, 250    ;                           N = ?, Z = ?, V = ?, C = ?\nADD R16, R17    ; result = 0xFE/-2/254,     N = 1, Z = 0, V = 0, C = 0\nADD R16, R18    ; result = 0x00/0/256(0),   N = 0, Z = 1, V = 0, C = 1\nADD R16, R19    ; result = 0x01/1/1,        N = 0, Z = 0, V = 0, C = 0\nSUBI R16, 2     ; result = 0xFF/-1/-1(255), N = 1, Z = 0, V = 0, C = 1\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E7%AE%97%E6%9C%AF%E5%92%8C%E9%80%BB%E8%BE%91%E6%8C%87%E4%BB%A4/#_4","title":"\u53c2\u8003\u8d44\u6599","text":"<ol> <li>ATmega328P Datasheet</li> <li>AVR Instruction Set Manual</li> <li>Programming and Interfacing ATMEL's AVRs</li> </ol>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9A%E5%88%86%E6%94%AF%E6%8C%87%E4%BB%A4/","title":"AVR\u6c47\u7f16\uff08\u516d\uff09\uff1a\u5206\u652f\u6307\u4ee4","text":"<p>\u5206\u652f\u6307\u4ee4\u7528\u4e8e\u6539\u53d8\u7a0b\u5e8f\u7684\u6267\u884c\u6d41\uff0c\u5206\u4e3a\u65e0\u6761\u4ef6\u5206\u652f\u548c\u6761\u4ef6\u5206\u652f\u4e24\u7c7b\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9A%E5%88%86%E6%94%AF%E6%8C%87%E4%BB%A4/#_1","title":"\u65e0\u6761\u4ef6\u5206\u652f\u6307\u4ee4","text":""},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9A%E5%88%86%E6%94%AF%E6%8C%87%E4%BB%A4/#jmp","title":"<code>JMP</code>","text":"<p><code>JMP</code> \u6307\u4ee4\u7528\u4e8e\u65e0\u6761\u4ef6\u8df3\u8f6c\uff0c\u7c7b\u4f3c\u4e8eC\u4e2d\u7684 <code>goto</code> \u5173\u952e\u5b57\uff0c <code>JMP</code> \u6307\u4ee4\u7684\u8df3\u8f6c\u8303\u56f4\u4e3a[0, 4M-1]\u5b57\u3002</p> <p><code>RJMP</code> \u6307\u4ee4\u7528\u4e8e\u76f8\u5bf9\u8df3\u8f6c\uff0c\u8df3\u8f6c\u8303\u56f4\u4e3a\u5f53\u524d\u4f4d\u7f6e[-2K, 2K-1]\u5b57\u3002</p> <p><code>IJMP</code> \u6307\u4ee4\u7528\u4e8e\u95f4\u63a5\u8df3\u8f6c\uff0c\u8df3\u8f6c\u7684\u76ee\u7684\u5730\u5740\u5b58\u653e\u5728 <code>Z</code> \u5bc4\u5b58\u5668\u4e2d\uff08\u8bb0\u4f4f\u5355\u4f4d\u662f\u5b57\uff09\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>    JMP f2             ; \u8df3\u8f6c\u5230f2\nf1:\nRJMP f3            ; \u8df3\u8f6c\u5230f3\nf2:\nLDI ZL, lo8(f1)\nLDI ZH, hi8(f1)    ; Z = f1\nCLC\nROR ZH\nROR ZL             ; Z = Z &gt;&gt; 1\nIJMP               ; \u8df3\u8f6c\u5230f1\nf3:\nRJMP f2            ; \u8df3\u8f6c\u5230f2\n</code></pre> <p>\u6ce8\u610f\uff1a\u5b9e\u6d4b\u5728GNU\u6c47\u7f16\u4e0b\uff0c <code>IJMP</code> \u6307\u4ee4\u4e2d\u4e0d\u80fd\u76f4\u63a5\u628a\u6807\u7b7e\u8d4b\u503c\u7ed9 <code>Z</code> \u5bc4\u5b58\u5668\uff0c\u56e0\u4e3a\u6807\u7b7e\u8868\u793a\u7684\u5730\u5740\u7684\u5355\u4f4d\u662f\u5b57\u8282\uff0c\u800c <code>Z</code> \u5bc4\u5b58\u5668\u4e2d\u5b58\u653e\u7684\u5e94\u8be5\u662f\u5b57\u5730\u5740\uff0c\u6240\u4ee5\u8981\u5c06\u6807\u7b7e\u53f3\u79fb\u4e00\u4f4d\u4f20\u7ed9 <code>Z</code> \u5bc4\u5b58\u5668\u3002\u800c <code>JMP</code> \u6307\u4ee4\u548c <code>RJMP</code> \u6307\u4ee4\u5219\u53ef\u4ee5\u76f4\u63a5\u4f20\u6807\u7b7e\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9A%E5%88%86%E6%94%AF%E6%8C%87%E4%BB%A4/#call-ret","title":"<code>CALL</code> / <code>RET</code>","text":"<p><code>CALL</code> \u6307\u4ee4\u7528\u4e8e\u5b50\u7a0b\u5e8f\u8c03\u7528\uff0c\u548c <code>JMP</code> \u6307\u4ee4\u4e00\u6837\uff0c\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u7a0b\u5e8f\u8df3\u8f6c\uff0c\u4f46\u662f <code>CALL</code> \u6307\u4ee4\u5728\u8df3\u8f6c\u4e4b\u524d\u4f1a\u5c06\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\uff08\u8fd4\u56de\u5730\u5740\uff09\u538b\u5165\u6808\u4e2d\u3002 <code>CALL</code> \u6307\u4ee4\u7684\u8df3\u8f6c\u8303\u56f4\u4e3a[0, 64K-1]\u5b57\u3002</p> <p><code>RCALL</code> \u6307\u4ee4\u7528\u4e8e\u76f8\u5bf9\u5b50\u7a0b\u5e8f\u8c03\u7528\uff0c\u8df3\u8f6c\u8303\u56f4\u4e3a\u5f53\u524d\u4f4d\u7f6e[-2K, 2K-1]\u5b57\u3002</p> <p><code>ICALL</code> \u6307\u4ee4\u7528\u4e8e\u95f4\u63a5\u5b50\u7a0b\u5e8f\u8c03\u7528\uff0c\u5b50\u7a0b\u5e8f\u7684\u5730\u5740\u5b58\u653e\u5728 <code>Z</code> \u5bc4\u5b58\u5668\u4e2d\uff08\u8bb0\u4f4f\u5355\u4f4d\u662f\u5b57\uff09\u3002</p> <p><code>RET</code> \u6307\u4ee4\u7528\u4e8e\u5b50\u7a0b\u5e8f\u8fd4\u56de\uff0c\u5148\u5c06\u8fd4\u56de\u5730\u5740\u4ece\u6808\u4e2d\u5f39\u51fa\uff0c\u7136\u540e\u8fdb\u884c\u8df3\u8f6c\u3002</p> <p><code>RETI</code> \u6307\u4ee4\u7528\u4e8e\u4e2d\u65ad\u5b50\u7a0b\u5e8f\u8fd4\u56de\uff0c\u548c <code>RET</code> \u6307\u4ee4\u4e0d\u540c\u7684\u662f\uff0c\u5b83\u8fd8\u4f1a\u8bbe\u7f6e\u5168\u5c40\u4e2d\u65ad\u4f7f\u80fd\u4f4d <code>I</code> \u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>    CALL f1            ; \u8c03\u7528f1\u5b50\u7a0b\u5e8f\nRCALL f1           ; \u8c03\u7528f1\u5b50\u7a0b\u5e8f\nLDI ZL, lo8(f1)\nLDI ZH, hi8(f1)    ; Z = f1\nCLC\nROR ZH\nROR ZL             ; Z = Z &gt;&gt; 1\nICALL              ; \u8c03\u7528f1\u5b50\u7a0b\u5e8f\nf1:\n...\nRET                ; \u5b50\u7a0b\u5e8f\u8fd4\u56de\nXXX_IRQHandler:\n...\nRETI               ; \u4e2d\u65ad\u5b50\u7a0b\u5e8f\u8fd4\u56de\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9A%E5%88%86%E6%94%AF%E6%8C%87%E4%BB%A4/#_2","title":"\u6761\u4ef6\u5206\u652f\u6307\u4ee4","text":""},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9A%E5%88%86%E6%94%AF%E6%8C%87%E4%BB%A4/#cp","title":"<code>CP</code>","text":"<p><code>CP</code> \u6307\u4ee4\u7528\u4e8e\u6bd4\u8f83\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u53ea\u5f71\u54cd\u6807\u5fd7\u4f4d\u800c\u4e0d\u4fdd\u5b58\u7ed3\u679c\u7684\u51cf\u6cd5\u64cd\u4f5c\u3002\u540e\u7f00\u5e26 <code>C</code> \u8868\u793a\u5e26\u8fdb\u4f4d\u6bd4\u8f83\uff0c\u540e\u7f00\u5e26 <code>I</code> \u8868\u793a\u4e0e\u7acb\u5373\u6570\u6bd4\u8f83\uff0c\u540e\u7f00\u5e26 <code>SE</code> \u8868\u793a\u5982\u679c\u76f8\u7b49\uff0c\u5219\u8df3\u8fc7\u4e0b\u4e00\u6761\u6307\u4ee4\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>    LDI R16, 0x01\nLDI R17, 0x02\nCP R16, R17\nBRLT f1          ; 1 &lt; 2\uff0c\u8df3\u8f6c\u5230f1\nRJMP f3          ; \u4e0d\u4f1a\u6267\u884c\nf1:\nCPI R16, 0x01\nBREQ f2          ; 1 == 1\uff0c\u8df3\u8f6c\u5230f2\nRJMP f3          ; \u4e0d\u4f1a\u6267\u884c\nf2:\nLDI R17, 0x01\nCPSE R16, R17    ; 1 == 1\uff0c\u8df3\u8fc7\u4e0b\u4e00\u6761\u6307\u4ee4\nRJMP f3          ; \u4e0d\u4f1a\u6267\u884c\nSEC\nCPC R16, R17\nBRLT f3          ; 1 &lt; 1 + C(1)\uff0c\u8df3\u8f6c\u5230f3\nRJMP f1          ; \u4e0d\u4f1a\u6267\u884c\nf3:\nRJMP f3\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9A%E5%88%86%E6%94%AF%E6%8C%87%E4%BB%A4/#sbxx","title":"<code>SBxx</code>","text":"<p>\u5f62\u5982 <code>SBxx</code> \u7684\u6307\u4ee4\u6839\u636e\u5bc4\u5b58\u5668\u4e2d\u7684\u67d0\u4e00\u4f4d\u6765\u9009\u62e9\u8df3\u8fc7\u6267\u884c\u4e0b\u4e00\u6761\u6307\u4ee4\uff0c <code>SBRC</code> / <code>SBRS</code> \u6307\u4ee4\u6839\u636e\u7684\u662f\u901a\u7528\u5bc4\u5b58\u5668\u4e2d\u7684\u4f4d\u7684\u6e05\u9664/\u8bbe\u7f6e\u72b6\u6001\uff0c\u800c <code>SBIC</code> / <code>SBIS</code> \u6307\u4ee4\u6839\u636e\u7684\u662fI/O\u5bc4\u5b58\u5668\u4e2d\u7684\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>f1:\nLDI R16, 0xAA\nSBRS R16, 1      ; R16.1 == 1\uff0c\u8df3\u8fc7\u4e0b\u4e00\u6761\u6307\u4ee4\nRJMP f1          ; \u4e0d\u4f1a\u6267\u884c\nSBIC PINB, 2     ; \u5982\u679cPB2\u8f93\u5165\u4e3a\u4f4e\u7535\u5e73\uff0c\u8df3\u8fc7\u4e0b\u4e00\u6761\u6307\u4ee4\nRJMP f1\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9A%E5%88%86%E6%94%AF%E6%8C%87%E4%BB%A4/#brxx","title":"<code>BRxx</code>","text":"<p>\u5f62\u5982 <code>BRxx</code> \u7684\u6307\u4ee4\u7528\u4e8e\u6839\u636e\u6761\u4ef6\u6539\u53d8\u7a0b\u5e8f\u6267\u884c\u6d41\uff0c\u652f\u6301\u7684\u6761\u4ef6\u5177\u4f53\u89c1\u4e0b\u8868\uff1a</p> <p></p> <p><code>BRxx</code> \u7c7b\u7684\u6307\u4ee4\u4e00\u822c\u548c <code>CP</code> \u6216 <code>SUB</code> \u6307\u4ee4\u914d\u5408\u4f7f\u7528\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>f1:\nLDI R16, 0X01\nLDI R17, 0X02\nCP R16, R17\nBRLO f2          ; 0x01 &lt; 0x02\uff0c\u8df3\u8f6c\u5230f2\nRJMP f1          ; \u4e0d\u4f1a\u6267\u884c\nf2:\nCPI R16, 0x01\nBRSH f3          ; 0x01 == 0x01\uff0c\u8df3\u8f6c\u5230f3\nRJMP f1          ; \u4e0d\u4f1a\u6267\u884c\nf3:\nRJMP f3\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9A%E5%88%86%E6%94%AF%E6%8C%87%E4%BB%A4/#_3","title":"\u53c2\u8003\u8d44\u6599","text":"<ol> <li>ATmega328P Datasheet</li> <li>AVR Instruction Set Manual</li> </ol>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4/","title":"AVR\u6c47\u7f16\uff08\u56db\uff09\uff1a\u6570\u636e\u4f20\u9001\u6307\u4ee4","text":"<p>AVR\u6307\u4ee4\u4e3b\u8981\u5206\u4e3a\u4e94\u7c7b\uff1a\u7b97\u672f\u548c\u903b\u8f91\u6307\u4ee4\u3001\u5206\u652f\u6307\u4ee4\u3001\u4f4d\u64cd\u4f5c\u6307\u4ee4\u3001\u6570\u636e\u4f20\u9001\u6307\u4ee4\u3001MCU\u63a7\u5236\u6307\u4ee4\uff0c\u4eca\u5929\u6211\u4eec\u5148\u6765\u8ba4\u8bc6\u5176\u4e2d\u6700\u5e38\u7528\u7684\u6570\u636e\u4f20\u9001\u6307\u4ee4\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4/#_1","title":"\u6c47\u7f16\u7a0b\u5e8f\u7684\u7f16\u5199\u3001\u7f16\u8bd1\u548c\u8c03\u8bd5","text":"<p>\u5b66\u4e60\u4efb\u4f55\u6280\u672f\u90fd\u79bb\u4e0d\u5f00\u5b9e\u8df5\uff0c\u6c47\u7f16\u8bed\u8a00\u4e5f\u662f\u5982\u6b64\u3002\u5728\u6b63\u5f0f\u5b66\u4e60\u6307\u4ee4\u524d\uff0c\u6211\u4eec\u5148\u6765\u4f53\u9a8c\u4e00\u4e0b\u6c47\u7f16\u7a0b\u5e8f\u4ece\u7f16\u5199\u5230\u7f16\u8bd1\uff0c\u518d\u5230\u8c03\u8bd5\u7684\u6574\u4e2a\u8fc7\u7a0b\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4/#_2","title":"\u4f2a\u6307\u4ee4","text":"<p>\u6839\u636e\u767e\u5ea6\u767e\u79d1\uff1a\u4f2a\u6307\u4ee4(Pseudo Instruction)\u662f\u7528\u4e8e\u5bf9\u6c47\u7f16\u8fc7\u7a0b\u8fdb\u884c\u63a7\u5236\u7684\u6307\u4ee4\uff0c\u8be5\u7c7b\u6307\u4ee4\u5e76\u4e0d\u662f\u53ef\u6267\u884c\u6307\u4ee4\uff0c\u6ca1\u6709\u673a\u5668\u4ee3\u7801\uff0c\u53ea\u7528\u4e8e\u6c47\u7f16\u8fc7\u7a0b\u4e2d\u4e3a\u6c47\u7f16\u7a0b\u5e8f\u63d0\u4f9b\u6c47\u7f16\u4fe1\u606f\u3002</p> <p>\u4e0b\u9762\u662f\u51e0\u4e2a\u5e38\u7528\u7684\u4f2a\u6307\u4ee4\uff1a</p> \u4f2a\u6307\u4ee4 \u8bf4\u660e \u4e3e\u4f8b <code>.section</code> \u5b9a\u4e49\u4e00\u4e2a\u6bb5 <code>.section .text</code> <code>.section .data</code> <code>.global</code> \u5b9a\u4e49\u4e00\u4e2a\u5168\u5c40\u7b26\u53f7 <code>.global _start</code> <code>.byte</code> \u5b9a\u4e49\u4e00\u4e2a\u5b57\u8282\u6570\u636e <code>.byte 0x01</code> <code>.word</code> \u5b9a\u4e49\u4e00\u4e2a\u5b57\u6570\u636e <code>.word 0x3412</code> <code>.ascii</code> \u5b9a\u4e49\u4e00\u4e2a\u5b57\u7b26\u4e32\u6570\u636e <code>.ascii \"hello\"</code> <code>.align</code> \u8bbe\u7f6e\u5bf9\u9f50\u65b9\u5f0f <code>.align 4</code> <code>.equ</code> \u5b9a\u4e49\u4e00\u4e2a\u7b26\u53f7\u5e38\u91cf\uff0c\u7c7b\u4f3c\u4e8eC\u5b8f\u5b9a\u4e49 <code>.equ INT8_MAX, 0xFF</code>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4/#_3","title":"\u7b2c\u4e00\u4e2a\u6c47\u7f16\u7a0b\u5e8f","text":"hello.s<pre><code>.equ PINB, 0x03\n.equ DDRB, 0x04\n.equ PORTB, 0x05\n.section .text        ; \u5b9a\u4e49text\u6bb5\n.global _start        ; \u5b9a\u4e49\u4e00\u4e2a\u5168\u5c40\u7b26\u53f7_start\n_start:\nLDI R16, 0x20     ; R16 = 0x20\nOUT DDRB, R16     ; \u8bbe\u7f6ePB5\u4e3a\u8f93\u51fa\nOUT PORTB, R16    ; PB5\u521d\u59cb\u8f93\u51fa\u9ad8\u7535\u5e73\nloop:\nOUT PINB, R16     ; \u7ffb\u8f6cPB5\u7535\u5e73\nRJMP loop         ; \u8df3\u8f6c\u5230loop\u5904\u7ee7\u7eed\u6267\u884c\n</code></pre> <p>\u4e0a\u8ff0\u7a0b\u5e8f\u5b9e\u73b0\u7684\u529f\u80fd\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u4e0d\u65ad\u7ffb\u8f6cPB5\u7684\u7535\u5e73\u72b6\u6001\u3002</p> <p>\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u8fdb\u884c\u7f16\u8bd1\uff0c\u751f\u6210elf\u6587\u4ef6\uff1a</p> <pre><code>avr-gcc -mmcu=atmega328p -x assembler-with-cpp -g -Og -Wall -c -o hello.o hello.s\navr-gcc -mmcu=atmega328p -nostartfiles -o hello.elf hello.o\n</code></pre> <p>\u5176\u4e2d\uff0c <code>-x assembler-with-cpp</code> \u8868\u793a\u7f16\u8bd1\u6c47\u7f16\u7a0b\u5e8f\uff0c <code>-nostartfiles</code> \u8868\u793a\u4e0d\u6dfb\u52a0\u9ed8\u8ba4\u542f\u52a8\u6587\u4ef6\uff0c\u542f\u52a8\u6587\u4ef6\u7684\u4f5c\u7528\u662f\u521d\u59cb\u5316MCU\uff0c\u521b\u5efaC\u8bed\u8a00\u8fd0\u884c\u73af\u5883\uff0c\u7531\u4e8e\u8fd9\u91cc\u7f16\u5199\u7684\u662f\u6c47\u7f16\u7a0b\u5e8f\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u5b83\uff0c\u5426\u5219\u7f16\u8bd1\u65f6\u4f1a\u63d0\u793a\u627e\u4e0d\u5230 <code>main</code> \u51fd\u6570\u3002</p> <p>\u4e3a\u4e86\u4ee5\u540e\u6bcf\u6b21\u91cd\u65b0\u7f16\u8bd1\u7684\u65f6\u5019\u4e0d\u7528\u90fd\u8f93\u4e00\u904d\u547d\u4ee4\uff0c\u53ef\u4ee5\u5199\u4e00\u4e2a <code>Makefile</code> \u6587\u4ef6\uff1a</p> Makefile<pre><code>.PHONY: all clean\nTARGET := hello\n\nall: $(TARGET).elf\n%.o: %.s\navr-gcc -mmcu=atmega328p -x assembler-with-cpp -g -Og -Wall -c -o $@ $&lt;\n\n$(TARGET).elf: $(TARGET).o\navr-gcc -mmcu=atmega328p -nostartfiles -o $@ $&lt;\n\nclean:\nrm -f *.o $(TARGET).elf\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4/#_4","title":"\u8c03\u8bd5\u7a0b\u5e8f","text":"<p>\u4f7f\u7528 <code>simavr</code> \u5bf9\u4e0a\u9762\u751f\u6210\u7684elf\u6587\u4ef6\u8fdb\u884c\u4eff\u771f\uff1a</p> <pre><code>simavr -f 16000000 -m atmega328p --gdb hello.elf\n</code></pre> <p>\u4e3a\u4e86\u65b9\u4fbf\uff0c\u53ef\u4ee5\u5728 <code>Makefile</code> \u4e2d\u6dfb\u52a0\u4e00\u4e2a <code>run</code> \u4f2a\u76ee\u6807\uff0c\u5c06\u4e0a\u9762\u7684\u547d\u4ee4\u6dfb\u52a0\u8fdb\u53bb\uff1a</p> Makefile<pre><code>.PHONY: all clean run\n...\nrun: $(TARGET).elf\nsimavr -f 16000000 -m atmega328p --gdb $&lt;\n</code></pre> <p>\u4e4b\u540e\u9700\u8981\u4eff\u771f\u65f6\uff0c\u76f4\u63a5\u6267\u884c <code>make run</code> \u5373\u53ef\u3002</p> <p>\u4f7f\u7528 <code>avr-gdb</code> \u5bf9\u7a0b\u5e8f\u8fdb\u884c\u8c03\u8bd5\uff0c <code>simavr</code> \u7684GDB\u7aef\u53e3\u662f <code>1234</code> \uff1a</p> <pre><code>avr-gdb -ex \"target remote localhost:1234\" -ex \"layout split\" -q --tui hello.elf\n</code></pre> <p></p> <p>\u5728GDB\u7a97\u53e3\u4e2d\uff0c\u53ef\u4ee5\u8f93\u5165 <code>s</code> \u8fdb\u884c\u5355\u6b65\u6267\u884c\u3002</p> <p>\u4e3a\u4e86\u89c2\u5bdf <code>PINB</code> \u3001 <code>DDRB</code> \u3001 <code>PORTB</code> \u5bc4\u5b58\u5668\u7684\u503c\uff0c\u53ef\u4ee5\u501f\u52a9 <code>x/&lt;n/f/u&gt; &lt;addr&gt;</code> \u547d\u4ee4\uff0c\u5176\u4e2d <code>n</code> \u8868\u793a\u8981\u67e5\u770b\u7684\u503c\u7684\u4e2a\u6570\uff1b <code>f</code> \u6307\u5b9a\u663e\u793a\u683c\u5f0f\uff0c\u5982\u679c\u8981\u5341\u516d\u8fdb\u5236\u663e\u793a\uff0c\u8fd9\u91cc\u5c31\u8981\u6307\u5b9a <code>x</code> \uff1b <code>u</code> \u8868\u793a\u503c\u7684\u5355\u4f4d\uff0c\u5982\u679c\u5355\u4f4d\u662f\u5b57\u8282\uff0c\u8fd9\u91cc\u5c31\u8981\u6307\u5b9a <code>b</code> \u3002\u8fd9\u6761\u547d\u4ee4\u7684\u5177\u4f53\u4f7f\u7528\u65b9\u6cd5\u53ef\u4ee5\u901a\u8fc7 <code>help x</code> \u547d\u4ee4\u67e5\u770b\u3002</p> <p>\u8fd9\u91cc\u6211\u4eec\u67e5\u770b\u4eceI/O\u5730\u57400x03\u5f00\u59cb\u76843\u4e2a\u5b57\u8282\uff1a</p> <pre><code>x/3xb 0x03      # \u6ce8\u610f\uff0c\u8fd9\u91cc\u7684\u5730\u5740\u662f\u9519\u8bef\u7684\uff01\n</code></pre> <p>\u7ed3\u679c\u5982\u4e0b\uff1a</p> <p></p> <p>\u53d1\u73b0\u8bfb\u53d6\u7684\u503c\u5e76\u4e0d\u7b26\u5408\u6211\u4eec\u7684\u9884\u671f\uff0c\u8fd9\u662f\u56e0\u4e3a\u4e0a\u9762\u547d\u4ee4\u4e2d\u7684\u5730\u5740\u8bbe\u7f6e\u9519\u4e86\uff0c\u6709\u4e24\u4e2a\u56e0\u7d20\uff1a</p> <ol> <li><code>PINB</code> \u3001 <code>DDRB</code> \u3001 <code>PORTB</code> \u5728I/O\u7a7a\u95f4\u7684\u5730\u5740\u662f0x03\u5f00\u59cb\uff0c\u800c\u5728\u6570\u636e\u7a7a\u95f4\u4e2d\u7684\u5730\u5740\u9700\u8981\u52a0\u4e0a0x20\uff1b</li> <li>AVR\u7684\u7a0b\u5e8f\u7a7a\u95f4\u548c\u6570\u636e\u7a7a\u95f4\u662f\u5206\u522b\u72ec\u7acb\u7f16\u5740\u7684\uff0c\u56e0\u6b64\u5730\u5740\u5b58\u5728\u91cd\u53e0\u60c5\u51b5\u3002\u901a\u8fc7 <code>avr-readelf -S hello.elf</code> \u67e5\u770b\uff0c\u53ef\u4ee5\u53d1\u73b0 <code>.data</code> \u6bb5\u7684\u5730\u5740\u662f\u4ece0x800100\u5f00\u59cb\u7684\uff0c\u800c\u5b9e\u9645\u7684SRAM\u5730\u5740\u662f\u4ece <code>0x0100</code> \u5f00\u59cb\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u77e5\u9053elf\u6587\u4ef6\u4e2d\u6570\u636e\u7a7a\u95f4\u7684\u5730\u5740\u8fd8\u9700\u8981\u52a0\u4e0a0x800000\uff0c\u5982\u679c\u4e0d\u52a0\uff0c\u5219\u4ee3\u8868\u7684\u662f <code>.text</code> \u6bb5\uff08Flash\uff09\u7684\u5730\u5740\u3002</li> </ol> <p></p> <p>\u901a\u8fc7\u4e0a\u9762\u7684\u5206\u6790\uff0c\u5c06\u547d\u4ee4\u4e2d\u7684\u5730\u5740\u6539\u4e3a0x800023\u5373\u53ef\u6b63\u786e\u67e5\u770b <code>PINB</code> \u3001 <code>DDRB</code> \u3001 <code>PORTB</code> \u4e2d\u7684\u5185\u5bb9\uff1a</p> <pre><code>x/3xb 0x800023\n</code></pre> <p>\u7ed3\u679c\u5982\u4e0b\uff1a</p> <p></p> <p>\u8fd9\u6837\u663e\u793a\u7684\u7ed3\u679c\u4e0e\u6211\u4eec\u7684\u7a0b\u5e8f\u903b\u8f91\u662f\u4e00\u81f4\u7684\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4/#_5","title":"\u6570\u636e\u4f20\u9001\u6307\u4ee4","text":"<p>\u7531\u4e8eAVR\u5177\u6709\u591a\u79cd\u5bfb\u5740\u65b9\u5f0f\uff0c\u56e0\u6b64\u6570\u636e\u4f20\u9001\u6307\u4ee4\u4e5f\u5bf9\u5e94\u6709\u591a\u79cd\u3002</p> \u7a7a\u95f4 \u6307\u4ee4 \u5bc4\u5b58\u5668\u5806 <code>MOV</code> \u6570\u636e\u7a7a\u95f4 <code>LD</code> / <code>ST</code> \u7a0b\u5e8f\u7a7a\u95f4 <code>LPM</code> / <code>SPM</code> I/O\u7a7a\u95f4 <code>IN</code> / <code>OUT</code> \u6808\u7a7a\u95f4 <code>PUSH</code> / <code>POP</code> <p>\u4e00\u822c\u800c\u8a00\uff0cAVR\u6307\u4ee4\u5982\u679c\u6709\u4e24\u4e2a\u64cd\u4f5c\u6570\uff0c\u5219\u7b2c\u4e00\u4e2a\u662f\u76ee\u7684\u64cd\u4f5c\u6570\uff0c\u7b2c\u4e8c\u4e2a\u662f\u6e90\u64cd\u4f5c\u6570\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4/#mov","title":"<code>MOV</code>","text":"<p><code>MOV</code> \u6307\u4ee4\u7528\u4e8e\u5bc4\u5b58\u5668\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u9001\uff08\u4e00\u4e2a\u5b57\u8282\uff09\uff0c\u540e\u7f00\u5982\u679c\u52a0 <code>W</code> \u8868\u793a\u4f20\u9001\u4e00\u4e2a\u5b57\u7684\u6570\u636e\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI  R16, 0x10    ; R16 = 0x10\nMOV  R0, R16      ; R0 = 0x10\nLDI  R16, 0x20    ; R16 = 0x20\nLDI  R17, 0x30    ; R17 = 0x30\nMOVW R0, R16      ; R0 = 0x20, R1 = 0x30\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4/#ld","title":"<code>LD</code>","text":"<p><code>LD</code> \u6307\u4ee4\u7528\u4e8e\u5c06\u6570\u636e\u4ece\u6570\u636e\u7a7a\u95f4\u52a0\u8f7d\u5230\u5bc4\u5b58\u5668\u4e2d\uff0c\u540e\u7f00\u52a0 <code>I</code> \u8868\u793a\u52a0\u8f7d\u7acb\u5373\u6570\uff0c\u52a0 <code>D</code> \u8868\u793a\u504f\u79fb\u91cf\u5bfb\u5740\uff0c\u52a0 <code>S</code> \u8868\u793a\u76f4\u63a5\u5bfb\u5740\u3002</p> <p><code>X</code> / <code>Y</code> / <code>Z</code> \u5bc4\u5b58\u5668\u53ef\u4ee5\u7528\u4e8e\u95f4\u63a5\u5bfb\u5740\uff0c\u5982\u679c\u524d\u7f00\u52a0 <code>-</code> \uff0c\u8868\u793a\u6267\u884c\u64cd\u4f5c\u524d\u5bc4\u5b58\u5668\u7684\u503c\u81ea\u51cf\u4e00\uff0c\u5982\u679c\u540e\u7f00\u52a0 <code>+</code> \uff0c\u8868\u793a\u6267\u884c\u64cd\u4f5c\u540e\u5bc4\u5b58\u5668\u7684\u503c\u81ea\u52a0\u4e00\u3002</p> <p><code>Y</code> / <code>Z</code> \u5bc4\u5b58\u5668\u53ef\u4ee5\u7528\u4e8e\u504f\u79fb\u91cf\u5bfb\u5740\uff08\u6ce8\u610f\u4e0d\u5305\u62ec <code>X</code> \u5bc4\u5b58\u5668\uff09\uff0c\u540e\u9762\u52a0 <code>+q</code> \u8868\u793a\u504f\u79fb\u91cf\u4e3a <code>q</code> \u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI R16, 0xAA    ; R16 = 0xAA\nLDI XL, 0x00\nLDI XH, 0x01     ; X = 0x0100\nST  X, R16       ; (0x0100) = 0xAA\nLD  R0, X+       ; R0 = 0xAA, X = 0x0101\nLDI ZL, 0xF1\nLDI ZH, 0x00     ; Z = 0x00F1\nLDD R1, Z+0xF    ; R1 = 0xAA\nLDS R2, 0x0100   ; R2 = 0xAA\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4/#st","title":"<code>ST</code>","text":"<p><code>ST</code> \u6307\u4ee4\u7528\u4e8e\u5c06\u6570\u636e\u4ece\u5bc4\u5b58\u5668\u5199\u5165\u5230\u6570\u636e\u7a7a\u95f4\u4e2d\uff0c\u540e\u7f00\u52a0 <code>D</code> / <code>S</code> \u7684\u610f\u4e49\u540c <code>LD</code> \uff0c\u6ce8\u610f <code>ST</code> \u4e0d\u652f\u6301\u7acb\u5373\u5bfb\u5740\uff0c\u5373\u6ca1\u6709 <code>STI</code> \u8fd9\u6837\u7684\u6307\u4ee4\uff01</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI R16, 0x55    ; R16 = 0x55\nLDI XL, 0x80\nLDI XH, 0x01     ; X = 0x0180\nST  X, R16       ; (0x0180) = 0x55\nLD  R0, X        ; R0 = 0x55\nLDI R16, 0xAA    ; R16 = 0xAA\nLDI ZL, 0x50\nLDI ZH, 0x01     ; Z = 0x0150\nSTD Z+0x30, R16  ; (0x0180) = 0xAA\nLD  R1, X        ; R1 = 0xAA\nLDI R16, 0xA5    ; R16 = 0xA5\nSTS 0x0180, R16  ; (0x0180) = 0xA5\nLD  R2, X        ; R2 = 0xA5\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4/#lpm-spm","title":"<code>LPM</code> / <code>SPM</code>","text":"<p><code>LPM</code> / <code>SPM</code> \u6307\u4ee4\u7528\u4e8e\u5c06\u6570\u636e\u4ece\u7a0b\u5e8f\u7a7a\u95f4\u52a0\u8f7d\u5230\u5bc4\u5b58\u5668/\u4ece\u5bc4\u5b58\u5668\u5199\u5165\u5230\u7a0b\u5e8f\u7a7a\u95f4\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI ZL, lo8(const)\nLDI ZH, hi8(const)      ; Z = const\nLPM R0, Z+              ; R0 = 0xA5, Z = CONST + 1\nLPM R1, Z+              ; R1 = 0x5A, Z = CONST + 2\nLPM R2, Z+              ; R2 = 0x55, Z = CONST + 3\nLPM R3, Z               ; R3 = 0xAA\nconst:\n.byte 0xA5\n.byte 0x5A\n.word 0xAA55\n</code></pre> <p><code>SPM</code> \u6307\u4ee4\u7684\u7528\u6cd5\u8f83\u4e3a\u7279\u6b8a\uff0c\u540e\u9762\u6709\u673a\u4f1a\u518d\u6765\u4ecb\u7ecd\u3002</p>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4/#in-out","title":"<code>IN</code> / <code>OUT</code>","text":"<p><code>IN</code> / <code>OUT</code> \u7528\u4e8e\u4eceI/O\u7a7a\u95f4\u8bfb\u5165\u6570\u636e\u5230\u5bc4\u5b58\u5668/\u5411I/O\u7a7a\u95f4\u5199\u5165\u5bc4\u5b58\u5668\u4e2d\u7684\u6570\u636e\uff0c\u6ce8\u610f <code>P</code> \u4e3aI/O\u7a7a\u95f4\u7684\u5730\u5740\uff0c\u6b64\u547d\u4ee4\u4e0d\u80fd\u8bbf\u95ee\u6269\u5c55I/O\u7a7a\u95f4\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>OUT DDRB, 0x00    ; DDRB = 0xAA\nIN  R0, DDRB      ; R0 = 0xAA\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4/#push-pop","title":"<code>PUSH</code> / <code>POP</code>","text":"<p><code>PUSH</code> / <code>POP</code> \u7528\u4e8e\u5c06\u6570\u636e\u538b\u5165/\u5f39\u51fa\u6808\uff0c\u4f7f\u7528\u65f6\u9700\u8981\u6ce8\u610fSP\u7684\u521d\u59cb\u503c\u8981\u8bbe\u7f6e\u6b63\u786e\uff08AVR\u662f\u7a7a\u51cf\u6808\uff09\uff0c\u5e76\u8981\u907f\u514d\u51fa\u73b0\u6808\u6ea2\u51fa\u7684\u60c5\u51b5\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>LDI  R16, 0xA5    ; R16 = 0xA5\nPUSH R16          ; (SP) = 0xA5, SP -= 1\nPOP  R0           ; R0 = 0xA5, SP += 1\n</code></pre>"},{"location":"Embed/AVR%E6%B1%87%E7%BC%96%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4/#_6","title":"\u53c2\u8003\u8d44\u6599","text":"<ol> <li>ATmega328P Datasheet</li> <li>AVR Instruction Set Manual</li> <li>\u767e\u5ea6\u767e\u79d1 - \u4f2a\u6307\u4ee4</li> </ol>"},{"location":"Web/%E4%BD%BF%E7%94%A8MkDocs%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/","title":"\u4f7f\u7528MkDocs\u642d\u5efa\u4e2a\u4eba\u535a\u5ba2","text":"<p>\u63a5\u89e6\u7f16\u7a0b\u5df2\u7ecf\u597d\u51e0\u5e74\u4e86\uff0c\u9605\u8bfb\u4e86\u65e0\u6570\u5927\u4f6c\u7684\u535a\u5ba2\u6587\u7ae0\uff0c\u4f46\u662f\u4ece\u6765\u6ca1\u6709\u81ea\u5df1\u5199\u8fc7\u3002\u8fd9\u5176\u4e2d\u6700\u91cd\u8981\u7684\u539f\u56e0\u5f53\u7136\u662f\u61d2\u60f0\uff0c\u89c9\u5f97\u5199\u535a\u5ba2\u592a\u8d39\u65f6\u95f4\u4e86\uff0c\u5bf9\u81ea\u5df1\u7684\u5e2e\u52a9\u4e5f\u4e0d\u5927\u3002\u53ef\u662f\u5982\u4eca\u53d1\u73b0\u81ea\u5df1\u7684\u8bb0\u6027\u8d8a\u6765\u8d8a\u6349\u6025\u4e86\uff0c\u67d0\u6837\u6280\u672f\u5728\u4e00\u6bb5\u65f6\u95f4\u4e0d\u63a5\u89e6\u4e4b\u540e\uff0c\u5c31\u51e0\u4e4e\u5b8c\u5168\u5fd8\u8bb0\u4e86\u3002\u5bf9\u6b64\u6211\u5f88\u662f\u82e6\u607c\uff0c\u4e8e\u662f\u840c\u751f\u4e86\u5199\u535a\u5ba2\u7684\u60f3\u6cd5\uff0c\u6bd5\u7adf\u597d\u8bb0\u6027\u4e0d\u5982\u70c2\u7b14\u5934\u561b\u3002\u66fe\u7ecf\u542c\u8bf4\u8fc7GitHub\u4e0a\u53ef\u4ee5\u642d\u5efa\u535a\u5ba2\uff0c\u4e5f\u770b\u5230\u5f88\u591a\u4eba\u662f\u8fd9\u6837\u505a\u7684\uff0c\u6b63\u597d\u501f\u8fd9\u4e2a\u673a\u4f1a\u597d\u597d\u7814\u7a76\u4e0b\u3002</p>"},{"location":"Web/%E4%BD%BF%E7%94%A8MkDocs%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/#mkdocs_1","title":"MkDocs\u4ecb\u7ecd","text":"<p>\u6839\u636eMkDocs\u5b98\u7f51\u4ecb\u7ecd\uff1a</p> <p>MkDocs is a\u00a0fast,\u00a0simple\u00a0and\u00a0downright gorgeous\u00a0static site generator that's geared towards building project documentation. Documentation source files are written in Markdown, and configured with a single YAML configuration file. </p> <p>MkDocs\u662f\u4e00\u4e2a\u5feb\u901f\u3001\u7b80\u5355\u3001\u534e\u4e3d\u7684\u9759\u6001\u7ad9\u70b9\u751f\u6210\u5668\uff0c\u9002\u7528\u4e8e\u6784\u5efa\u9879\u76ee\u6587\u6863\u3002\u6587\u6863\u6e90\u6587\u4ef6\u4f7f\u7528Markdown\u7f16\u5199\uff0c\u5e76\u4f7f\u7528\u5355\u4e2aYAML\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u914d\u7f6e\u3002</p> <p>MkDocs\u7684\u7279\u70b9\u6709\uff1a</p> <ul> <li>\u591a\u4e2a\u6f02\u4eae\u4e3b\u9898</li> <li>\u6613\u4e8e\u4e2a\u6027\u5316</li> <li>\u5b9e\u65f6\u9884\u89c8</li> <li>\u968f\u5904\u6258\u7ba1</li> </ul>"},{"location":"Web/%E4%BD%BF%E7%94%A8MkDocs%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/#_1","title":"\u5feb\u901f\u642d\u5efa","text":""},{"location":"Web/%E4%BD%BF%E7%94%A8MkDocs%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/#github","title":"\u65b0\u5efaGitHub\u4ed3\u5e93","text":"<p>\u6253\u5f00GitHub\u5b98\u7f51\u5e76\u767b\u5f55\uff0c\u65b0\u5efa\u4e00\u4e2a\u4ed3\u5e93\uff0c\u540d\u79f0\u5fc5\u987b\u4e3a <code>&lt;username&gt;.github.io</code></p> <p></p> <p>\u5c06\u8fd9\u4e2a\u4ed3\u5e93\u514b\u9686\u5230\u672c\u5730\uff0c\u8fd9\u91cc\u91cd\u547d\u540d\u4e3a <code>github-pages</code></p> <pre><code>git clone https://github.com/&lt;username&gt;/&lt;username&gt;.github.io.git github-pages\n</code></pre>"},{"location":"Web/%E4%BD%BF%E7%94%A8MkDocs%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/#mkdocs_2","title":"\u5b89\u88c5MkDocs\u7a0b\u5e8f","text":"<p>\u8fdb\u5165 <code>github-pages</code> \u76ee\u5f55</p> <pre><code>cd github-pages\n</code></pre> <p>\u521b\u5efapython\u865a\u62df\u73af\u5883\uff0c\u8fd9\u91cc\u4f7f\u7528 <code>pipenv</code></p> <pre><code>pipenv install\n</code></pre> <p>\u5b89\u88c5MkDocs\u7a0b\u5e8f</p> <pre><code>pipenv install mkdocs\n</code></pre> <p>\u8fdb\u5165python\u865a\u62df\u73af\u5883</p> <pre><code>pipenv shell\n</code></pre> <p>\u68c0\u67e5\u662f\u5426\u5b89\u88c5\u6210\u529f</p> <pre><code>mkdocs --version\n</code></pre> <p>\u5982\u679c\u5b89\u88c5\u6210\u529f\uff0c\u5219\u5e94\u8be5\u4f1a\u8f93\u51faMkDocs\u7684\u7248\u672c\u4fe1\u606f</p> <p></p>"},{"location":"Web/%E4%BD%BF%E7%94%A8MkDocs%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/#mkdocs_3","title":"\u521b\u5efaMkDocs\u5de5\u7a0b","text":"<p>\u5728\u5f53\u524d\u76ee\u5f55( <code>github-pages</code> )\u4e0b\u65b0\u5efa\u5de5\u7a0b</p> <pre><code>mkdocs new .\n</code></pre> <p>\u7136\u540e\u7f16\u8bd1MkDos\u6587\u6863</p> <pre><code>mkdocs build\n</code></pre> <p>\u8fd9\u65f6\u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u751f\u6210 <code>site</code> \u6587\u4ef6\u5939\uff0c\u91cc\u9762\u4fdd\u5b58\u7740\u7f51\u7ad9\u7684\u9759\u6001\u6587\u4ef6</p>"},{"location":"Web/%E4%BD%BF%E7%94%A8MkDocs%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/#_2","title":"\u9884\u89c8\u548c\u90e8\u7f72","text":"<p>MkDocs\u652f\u6301\u5728\u90e8\u7f72\u4e4b\u524d\uff0c\u5b9e\u65f6\u9884\u89c8\u7f51\u9875\u5185\u5bb9</p> <pre><code>mkdocs serve -a 0.0.0.0:8000\n</code></pre> <p>\u5176\u4e2d\u7684 <code>-a</code> \u9009\u9879\u7528\u4e8e\u6307\u5b9a\u7ed1\u5b9a\u7684 <code>&lt;IP:PORT&gt;</code> \uff0c\u5982\u679c\u4e0d\u6307\u5b9a\uff0c\u5219\u9ed8\u8ba4\u4e3a <code>localhost:8000</code></p> <p>\u5982\u679c\u9884\u89c8\u53d1\u73b0\u95ee\u9898\uff0c\u76f4\u63a5\u4fee\u6539\u6587\u6863\u6e90\u6587\u4ef6\uff0cMkDocs\u68c0\u6d4b\u5230\u6587\u4ef6\u53d1\u751f\u53d8\u5316\u4f1a\u81ea\u52a8\u66f4\u65b0\u9884\u89c8\u5185\u5bb9</p> <p>\u9884\u89c8\u5982\u679c\u6ca1\u6709\u53d1\u73b0\u95ee\u9898\uff0c\u63a5\u4e0b\u6765\u5c31\u53ef\u4ee5\u90e8\u7f72\u5230GitHub\u4e86</p> <pre><code>mkdocs gh-deploy --clean\n</code></pre> <p>\u6267\u884c\u7ed3\u675f\u540e\uff0c\u67e5\u770bGitHub\u4ed3\u5e93\uff0c\u53d1\u73b0\u591a\u4e86\u4e00\u4e2a <code>gh-pages</code> \u5206\u652f\uff0c\u8fd9\u4e2a\u5206\u652f\u91cc\u5b58\u653e\u7684\u5c31\u662f <code>site</code> \u6587\u4ef6\u5939\u4e2d\u7684\u5185\u5bb9</p> <p>\u6700\u540e\u4e00\u6b65\uff0c\u914d\u7f6eGitHub Pages\u7684\u6784\u5efa\u548c\u90e8\u7f72\u5206\u652f\uff0c\u5c06 <code>Settings</code> -&gt; <code>Pages</code> -&gt; <code>Build and deployment</code> -&gt; <code>Branch</code> \u8bbe\u7f6e\u4e3a <code>gh-pages/(root)</code>\uff0c\u70b9\u51fb <code>Save</code> \u4fdd\u5b58\u8bbe\u7f6e</p> <p></p> <p>\u8fd9\u65f6\u7406\u8bba\u4e0a\u5c31\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\u81ea\u5df1\u521a\u521a\u642d\u5efa\u7684\u535a\u5ba2\u4e86\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u4e2d\u8f93\u5165 <code>https://&lt;username&gt;.github.io/</code> \uff0c\u82e5\u51fa\u73b0MkDocs\u7684\u6b22\u8fce\u9875\u5219\u8bf4\u660e\u90e8\u7f72\u6210\u529f</p> <p></p>"},{"location":"Web/%E4%BD%BF%E7%94%A8MkDocs%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/#_3","title":"\u914d\u7f6e\u7f51\u9875","text":"<p>MkDocs\u5de5\u7a0b\u7684\u6240\u6709\u914d\u7f6e\u90fd\u96c6\u6210\u5728 <code>mkdocs.yml</code> \u6587\u4ef6\u4e2d</p>"},{"location":"Web/%E4%BD%BF%E7%94%A8MkDocs%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/#_4","title":"\u4fee\u6539\u7f51\u9875\u540d\u79f0","text":"<p>\u7f51\u9875\u540d\u79f0\u5c31\u662f\u663e\u793a\u5728\u6d4f\u89c8\u5668\u6807\u7b7e\u4ee5\u53ca\u7f51\u9875\u5de6\u4e0a\u4f4d\u7f6e\u7684\u5185\u5bb9\uff0c\u9ed8\u8ba4\u4e3a <code>My Docs</code>\uff0c\u53ef\u4ee5\u5728 <code>mkdocs.yml</code> \u6587\u4ef6\u4e2d\u7684\u8bbe\u7f6e <code>site_name</code> \u6765\u6539\u53d8</p> mkdocs.yml<pre><code>site_name: &lt;\u7f51\u9875\u540d\u79f0&gt;\n</code></pre>"},{"location":"Web/%E4%BD%BF%E7%94%A8MkDocs%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/#_5","title":"\u4fee\u6539\u4e3b\u9898","text":"<p>MkDocs\u652f\u6301\u591a\u4e2a\u4e3b\u9898\uff0c\u5185\u7f6e\u4e3b\u9898\u6709 <code>mkdocs</code> \u548c <code>readthedocs</code> \uff0c\u7b2c\u4e09\u65b9\u4e3b\u9898\u53ef\u4ee5\u5728MkDocs Wiki\u627e\u5230\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e3b\u9898</p> <p>\u8fd9\u91cc\u6211\u662f\u7528\u7684\u662f\u6bd4\u8f83\u53d7\u6b22\u8fce\u7684 <code>material</code> \u4e3b\u9898</p> <pre><code>pipenv install mkdocs-material\n</code></pre> <p><code>material</code> \u4e3b\u9898\u7684\u8be6\u7ec6\u914d\u7f6e\u8bf4\u660e\u53ef\u4ee5\u53c2\u9605Material for MkDocs\uff0c\u8fd9\u91cc\u6211\u7684\u914d\u7f6e\u5982\u4e0b</p> mkdocs.yml<pre><code>theme:\nname: material\nlanguage: zh\nhljs_languages:\n- yaml\nmarkdown_extensions:\n- toc:\npermalink: true\n- pymdownx.highlight:\nlinenums: true\nanchor_linenums: true\n- pymdownx.inlinehilite\n- pymdownx.superfences\n</code></pre> <ul> <li><code>name</code> \u6307\u5b9a\u4f7f\u7528\u7684\u4e3b\u9898\u540d\u79f0</li> <li><code>language</code> \u6307\u5b9a\u7f51\u9875\u8bed\u8a00</li> <li><code>hljs_languages</code> \u6307\u5b9a\u989d\u5916\u9700\u8981\u9ad8\u4eae\u7684\u8bed\u8a00</li> <li><code>toc</code> \u7528\u4e8e\u8bbe\u7f6e\u76ee\u5f55\uff0c<code>permalink: true</code> \u8868\u793a\u4e3a\u7f51\u9875\u4e2d\u7684\u4e00\u7ea7/\u4e8c\u7ea7/\u4e09\u7ea7/...\u6807\u9898\u751f\u6210\u94fe\u63a5</li> <li><code>pymdownx.highlight</code> \u7528\u4e8e\u8bbe\u7f6e\u4ee3\u7801\u9ad8\u4eae\uff0c<code>linenums: true</code> \u8868\u793a\u663e\u793a\u884c\u53f7\uff0c<code>anchor_linenums: true</code> \u7528\u4e8e\u4e3a\u4ee3\u7801\u5757\u7684\u884c\u53f7\u751f\u6210\u94fe\u63a5</li> <li><code>pymdownx.inlinehilite</code> \u542f\u7528\u5bf9\u5185\u8054\u4ee3\u7801\u9ad8\u4eae\u7684\u652f\u6301</li> <li><code>pymdownx.superfences</code> \u5141\u8bb8\u5728\u4ee3\u7801\u548c\u5185\u5bb9\u5757\u4e4b\u95f4\u4efb\u610f\u5d4c\u5957</li> </ul> <p>\u6700\u7ec8\u6548\u679c\u5982\u4e0b</p> <p></p>"},{"location":"Web/%E4%BD%BF%E7%94%A8MkDocs%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/#_6","title":"\u53d1\u5e03\u6587\u7ae0","text":"<p>MkDocs\u7684\u6587\u7ae0\u4ee5markdown\u6587\u4ef6\u7684\u5f62\u5f0f\u5b58\u50a8\u5728docs\u6587\u4ef6\u5939\u4e0b\uff0c\u5176\u4e2d <code>index.md</code> \u4e3a\u4e3b\u9875</p> <p>\u53d1\u5e03\u65b0\u6587\u7ae0\u65f6\uff0c\u5728docs\u76ee\u5f55\u4e0b\u65b0\u5efa <code>&lt;article&gt;.md</code> \u6587\u4ef6\u5e76\u7f16\u8f91</p> <p>\u7136\u540e\u4fee\u6539 <code>mkdocs.yml</code> \u6587\u4ef6\uff0c\u5c06\u65b0\u6587\u7ae0\u52a0\u5230\u5bfc\u822a\u680f\u4e2d</p> mkdocs.yml<pre><code>nav:\n- \u4e3b\u9875: index.md\n- &lt;\u6807\u9898&gt;: &lt;article&gt;.md\n</code></pre> <p>\u6807\u9898\u53ef\u4ee5\u4e0d\u8bbe\u7f6e\uff0cMkDocs\u6309\u7167 nav\u914d\u7f6e\u7684\u6807\u9898 &gt; \u6587\u7ae0\u4e2d\u5b9a\u4e49\u7684\u6807\u9898(h1) &gt; \u6587\u4ef6\u540d \u7684\u987a\u5e8f\u8fdb\u884c\u63a8\u65ad</p> <p>\u5982\u679c\u8981\u4f7f\u7528\u591a\u7ea7\u5bfc\u822a\uff0c\u5219\u53ef\u4ee5\u8fd9\u6837\u914d\u7f6e</p> mkdocs.yml<pre><code>nav:\n- \u4e3b\u9875: index.md\n- &lt;\u5206\u7c7b&gt;:\n- &lt;\u6807\u9898&gt;: &lt;aritle&gt;.md\n</code></pre> <p>\u7136\u540e\u6267\u884c <code>mkdocs gh-deploy</code> \u547d\u4ee4\u90e8\u7f72\u5230GitHub</p>"},{"location":"Web/%E4%BD%BF%E7%94%A8MkDocs%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/#_7","title":"\u81ea\u52a8\u90e8\u7f72","text":"<p>\u4e00\u822c\u4f1a\u5c06MkDocs\u6e90\u6587\u4ef6\u4e5f\u63a8\u9001\u5230GitHub\u4ee5\u9632\u6b62\u4e22\u5931\uff0c\u8fd9\u91cc\u6211\u5c31\u76f4\u63a5\u63a8\u9001\u5230 <code>main</code> \u5206\u652f</p> <p>\u65b0\u5efa <code>.gitignore</code> \u6587\u4ef6\uff0c\u5ffd\u7565\u6389\u9664 <code>docs</code> \u3001 <code>mkdocs.yml</code> \u4ee5\u53ca <code>git</code> \u76f8\u5173\u6587\u4ef6\u4e4b\u5916\u7684\u6587\u4ef6</p> .gitignore<pre><code>/*\n!/docs\n!/mkdocs.yml\n!/.gitignore\n!/.github\n</code></pre> <p>\u7136\u540e\u6211\u4eec\u5728\u7f16\u5199\u5b8c\u6587\u7ae0\u540e\uff0c\u4e00\u822c\u81f3\u5c11\u90fd\u8981\u6267\u884c\u8fd9\u4e9b\u547d\u4ee4</p> <pre><code>git add .\ngit commit -m 'new article'\ngit push    # \u7b2c\u4e00\u6b21push\u65f6\u6267\u884cgit push -u origin main\nmkdocs gh-deploy\n</code></pre> <p>\u672c\u7740\u7701\u4e00\u70b9\u662f\u4e00\u70b9\u7684\u539f\u5219\uff0c\u524d\u9762\u51e0\u4e2a <code>git</code> \u76f8\u5173\u7684\u547d\u4ee4\u65e0\u6cd5\u7701\u7565\uff0c\u4f46 <code>mkdocs gh-deploy</code> \u53ef\u4ee5\u901a\u8fc7GitHub Actions\u6765\u5e2e\u52a9\u6211\u4eec\u81ea\u52a8\u5b8c\u6210</p> <p>\u5728\u4ed3\u5e93\u6839\u76ee\u5f55\u4e0b\u65b0\u5efa <code>.github/workflows</code> \u6587\u4ef6\u5939</p> <pre><code>mkdir -p .github/workflows\n</code></pre> <p>\u5728 <code>.github/workflows</code> \u6587\u4ef6\u5939\u4e0b\u65b0\u5efa <code>gh-deploy.yml</code> \u6587\u4ef6\uff0c\u5176\u4ed6\u6587\u4ef6\u540d\u4e5f\u53ef\u4ee5\uff0c\u5185\u5bb9\u5982\u4e0b\uff0c\u5177\u4f53\u542b\u4e49\u53ef\u4ee5\u53c2\u8003Deploy MkDocs</p> gh-deploy.yml<pre><code>name: Publish docs via GitHub Pages\non:\npush:\nbranches:\n- main\njobs:\nbuild:\nname: Deploy docs\nruns-on: ubuntu-latest\nsteps:\n- name: Checkout main\nuses: actions/checkout@v2\n- name: Deploy docs\nuses: mhausenblas/mkdocs-deploy-gh-pages@master\nenv:\nGITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\nEXTRA_PACKAGES: build-base\n</code></pre> <p>\u5728GitHub\u4ed3\u5e93\u9875\u9762\u4e2d\uff0c\u5c06 <code>Settings</code> -&gt; <code>Actions</code> -&gt; <code>General</code> -&gt; <code>Workflow Permissions</code> \u8bbe\u7f6e\u4e3a <code>Read an write permissions</code>\uff0c\u70b9\u51fb <code>Save</code> \u4fdd\u5b58\u8bbe\u7f6e</p> <p></p> <p>\u8fd9\u6837\u6bcf\u6b21\u7f16\u5199\u5b8c\u6587\u7ae0\uff0c\u53ea\u9700\u6210\u529f\u6267\u884c <code>git push</code> \uff0cGitHub\u5c31\u4f1a\u81ea\u52a8\u5e2e\u52a9\u6211\u4eec\u90e8\u7f72</p>"},{"location":"Web/%E4%BD%BF%E7%94%A8MkDocs%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/#_8","title":"\u53c2\u8003\u8d44\u6599","text":"<ol> <li>MkDocs\u5b98\u7f51</li> <li>MkDocs\u4e2d\u6587\u6587\u6863</li> <li>Material for MkDocs</li> <li>Mkdocs \u914d\u7f6e\u548c\u4f7f\u7528</li> <li>Deploy MkDocs</li> </ol>"},{"location":"Web/%E5%8D%9A%E5%AE%A2%E5%9B%AD%E8%AE%BE%E7%BD%AESilence%E4%B8%BB%E9%A2%98/","title":"\u535a\u5ba2\u56ed\u8bbe\u7f6eSilence\u4e3b\u9898","text":"<p>\u535a\u5ba2\u56ed\u7684\u63d0\u4f9b\u4e86\u4e00\u767e\u591a\u4e2a\u9ed8\u8ba4\u4e3b\u9898\uff0c\u4f46\u6211\u8fd8\u662f\u627e\u4e0d\u5230\u4e00\u4e2a\u5e72\u51c0\u3001\u7b80\u6d01\u3001\u7f8e\u89c2\u7684\u3002\u4e86\u89e3\u5230\u535a\u5ba2\u56ed\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e3b\u9898\uff0c\u4e8e\u662f\u5728\u7f51\u4e0a\u641c\u5bfb\u76f8\u5173\u5185\u5bb9\uff0c\u7ec8\u4e8e\u88ab\u6211\u53d1\u73b0\u4e86Silence\u2014\u2014\u4e00\u4e2a\u4e13\u6ce8\u4e8e\u9605\u8bfb\u7684\u535a\u5ba2\u56ed\u4e3b\u9898\u3002</p>"},{"location":"Web/%E5%8D%9A%E5%AE%A2%E5%9B%AD%E8%AE%BE%E7%BD%AESilence%E4%B8%BB%E9%A2%98/#silence_1","title":"Silence\u4ecb\u7ecd","text":"<p>Silence\u662f\u4e00\u4e2a\u4e13\u6ce8\u4e8e\u9605\u8bfb\u7684\u535a\u5ba2\u56ed\u4e3b\u9898</p> <ul> <li>\u754c\u9762\u7b80\u6d01\u4f18\u96c5\uff0c\u54cd\u5e94\u5f0f\u7f51\u9875\u8bbe\u8ba1</li> <li>\u8f7b\u91cf\u914d\u7f6e\uff0c\u6587\u6863\u7ed9\u529b\uff0c\u975e\u5e38\u5bb9\u6613\u4f7f\u7528</li> <li>\u63d0\u4f9b\u6697\u9ed1\u6a21\u5f0f\u548c\u591a\u79cd\u8272\u5f69\u4e3b\u9898\uff0c\u53ef\u968f\u65f6\u5207\u6362</li> <li>\u652f\u6301\u81ea\u5b9a\u4e49\u5bfc\u822a\u680f\u83dc\u5355\u9879\u3001\u60ac\u6d6e\u6807\u9898\u76ee\u5f55\u7b49</li> <li>\u63d0\u4f9b\u6587\u7ae0\u7248\u6743\u7b7e\u540d\u3001\u8d5e\u8d4f\u529f\u80fd\u7b49</li> <li>\u9879\u76ee\u7ed3\u6784\u6e05\u6670\uff0c\u4ee3\u7801\u7b80\u5355\uff0c\u53ef\u5b9e\u73b0\u9ad8\u5ea6\u5b9a\u5236\u5316\u5f00\u53d1</li> </ul>"},{"location":"Web/%E5%8D%9A%E5%AE%A2%E5%9B%AD%E8%AE%BE%E7%BD%AESilence%E4%B8%BB%E9%A2%98/#_1","title":"\u90e8\u7f72\u4e3b\u9898","text":"<p>\u5728\u8fdb\u884c\u4e0b\u9762\u7684\u64cd\u4f5c\u4e4b\u524d\uff0c\u9700\u8981\u7533\u8bf7\u535a\u5ba2\u56ed\u7684JS\u6743\u9650\uff0c\u53c2\u8003\u535a\u5ba2\u56ed\u7533\u8bf7JS\u6743\u9650\u6559\u7a0b\uff0c\u8fd9\u91cc\u4e0d\u505a\u4ecb\u7ecd</p> <p>\u6210\u529f\u5f00\u901aJS\u6743\u9650\u540e\uff0c\u8fdb\u5165\u535a\u5ba2\u56ed\u540e\u53f0\u201c\u8bbe\u7f6e\u201d\u9875\u9762</p> <p>\u5728\u201c\u57fa\u672c\u8bbe\u7f6e\u201d\u4e2d\u8bbe\u7f6e\u535a\u5ba2\u6807\u9898\uff0c\u5e76\u9009\u62e9 <code>Custom</code> \u4f5c\u4e3a\u535a\u5ba2\u76ae\u80a4\uff0c\u6ce8\u610f\u535a\u5ba2\u5b50\u6807\u9898\u4e0d\u7528\u8bbe\u7f6e\uff0c\u56e0\u4e3aSilence\u4e0d\u652f\u6301</p> <p></p> <p>\u5728\u201c\u4ee3\u7801\u9ad8\u4eae\u201d\u4e2d\u8bbe\u7f6e\u6e32\u67d3\u5f15\u64ce\u4e3a <code>highlight.js</code>\uff0c\u53d6\u6d88\u52fe\u9009\u201c\u663e\u793a\u884c\u53f7\u201d\uff0c\u5e76\u5c06\u7cfb\u7edf\u4e3b\u9898\u8bbe\u4e3a <code>cnblogs</code></p> <p></p> <p>\u5728\u201c\u9875\u9762\u5b9a\u5236CSS\u4ee3\u7801\u201d\u4e2d\u52fe\u9009\u201c\u7981\u7528\u6a21\u677f\u9ed8\u8ba4CSS\u201d\uff0c\u5e76\u5728\u8f93\u5165\u6846\u4e2d\u586b\u5165\u5982\u4e0b\u5185\u5bb9</p> <pre><code>@import\u00a0url(https://cdn.jsdelivr.net/gh/esofar/cnblogs-theme-silence@latest/dist/silence.min.css)\n</code></pre> <p>\u53ef\u4ee5\u901a\u8fc7 <code>url</code> \u4e2d\u7684 <code>@</code> \u6307\u5b9a\u4e3b\u9898\u7684\u7248\u672c\uff0c\u8fd9\u91cc\u7684 <code>@latest</code> \u8868\u793a\u4f7f\u7528\u6700\u65b0\u7684\u7248\u672c\uff0c\u4e5f\u53ef\u4ee5\u6307\u5b9a\u5176\u4ed6\u7248\u672c\uff0c\u6bd4\u5982 <code>@3.0.0-rc2</code> \u3001 <code>@3.0.0-beta4</code> \u7b49</p> <p></p> <p>\u5728\u201c\u9875\u811aHTML\u4ee3\u7801\u201d\u4e2d\u586b\u5165\u5982\u4e0b\u4ee3\u7801</p> <pre><code>&lt;script&gt;\nwindow.$silence\u00a0=\u00a0{\navatar:\u00a0'https://files.cnblogs.com/files/blogs/611458/avatar.ico',\nfavicon:\u00a0'https://files.cnblogs.com/files/blogs/611458/favicon.ico',\ngithub:\u00a0'https://github.com/chinjinyu',\ndefaultMode:\u00a0'auto',\ndefaultTheme:\u00a0'a',\nnavbars:\u00a0[{\ntitle:\u00a0'\u6807\u7b7e',\nurl:\u00a0'https://www.cnblogs.com/chinjinyu/tag/'\n},\u00a0{\ntitle:\u00a0'\u5f52\u6863',\nurl:\u00a0'https://www.cnblogs.com/chinjinyu/p/'\n}],\nshowNavAdmin:\u00a0true,\ncatalog:\u00a0{\nenable:\u00a0true,\nindex:\u00a0true,\nactive:\u00a0false,\nlevels:\u00a0['h2',\u00a0'h3',\u00a0'h4'],\n},\nsignature:\u00a0{\nenable:\u00a0true,\nauthor:\u00a0'chinjinyu',\nlicense:\u00a0['\u7f72\u540d-\u975e\u5546\u4e1a\u6027\u4f7f\u7528-\u76f8\u540c\u65b9\u5f0f\u5171\u4eab\u00a04.0\u00a0\u56fd\u9645',\u00a0'https://creativecommons.org/licenses/by-nc-sa/4.0/'],\n},\nsponsor:\u00a0{\nenable:\u00a0true,\nwechat:\u00a0'https://files.cnblogs.com/files/blogs/611458/wechat.ico',\nalipay:\u00a0'https://files.cnblogs.com/files/blogs/611458/alipay.ico'\n}\n};\n&lt;/script&gt;\n&lt;script\u00a0src=\"https://cdn.jsdelivr.net/gh/esofar/cnblogs-theme-silence@latest/dist/silence.min.js\"&gt;&lt;/script&gt;\n</code></pre> <p>\u6ce8\u610f\u8fd9\u91cc\u6700\u540e\u4e00\u884c <code>src</code> \u4e2d <code>@</code> \u7684\u7248\u672c\u9700\u8981\u548c\u201c\u9875\u9762\u5b9a\u5236CSS\u4ee3\u7801\u201d\u4e2d\u7684\u4fdd\u6301\u4e00\u81f4</p> <ul> <li><code>avatar</code> : \u535a\u5ba2\u4e3b\u9875\u5de6\u4fa7\u680f\u7684\u5934\u50cf</li> <li><code>favicon</code> : \u7f51\u9875\u6807\u9898\u524d\u7684\u5c0f\u56fe\u6807</li> <li><code>github</code> : \u4e2a\u4eba\u7684GitHub\u4e3b\u9875\u5730\u5740\uff0c\u535a\u5ba2\u5de6\u4e0a\u89d2\u6709\u4e2aGitHub\u6302\u4ef6\uff0c\u70b9\u51fb\u65f6\u4f1a\u8fdb\u884c\u8df3\u8f6c</li> <li><code>defaultMode</code> : \u4e3b\u9898\u6a21\u5f0f\uff0c\u6709 <code>light</code> / <code>dark</code> / <code>auto</code> \u4e09\u79cd\u9009\u9879</li> <li><code>defaultTheme</code> : \u9ed8\u8ba4\u52a0\u8f7d\u7684\u4e3b\u9898\u8272\u5f69\uff0c<code>a</code> \u8868\u793a\u84dd\u8272\uff0c\u5176\u4ed6\u503c\u53c2\u8003\u5b98\u65b9\u6587\u6863</li> <li><code>navbars</code> : \u8bbe\u7f6e\u5bfc\u822a\u680f\u4e2d\u7684\u81ea\u5b9a\u4e49\u83dc\u5355\u9879<ul> <li><code>title</code> : \u5bfc\u822a\u680f\u663e\u793a\u7684\u6807\u9898</li> <li><code>url</code> : \u5730\u5740</li> <li><code>children</code> : \u8bbe\u7f6e\u4e8c\u7ea7\u83dc\u5355\u9879<ul> <li><code>title</code> : \u4e8c\u7ea7\u83dc\u5355\u6807\u9898</li> <li><code>url</code> : \u5730\u5740</li> <li><code>target</code> : <code>_blank</code> \u8868\u793a\u5728\u65b0\u7a97\u53e3\u4e2d\u6253\u5f00</li> </ul> </li> </ul> </li> <li><code>showNavAdmin</code> : \u662f\u5426\u663e\u793a\u5bfc\u822a\u680f\u4e2d\u7684\u201c\u7ba1\u7406\u201d\u83dc\u5355\u9879</li> <li><code>catalog</code> : \u8bbe\u7f6e\u535a\u6587\u7684\u6807\u9898\u76ee\u5f55<ul> <li><code>enable</code> : \u662f\u5426\u542f\u7528\u76ee\u5f55</li> <li><code>index</code> : \u662f\u5426\u5728\u76ee\u5f55\u6807\u9898\u524d\u6dfb\u52a0\u7d22\u5f15</li> <li><code>active</code> : \u662f\u5426\u76f4\u63a5\u663e\u793a\u76ee\u5f55</li> <li><code>levels</code> : \u8bbe\u7f6e\u9700\u8981\u751f\u6210\u76ee\u5f55\u7684\u6807\u9898\u7b49\u7ea7</li> </ul> </li> <li><code>signature</code> : \u8bbe\u7f6e\u7248\u6743\u7b7e\u540d<ul> <li><code>enable</code> : \u662f\u5426\u542f\u7528\u7b7e\u540d</li> <li><code>author</code> : \u4f5c\u8005</li> <li><code>license</code> : \u77e5\u8bc6\u5171\u4eab\u8bb8\u53ef\u534f\u8bae</li> <li><code>remark</code> : \u5176\u4ed6\u5907\u6ce8</li> </ul> </li> <li><code>sponsor</code> : \u8bbe\u7f6e\u6253\u8d4f<ul> <li><code>enable</code> : \u662f\u5426\u542f\u7528\u6253\u8d4f</li> <li><code>text</code> : \u6253\u8d4f\u7684\u63d0\u793a\u4fe1\u606f</li> <li><code>paypal</code> : PayPal\u6536\u6b3e\u7801</li> <li><code>wechat</code> : \u5fae\u4fe1\u6536\u6b3e\u7801</li> <li><code>alipay</code> : \u652f\u4ed8\u5b9d\u6536\u6b3e\u7801</li> </ul> </li> </ul> <p>\u5728\u201c\u9875\u9996HTML\u4ee3\u7801\u201d\u8f93\u5165\u6846\u4e2d\u586b\u5165\u5982\u4e0b\u4ee3\u7801</p> <pre><code>&lt;div\u00a0class=\"loading\"&gt;\n&lt;div\u00a0class=\"box\"&gt;\n&lt;h2&gt;Loading&lt;/h2&gt;\n&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"Web/%E5%8D%9A%E5%AE%A2%E5%9B%AD%E8%AE%BE%E7%BD%AESilence%E4%B8%BB%E9%A2%98/#_2","title":"\u4ee3\u7801\u9ad8\u4eae\u53ca\u663e\u793a\u884c\u53f7","text":"<p>Slicence\u6700\u65b0\u7248\u672c\u4e0d\u80fd\u4ee3\u7801\u9ad8\u4eae\u548c\u663e\u793a\u884c\u53f7\u4e86\uff0c\u53c2\u89c1GitHub\u4e0a\u8fd9\u4e2aIssue #191\uff0c\u4ee3\u7801\u5757\u7684\u5c55\u793a\u6548\u679c\u50cf\u8fd9\u6837</p> <p></p> <p>\u8fd9\u5bf9\u9605\u8bfb\u4ee3\u7801\u9020\u6210\u4e86\u4e00\u5b9a\u7684\u4e0d\u4fbf\uff0c\u9488\u5bf9\u8fd9\u4e2a\u95ee\u9898\u6709\u4e24\u79cd\u89e3\u51b3\u65b9\u6848</p> <p>\u4e00\u4e2a\u662f\u9000\u56de <code>3.0.0-beta4</code> \u4ee5\u53ca\u4e4b\u524d\u7248\u672c\u7684Silience\uff0c\u5e76\u5728\u914d\u7f6e\u4e2d\u6dfb\u52a0 <code>hljsln: true</code> \u5f00\u542f\u663e\u793a\u884c\u53f7</p> <p>\u53e6\u4e00\u4e2a\u505a\u6cd5\u662f\uff0c\u5728\u201c\u4ee3\u7801\u9ad8\u4eae\u201d\u4e2d\u8bbe\u7f6e\u6e32\u67d3\u5f15\u64ce\u4e3a <code>prismjs</code> \uff0c\u52fe\u9009\u201c\u663e\u793a\u884c\u53f7\u201d\uff0c\u5e76\u5c06\u7cfb\u7edf\u4e3b\u9898\u8bbe\u4e3a <code>prism-xonokai</code></p> <p></p> <p>\u6548\u679c\u5982\u4e0b</p> <p></p>"},{"location":"Web/%E5%8D%9A%E5%AE%A2%E5%9B%AD%E8%AE%BE%E7%BD%AESilence%E4%B8%BB%E9%A2%98/#_3","title":"\u53c2\u8003\u8d44\u6599","text":"<ol> <li>Silence\u9879\u76ee</li> <li>Silence\u6587\u6863</li> <li>\u535a\u5ba2\u56ed\u7533\u8bf7JS\u6743\u9650\u6559\u7a0b</li> <li>\u65b0\u7248\u672c\u4e0d\u80fd\u4ee3\u7801\u9ad8\u4eae\u4e86\u5417\uff1f</li> </ol>"}]}